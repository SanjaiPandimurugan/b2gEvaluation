<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css"><link rel="stylesheet" href="../custom.css"><div class="middle-column">
 <section id="overview">
  <h1 class="hckui__typography__h1" itemprop="name">
   Project Postman
  </h1>
  <p class="hckui__typography__bodyL hckui__layout__marginBottom15" itemprop="description">
   A package monitoring solution to avoid porch pirates and misplaced packages.
  </p>
  <div class="hckui__layout__marginTop30">
   <div class="project-cover-image" itemprop="image" itemscope="" itemtype="https://schema.org/ImageObject">
    <meta content="https://hackster.imgix.net/uploads/attachments/1716440/_n7oqXjt3TM.blob?auto=compress&amp;w=900&amp;h=675&amp;fit=min&amp;fm=jpg" itemprop="url"/>
    <meta content="900" itemprop="width"/>
    <meta content="675" itemprop="height"/>
    <img alt="Project Postman" src="1.jpg"/>
   </div>
  </div>
 </section>
 <div class="project-section-break">
 </div>
 <div id="project_page_simple_ad_portal">
 </div>
 <div id="description" itemprop="articleBody">
  <section id="things">
   <div class="project-section-title">
    <h2 class="hckui__typography__h2 title-with-anchor">
     <span>
      Things used in this project
     </span>
    </h2>
   </div>
   <div class="project-parts">
    <div class="view-expanded" style="display:block">
     <table class="project-parts-table">
      <colgroup>
       <col style="width: 100px; height: 50px;"/>
       <col style="width: auto;"/>
      </colgroup>
      <tbody>
       <tr class="head">
        <td colspan="2">
         <h3 class="hckui__typography__h3">
          Hardware components
         </h3>
        </td>
        <tr>
         <td class="part-img">
          <img alt="UNIHIKER - IoT Python Programming Single Board Computer with Touchscreen" src="2.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1623050/9924dc25f8a8d36cae2ea2becac95b77_Bn8OXLjRQw.png?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1623050/9924dc25f8a8d36cae2ea2becac95b77_Bn8OXLjRQw.png?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"DFRobot UNIHIKER - IoT Python Programming Single Board Computer with Touchscreen","href":"/dfrobot/products/unihiker-iot-python-programming-single-board-computer-with-touchscreen1?ref=project-960b53","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/dfrobot/products/unihiker-iot-python-programming-single-board-computer-with-touchscreen1?ref=project-960b53">
           DFRobot UNIHIKER - IoT Python Programming Single Board Computer with Touchscreen
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Seeed Studio XIAO ESP32S3 Sense" src="3.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1650360/screenshot_2023-11-20_at_17_16_09_QdLoLAbseq.png?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1650360/screenshot_2023-11-20_at_17_16_09_QdLoLAbseq.png?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Seeed Studio XIAO ESP32S3 Sense","href":"/seeed/products/seeed-studio-xiao-esp32s3-sense?ref=project-960b53","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/seeed/products/seeed-studio-xiao-esp32s3-sense?ref=project-960b53">
           Seeed Studio XIAO ESP32S3 Sense
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Grove Vision AI Module V2" src="4.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1671503/1-101021112-grove-vision-ai-module-v2-45font_LxXbpFHMhY.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1671503/1-101021112-grove-vision-ai-module-v2-45font_LxXbpFHMhY.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Seeed Studio Grove Vision AI Module V2","href":"/seeed/products/grove-vision-ai-module-v2?ref=project-960b53","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/seeed/products/grove-vision-ai-module-v2?ref=project-960b53">
           Seeed Studio Grove Vision AI Module V2
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Camera Module" src="5.jpg" srcset="https://hackster.imgix.net/uploads/image/file/132940/11868-00a.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/image/file/132940/11868-00a.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Raspberry Pi Camera Module","href":"/raspberry-pi/products/camera-module?ref=project-960b53","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/raspberry-pi/products/camera-module?ref=project-960b53">
           Raspberry Pi Camera Module
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Grove Shield for Seeeduino XIAO - with embedded battery management chip" src="6.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1443566/xiao_-preview-25_YOYZK9MZYo.png?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1443566/xiao_-preview-25_YOYZK9MZYo.png?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Seeed Studio Grove Shield for Seeeduino XIAO - with embedded battery management chip","href":"/seeed/products/grove-shield-for-seeeduino-xiao-with-embedded-battery-management-chip?ref=project-960b53","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/seeed/products/grove-shield-for-seeeduino-xiao-with-embedded-battery-management-chip?ref=project-960b53">
           Seeed Studio Grove Shield for Seeeduino XIAO - with embedded battery management chip
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="nRF52 Development Kit" src="7.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1077653/nrf52-dk_f5l8pXEY68.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1077653/nrf52-dk_f5l8pXEY68.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Nordic Semiconductor nRF52 Development Kit","href":"/nordic-semiconductor/products/nrf52-development-kit?ref=project-960b53","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/nordic-semiconductor/products/nrf52-development-kit?ref=project-960b53">
           Nordic Semiconductor nRF52 Development Kit
          </a>
         </td>
        </tr>
       </tr>
       <tr class="head">
        <td colspan="2">
         <h3 class="hckui__typography__h3">
          Software apps and online services
         </h3>
        </td>
       </tr>
       <tr>
        <td class="part-img">
         <img alt="VS Code" src="8.jpg" srcset="https://hackster.imgix.net/uploads/attachments/673386/512px-visual_studio_code_1_18_icon_svg_k5OBc8o3Yk.png?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/673386/512px-visual_studio_code_1_18_icon_svg_k5OBc8o3Yk.png?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
        </td>
        <td class="hckui__typography__bodyL">
         <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Microsoft VS Code","href":"/microsoft/products/vs-code?ref=project-960b53","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/microsoft/products/vs-code?ref=project-960b53">
          Microsoft VS Code
         </a>
        </td>
       </tr>
       <tr>
        <td class="part-img">
         <img alt="Arduino IDE" src="9.jpg" srcset="https://hackster.imgix.net/uploads/image/file/144203/IDE_web.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/image/file/144203/IDE_web.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
        </td>
        <td class="hckui__typography__bodyL">
         <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Arduino IDE","href":"/arduino/products/arduino-ide?ref=project-960b53","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/arduino/products/arduino-ide?ref=project-960b53">
          Arduino IDE
         </a>
        </td>
       </tr>
       <tr class="head">
        <td colspan="2">
         <h3 class="hckui__typography__h3">
          Hand tools and fabrication machines
         </h3>
        </td>
       </tr>
       <tr>
        <td class="part-img">
         <img alt="Soldering iron (generic)" src="10.jpg" srcset="https://hackster.imgix.net/uploads/image/file/79853/09507-01.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/image/file/79853/09507-01.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
        </td>
        <td class="hckui__typography__bodyL">
         Soldering iron (generic)
        </td>
       </tr>
       <tr>
        <td class="part-img">
         <img alt="Jumper Wire, Bundle" src="11.jpg" srcset="https://hackster.imgix.net/uploads/attachments/842454/46Y9605-40.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/842454/46Y9605-40.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
        </td>
        <td class="hckui__typography__bodyL">
         Jumper Wire, Bundle
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
  </section>
  <div class="project-section-break">
  </div>
  <section id="story">
   <div class="project-section-title">
    <h2 class="hckui__typography__h2 title-with-anchor">
     <span>
      Story
     </span>
    </h2>
   </div>
   <div class="project-story collapsible-section collapsed hljs-active hljs-monokai" itemprop="text">
    <p class="hckui__typography__bodyL">
     <strong>
      Project Postman is an IoT solution focused on monitoring and securing home deliveries,
     </strong>
     <span>
      with three key goals: accessibility, user experience, and security.
     </span>
    </p>
    <blockquote>
     This project was supported in parts by the Build2gether 2.0 Inclusive Innovation Challenge. The project is not fully complete and the code provide will serve a demo for some of curretnly implemented features.
    </blockquote>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-the-problem-0">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      The Problem
     </span>
    </h3>
    <p class="hckui__typography__bodyL">
     With the rise of home deliveries from retail and medical providers, individuals with mobility impairments face significant challenges in retrieving packages left on porches or doorsteps. Porch piracy is a growing issue, and for those unable to quickly collect their deliveries, packages are often left unattended, increasing the risk of theft. While services like Amazon's secure pick-up locations exist, they are not accessible to everyone, especially those with limited mobility, and only cater to select retailers, leaving critical deliveries like medications vulnerable.
    </p>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-the-solution-1">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      The Solution
     </span>
    </h3>
    <p class="hckui__typography__bodyL">
     Project Postman developed to be an IoT-powered package chest designed to assist individuals with mobility impairments. The chest locks and unlocks to securely store deliveries, with remote monitoring and access through a web interface. Using an XIAO ESP32-S3 to host an async web server, the device can be controlled via any browser, enabling users to manage lock status, view live streams, and receive alerts. The Unhiker operates as an on-device interface, allowing someone one to request to unlock or unlock with a pin code. There are future plans to integrate the nRF52840 DK for voice commands and smart home compatibility, to provide a more accessible and another secure way for users to manage deliveries.
    </p>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-proposed-system-2">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      Proposed System
     </span>
    </h3>
    <div class="carousel-images">
     <img class="carousel-image" src="0.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     The system is compised of three main boards ESP32, Unihker, nRF52 each boad is responsible for different task to increase accessibility of the device.
    </p>
    <p class="hckui__typography__bodyL">
     <strong>
      XIAO ESP32-S3 Sense (ESP32)
     </strong>
    </p>
    <p class="hckui__typography__bodyL">
     The ESP32 host a web app on an asynchronous web server.
    </p>
    <div class="embed-frame">
     <figure class="youtube">
      <iframe allowfullscreen="" frameborder="0" height="500" src="//www.youtube.com/embed/X8QQqZR6cWQ?rel=0" style="margin: 10px auto; display: block;" width="75%">
      </iframe>
      <figcaption class="hckui__typography__textCenter hckui__typography__pebble hckui__typography__bodyS hckui__layout__marginTop10">
       Live demo of the web app hosted by the ESP32.
      </figcaption>
     </figure>
    </div>
    <div class="embed-frame">
     <figure class="youtube">
      <iframe allowfullscreen="" frameborder="0" height="500" src="//www.youtube.com/embed/T-b50Cneec0?rel=0" style="margin: 10px auto; display: block;" width="75%">
      </iframe>
      <figcaption class="hckui__typography__textCenter hckui__typography__pebble hckui__typography__bodyS hckui__layout__marginTop10">
       Live demo of playing a recordind on the ESP32.
      </figcaption>
     </figure>
    </div>
    <div class="embed-frame">
     <figure class="youtube">
      <iframe allowfullscreen="" frameborder="0" height="500" src="//www.youtube.com/embed/ecqrZIrvpHw?rel=0" style="margin: 10px auto; display: block;" width="75%">
      </iframe>
     </figure>
    </div>
    <div class="embed-frame">
     <figure class="youtube">
      <iframe allowfullscreen="" frameborder="0" height="500" src="//www.youtube.com/embed/ERiLY_KLGq4?rel=0" style="margin: 10px auto; display: block;" width="75%">
      </iframe>
     </figure>
    </div>
    <p class="hckui__typography__bodyL">
     <br/>
    </p>
    <div class="embed-frame">
     <figure class="youtube">
      <iframe allowfullscreen="" frameborder="0" height="500" src="//www.youtube.com/embed/y05xYiLnxb0?rel=0" style="margin: 10px auto; display: block;" width="75%">
      </iframe>
      <figcaption class="hckui__typography__textCenter hckui__typography__pebble hckui__typography__bodyS hckui__layout__marginTop10">
       De
      </figcaption>
     </figure>
    </div>
    <p class="hckui__typography__bodyL">
     <strong>
      Unihiker
     </strong>
    </p>
    <div class="embed-frame">
     <figure class="youtube">
      <iframe allowfullscreen="" frameborder="0" height="500" src="//www.youtube.com/embed/6TMSSBgAs60?rel=0" style="margin: 10px auto; display: block;" width="75%">
      </iframe>
     </figure>
    </div>
    <p class="hckui__typography__bodyL">
     <br/>
    </p>
   </div>
  </section>
  <div class="project-section-break">
  </div>
  <section id="code">
   <div class="project-section-title">
    <h2 class="hckui__typography__h2 title-with-anchor">
     <span>
      Code
     </span>
    </h2>
   </div>
   <div class="project-attachment project-code-widget">
    <div class="tabs hckui__typography__bodyS">
     <ul>
      <li class="active">
       <a data-target="#code-widget-657601" href="javascript:void(0)">
        ESP32-Postman.ino
       </a>
      </li>
      <li>
       <a data-target="#code-widget-657602" href="javascript:void(0)">
        index.html
       </a>
      </li>
      <li>
       <a data-target="#code-widget-657603" href="javascript:void(0)">
        style.css
       </a>
      </li>
      <li>
       <a data-target="#code-widget-657605" href="javascript:void(0)">
        setup.html
       </a>
      </li>
      <li>
       <a data-target="#code-widget-657604" href="javascript:void(0)">
        script.js
       </a>
      </li>
      <li>
       <a data-target="#code-widget-657599" href="javascript:void(0)">
        unihiker_app.py
       </a>
      </li>
      <li>
       <a data-target="#code-widget-657610" href="javascript:void(0)">
        unihiker_uart.py
       </a>
      </li>
      <li>
       <a data-target="#code-widget-657600" href="javascript:void(0)">
        testwebcam.py
       </a>
      </li>
     </ul>
    </div>
    <div class="preview-container">
     <div class="preview-pane active" id="code-widget-657601">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          ESP32-Postman.ino
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          Arduino
         </span>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax arduino">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;WiFi.h&gt;</span><span class="cp"></span>
</span><span id="line-2"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;AsyncTCP.h&gt;</span><span class="cp"></span>
</span><span id="line-3"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ESPAsyncWebServer.h&gt;</span><span class="cp"></span>
</span><span id="line-4"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ElegantOTA.h&gt;</span><span class="cp"></span>
</span><span id="line-5"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;WebSerial.h&gt;</span><span class="cp"></span>
</span><span id="line-6"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;LittleFS.h&gt;</span><span class="cp"></span>
</span><span id="line-7"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SoftwareSerial.h&gt;</span><span class="cp"></span>
</span><span id="line-8"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Preferences.h&gt;</span><span class="cp"></span>
</span><span id="line-9"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Seeed_Arduino_SSCMA.h&gt;</span><span class="cp"></span>
</span><span id="line-10"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ArduinoJson.h&gt;</span><span class="cp"></span>
</span><span id="line-11"><span class="cp">#include</span><span class="w"> </span><span class="cpf">"time.h"</span><span class="cp"></span>
</span><span id="line-12"><span class="cp">#include</span><span class="w"> </span><span class="cpf">"FS.h"</span><span class="cp"></span>
</span><span id="line-13"><span class="cp">#include</span><span class="w"> </span><span class="cpf">"SD.h"</span><span class="cp"></span>
</span><span id="line-14"><span class="cp">#include</span><span class="w"> </span><span class="cpf">"SPI.h"</span><span class="cp"></span>
</span><span id="line-15"><span class="cp">#include</span><span class="w"> </span><span class="cpf">"esp_mac.h"</span><span class="cp"></span>
</span><span id="line-16"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;esp_task_wdt.h&gt;</span><span class="cp"></span>
</span><span id="line-17">
</span><span id="line-18"><span class="cp">#define FIRMWAREVERSION "EO 1.0"  </span><span class="c1">// E-ESP32 O-open source 1.0 Version</span>
</span><span id="line-19"><span class="cp">#define SD_CS_PIN 21              </span><span class="c1">// XIAO ESP32-S3 CS pin</span>
</span><span id="line-20"><span class="cp">#define host "ProjectPostmanESP"  </span><span class="c1">// Hostname for the netowrk.</span>
</span><span id="line-21"><span class="cp">#define TASK_STACK_SIZE 8192</span>
</span><span id="line-22">
</span><span id="line-23"><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">AP_ssid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"XIAO_ESP32S3"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-24"><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">AP_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"123456789"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-25"><span class="c1">// String ssid = "Xtream_2.4G_CC93";</span>
</span><span id="line-26"><span class="c1">// String password = "zwtt3xbe";</span>
</span><span id="line-27"><span class="kr">String</span><span class="w"> </span><span class="n">ssid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Thomas"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-28"><span class="kr">String</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Qcpeds*7"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-29"><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">http_username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"admin"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-30"><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">http_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"admin"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-31">
</span><span id="line-32"><span class="kr">struct</span> <span class="nc">deviceInfo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-33"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">deviceModel</span><span class="p">;</span><span class="w"></span>
</span><span id="line-34"><span class="w">  </span><span class="kr">uint32_t</span><span class="w"> </span><span class="n">chipID</span><span class="p">;</span><span class="w"></span>
</span><span id="line-35"><span class="w">  </span><span class="kr">uint8_t</span><span class="w"> </span><span class="n">chipCores</span><span class="p">;</span><span class="w"></span>
</span><span id="line-36"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">MAC_Address</span><span class="p">;</span><span class="w"></span>
</span><span id="line-37"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">firmware</span><span class="p">;</span><span class="w"></span>
</span><span id="line-38"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">ssid</span><span class="p">;</span><span class="w"></span>
</span><span id="line-39"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">wifi_password</span><span class="p">;</span><span class="w"></span>
</span><span id="line-40"><span class="w">  </span><span class="kr">int32_t</span><span class="w"> </span><span class="n">signalstrength</span><span class="p">;</span><span class="w"></span>
</span><span id="line-41"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">hostname</span><span class="p">;</span><span class="w"></span>
</span><span id="line-42"><span class="w">  </span><span class="nf">IPAddress</span><span class="w"> </span><span class="n">IP</span><span class="p">;</span><span class="w"></span>
</span><span id="line-43"><span class="w">  </span><span class="kr">bool</span><span class="w"> </span><span class="n">wificonnected</span><span class="p">;</span><span class="w"></span>
</span><span id="line-44"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">uptime</span><span class="p">;</span><span class="w"></span>
</span><span id="line-45"><span class="w">  </span><span class="kr">long</span><span class="w"> </span><span class="n">gmtoffset</span><span class="p">;</span><span class="w"></span>
</span><span id="line-46"><span class="w">  </span><span class="kr">int</span><span class="w"> </span><span class="n">daylightoffset</span><span class="p">;</span><span class="w"></span>
</span><span id="line-47"><span class="w">  </span><span class="kr">unsigned</span><span class="w"> </span><span class="kr">long</span><span class="w"> </span><span class="n">interval</span><span class="p">;</span><span class="w"></span>
</span><span id="line-48"><span class="w">  </span><span class="kr">bool</span><span class="w"> </span><span class="nb">setup</span><span class="p">;</span><span class="w"></span>
</span><span id="line-49"><span class="p">};</span><span class="w"></span>
</span><span id="line-50">
</span><span id="line-51"><span class="kr">struct</span> <span class="nc">user</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-52"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">username</span><span class="p">;</span><span class="w"></span>
</span><span id="line-53"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">password</span><span class="p">;</span><span class="w"></span>
</span><span id="line-54"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">email</span><span class="p">;</span><span class="w"></span>
</span><span id="line-55"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">phonenumber</span><span class="p">;</span><span class="w"></span>
</span><span id="line-56"><span class="w">  </span><span class="kr">char</span><span class="w"> </span><span class="n">pin</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span><span class="w"></span>
</span><span id="line-57"><span class="w">  </span><span class="kr">bool</span><span class="w"> </span><span class="n">admin</span><span class="p">;</span><span class="w"></span>
</span><span id="line-58"><span class="p">};</span><span class="w"></span>
</span><span id="line-59">
</span><span id="line-60"><span class="n">deviceInfo</span><span class="w"> </span><span class="n">esp32Info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-61"><span class="w">  </span><span class="s">""</span><span class="p">,</span><span class="w">         </span><span class="c1">// deviceModel</span>
</span><span id="line-62"><span class="w">  </span><span class="mi">0</span><span class="p">,</span><span class="w">          </span><span class="c1">// chipID</span>
</span><span id="line-63"><span class="w">  </span><span class="mi">0</span><span class="p">,</span><span class="w">          </span><span class="c1">// chipCores</span>
</span><span id="line-64"><span class="w">  </span><span class="s">""</span><span class="p">,</span><span class="w">         </span><span class="c1">// MAC_Address</span>
</span><span id="line-65"><span class="w">  </span><span class="s">""</span><span class="p">,</span><span class="w">         </span><span class="c1">// firmware</span>
</span><span id="line-66"><span class="w">  </span><span class="s">""</span><span class="p">,</span><span class="w">         </span><span class="c1">// ssid</span>
</span><span id="line-67"><span class="w">  </span><span class="s">""</span><span class="p">,</span><span class="w">         </span><span class="c1">// wifi_password</span>
</span><span id="line-68"><span class="w">  </span><span class="mi">0</span><span class="p">,</span><span class="w">          </span><span class="c1">// signalstrength</span>
</span><span id="line-69"><span class="w">  </span><span class="s">""</span><span class="p">,</span><span class="w">         </span><span class="c1">// hostname</span>
</span><span id="line-70"><span class="w">  </span><span class="s">""</span><span class="p">,</span><span class="w">         </span><span class="c1">// IP</span>
</span><span id="line-71"><span class="w">  </span><span class="kr">false</span><span class="p">,</span><span class="w">      </span><span class="c1">// wificonnected</span>
</span><span id="line-72"><span class="w">  </span><span class="s">""</span><span class="p">,</span><span class="w">         </span><span class="c1">// uptime</span>
</span><span id="line-73"><span class="w">  </span><span class="mi">-3600</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">  </span><span class="c1">// gmtoffset</span>
</span><span id="line-74"><span class="w">  </span><span class="mi">0</span><span class="p">,</span><span class="w">          </span><span class="c1">// daylightoffset</span>
</span><span id="line-75"><span class="w">  </span><span class="mi">30000</span><span class="p">,</span><span class="w">      </span><span class="c1">// interval</span>
</span><span id="line-76"><span class="w">  </span><span class="kr">false</span><span class="w">       </span><span class="c1">// setup</span>
</span><span id="line-77"><span class="p">};</span><span class="w"></span>
</span><span id="line-78">
</span><span id="line-79"><span class="n">user</span><span class="w"> </span><span class="n">userid</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span><span class="w"></span>
</span><span id="line-80"><span class="n">AsyncWebServer</span><span class="w"> </span><span class="nf">server</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span><span class="w">       </span><span class="c1">// Create AsyncWebServer object on port 80</span>
</span><span id="line-81"><span class="nf">SoftwareSerial</span><span class="w"> </span><span class="nf">espSerial</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w">  </span><span class="c1">// (D2 = 3) RX, (D3 = 4) TX pins for ESP32</span>
</span><span id="line-82"><span class="n">Preferences</span><span class="w"> </span><span class="n">device</span><span class="p">;</span><span class="w"></span>
</span><span id="line-83"><span class="n">Preferences</span><span class="w"> </span><span class="n">userdata</span><span class="p">;</span><span class="w"></span>
</span><span id="line-84"><span class="n">SSCMA</span><span class="w"> </span><span class="n">AI</span><span class="p">;</span><span class="w"></span>
</span><span id="line-85">
</span><span id="line-86"><span class="kr">String</span><span class="w"> </span><span class="n">requestBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span><span class="w"></span>
</span><span id="line-87"><span class="kr">String</span><span class="w"> </span><span class="n">lastImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span><span class="w"></span>
</span><span id="line-88"><span class="kr">bool</span><span class="w"> </span><span class="n">streaming</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w">  </span><span class="c1">// Flag to manage streaming state</span>
</span><span id="line-89"><span class="kr">bool</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w">        </span><span class="c1">// Flag to manage lock state</span>
</span><span id="line-90"><span class="kr">unsigned</span><span class="w"> </span><span class="kr">long</span><span class="w"> </span><span class="n">previousMillis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
</span><span id="line-91">
</span><span id="line-92"><span class="kr">void</span><span class="w"> </span><span class="nf">setTime</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">tz</span><span class="p">);</span><span class="w"></span>
</span><span id="line-93"><span class="kr">void</span><span class="w"> </span><span class="nf">notFound</span><span class="p">(</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">);</span><span class="w"></span>
</span><span id="line-94"><span class="kr">void</span><span class="w"> </span><span class="nf">rebootESP</span><span class="p">(</span><span class="kr">String</span><span class="w"> </span><span class="n">message</span><span class="p">);</span><span class="w"></span>
</span><span id="line-95"><span class="kr">void</span><span class="w"> </span><span class="nf">listDirContents</span><span class="p">(</span><span class="nf">File</span><span class="w"> </span><span class="n">dir</span><span class="p">,</span><span class="w"> </span><span class="kr">String</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="kr">String</span><span class="w"> </span><span class="o">&amp;</span><span class="n">returnText</span><span class="p">,</span><span class="w"> </span><span class="kr">bool</span><span class="w"> </span><span class="n">ishtml</span><span class="p">);</span><span class="w"></span>
</span><span id="line-96"><span class="kr">String</span><span class="w"> </span><span class="nf">listFiles</span><span class="p">(</span><span class="kr">bool</span><span class="w"> </span><span class="n">ishtml</span><span class="p">);</span><span class="w"></span>
</span><span id="line-97"><span class="kr">String</span><span class="w"> </span><span class="nf">humanReadableSize</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">bytes</span><span class="p">);</span><span class="w"></span>
</span><span id="line-98"><span class="kr">String</span><span class="w"> </span><span class="nf">getContentType</span><span class="p">(</span><span class="kr">String</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span><span class="w"></span>
</span><span id="line-99"><span class="kr">String</span><span class="w"> </span><span class="nf">getLocalTimeStr</span><span class="p">();</span><span class="w"></span>
</span><span id="line-100"><span class="kr">bool</span><span class="w"> </span><span class="nf">initSDCard</span><span class="p">();</span><span class="w"></span>
</span><span id="line-101"><span class="kr">void</span><span class="w"> </span><span class="nf">writeFile</span><span class="p">(</span><span class="n">fs</span><span class="o">::</span><span class="n">FS</span><span class="w"> </span><span class="o">&amp;</span><span class="n">fs</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">);</span><span class="w"></span>
</span><span id="line-102"><span class="kr">void</span><span class="w"> </span><span class="nf">appendFile</span><span class="p">(</span><span class="n">fs</span><span class="o">::</span><span class="n">FS</span><span class="w"> </span><span class="o">&amp;</span><span class="n">fs</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">);</span><span class="w"></span>
</span><span id="line-103"><span class="kr">void</span><span class="w"> </span><span class="nf">recordGrove</span><span class="p">();</span><span class="w"></span>
</span><span id="line-104"><span class="kr">void</span><span class="w"> </span><span class="nf">alert</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">);</span><span class="w"></span>
</span><span id="line-105"><span class="kr">void</span><span class="w"> </span><span class="nf">logSD</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="kr">bool</span><span class="w"> </span><span class="n">serial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">true</span><span class="p">);</span><span class="w"></span>
</span><span id="line-106"><span class="kr">int</span><span class="w"> </span><span class="nf">year</span><span class="p">();</span><span class="w"></span>
</span><span id="line-107"><span class="kr">int</span><span class="w"> </span><span class="nf">month</span><span class="p">();</span><span class="w"></span>
</span><span id="line-108"><span class="kr">void</span><span class="w"> </span><span class="nf">createDirectories</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">);</span><span class="w"></span>
</span><span id="line-109"><span class="kr">String</span><span class="w"> </span><span class="nf">getInterfaceMacAddress</span><span class="p">(</span><span class="n">esp_mac_type_t</span><span class="w"> </span><span class="n">interface</span><span class="p">);</span><span class="w"></span>
</span><span id="line-110"><span class="kr">bool</span><span class="w"> </span><span class="nf">setupWiFi</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">newSSID</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">newPassword</span><span class="p">);</span><span class="w"></span>
</span><span id="line-111"><span class="kr">String</span><span class="w"> </span><span class="nf">getUptime</span><span class="p">();</span><span class="w"></span>
</span><span id="line-112"><span class="kr">String</span><span class="w"> </span><span class="nf">listRecordings</span><span class="p">();</span><span class="w"></span>
</span><span id="line-113"><span class="kr">void</span><span class="w"> </span><span class="nf">listDirContentsJson</span><span class="p">(</span><span class="nf">File</span><span class="w"> </span><span class="n">dir</span><span class="p">,</span><span class="w"> </span><span class="kr">String</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">JsonArray</span><span class="w"> </span><span class="o">&amp;</span><span class="n">filesArray</span><span class="p">);</span><span class="w"></span>
</span><span id="line-114"><span class="kr">void</span><span class="w"> </span><span class="nf">saveUserData</span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">index</span><span class="p">);</span><span class="w"></span>
</span><span id="line-115"><span class="kr">void</span><span class="w"> </span><span class="nf">loadUserData</span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">index</span><span class="p">);</span><span class="w"></span>
</span><span id="line-116"><span class="kr">void</span><span class="w"> </span><span class="nf">saveDeviceInfoToPreferences</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="n">deviceInfo</span><span class="w"> </span><span class="o">&amp;</span><span class="n">info</span><span class="p">);</span><span class="w"></span>
</span><span id="line-117"><span class="kr">void</span><span class="w"> </span><span class="nf">getDeviceInfoFromPreferences</span><span class="p">(</span><span class="n">deviceInfo</span><span class="w"> </span><span class="o">&amp;</span><span class="n">info</span><span class="p">);</span><span class="w"></span>
</span><span id="line-118"><span class="kr">void</span><span class="w"> </span><span class="nf">clearAllPreferences</span><span class="p">();</span><span class="w"></span>
</span><span id="line-119">
</span><span id="line-120"><span class="kr">void</span><span class="w"> </span><span class="nf">formatLittleFS</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-121"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Formatting LittleFS..."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-122"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">LittleFS</span><span class="p">.</span><span class="n">format</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-123"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"LittleFS formatted successfully."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-124"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-125"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Failed to format LittleFS."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-126"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-127"><span class="p">}</span><span class="w"></span>
</span><span id="line-128">
</span><span id="line-129"><span class="kr">void</span><span class="w"> </span><span class="nf">notFound</span><span class="p">(</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-130"><span class="w">  </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Not found"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-131"><span class="p">}</span><span class="w"></span>
</span><span id="line-132">
</span><span id="line-133"><span class="kr">void</span><span class="w"> </span><span class="nf">handleBody</span><span class="p">(</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="kr">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">len</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-134"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">index</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-135"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">"BodyStart: %u B</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="p">);</span><span class="w"></span>
</span><span id="line-136"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-137"><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-138"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
</span><span id="line-139"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-140"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-141"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">"BodyEnd: %u B</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="p">);</span><span class="w"></span>
</span><span id="line-142"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-143"><span class="p">}</span><span class="w"></span>
</span><span id="line-144">
</span><span id="line-145"><span class="kr">void</span><span class="w"> </span><span class="nb">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-146"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span><span class="w">                     </span><span class="c1">// Initialize the Arduino serial port</span>
</span><span id="line-147"><span class="w">  </span><span class="n">espSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span><span class="w">                  </span><span class="c1">// Initialize the ESP8266 serial port</span>
</span><span id="line-148"><span class="w">  </span><span class="n">getDeviceInfoFromPreferences</span><span class="p">(</span><span class="n">esp32Info</span><span class="p">);</span><span class="w">  </span><span class="c1">// Retrieve device info from Preferences</span>
</span><span id="line-149"><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-150"><span class="w">    </span><span class="n">loadUserData</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"></span>
</span><span id="line-151"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-152">
</span><span id="line-153"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">LittleFS</span><span class="p">.</span><span class="nf">begin</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-154"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"An Error has occurred while mounting LittleFS"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-155"><span class="w">    </span><span class="n">formatLittleFS</span><span class="p">();</span><span class="w">  </span><span class="c1">// Format LittleFS if mounting fails</span>
</span><span id="line-156"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">LittleFS</span><span class="p">.</span><span class="nf">begin</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-157"><span class="w">      </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Failed to mount LittleFS after formatting"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-158"><span class="w">      </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
</span><span id="line-159"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-160"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-161"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">initSDCard</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-162"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"An Error has occurred while initiating the SD Card"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-163"><span class="w">    </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
</span><span id="line-164"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-165"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">AI</span><span class="p">.</span><span class="nf">begin</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-166"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Grove Vision AI not initiated"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-167"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-168">
</span><span id="line-169"><span class="w">  </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">chipID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kr">uint32_t</span><span class="p">)(</span><span class="n">ESP</span><span class="p">.</span><span class="n">getEfuseMac</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span><span class="w"></span>
</span><span id="line-170"><span class="w">  </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">deviceModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">ESP</span><span class="p">.</span><span class="n">getChipModel</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" Rev "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">ESP</span><span class="p">.</span><span class="n">getChipRevision</span><span class="p">());</span><span class="w"></span>
</span><span id="line-171"><span class="w">  </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">chipCores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ESP</span><span class="p">.</span><span class="n">getChipCores</span><span class="p">();</span><span class="w"></span>
</span><span id="line-172"><span class="w">  </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">firmware</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FIRMWAREVERSION</span><span class="p">;</span><span class="w"></span>
</span><span id="line-173"><span class="w">  </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">wificonnected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setupWiFi</span><span class="p">(</span><span class="n">ssid</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">password</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span><span class="w"></span>
</span><span id="line-174">
</span><span id="line-175"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">esp32Info</span><span class="p">.</span><span class="nb">setup</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-176"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Device not set up. Starting setup..."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-177"><span class="w">    </span><span class="c1">// Setup file structure</span>
</span><span id="line-178"><span class="w">    </span><span class="n">createDirectories</span><span class="p">(</span><span class="s">"/alerts"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-179"><span class="w">    </span><span class="n">createDirectories</span><span class="p">(</span><span class="s">"/packages"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-180"><span class="w">    </span><span class="n">createDirectories</span><span class="p">(</span><span class="s">"/recordings"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-181"><span class="w">    </span><span class="n">createDirectories</span><span class="p">(</span><span class="s">"/device"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-182"><span class="w">    </span><span class="n">createDirectories</span><span class="p">(</span><span class="s">"/device/logs"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-183"><span class="w">    </span><span class="n">createDirectories</span><span class="p">(</span><span class="s">"/device/users"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-184"><span class="w">    </span><span class="n">createDirectories</span><span class="p">(</span><span class="s">"/device/config"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-185"><span class="w">    </span><span class="n">createDirectories</span><span class="p">(</span><span class="s">"/device/firmware"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-186">
</span><span id="line-187"><span class="w">    </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/finsh"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-188"><span class="w">      </span><span class="n">esp32Info</span><span class="p">.</span><span class="nb">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-189"><span class="w">      </span><span class="n">saveDeviceInfoToPreferences</span><span class="p">(</span><span class="n">esp32Info</span><span class="p">);</span><span class="w"></span>
</span><span id="line-190"><span class="w">      </span><span class="n">saveUserData</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
</span><span id="line-191"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Setup Complete"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-192"><span class="w">      </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Device setup complete. Rebooting ESP32..."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-193"><span class="w">      </span><span class="nf">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span><span class="w"></span>
</span><span id="line-194"><span class="w">      </span><span class="n">rebootESP</span><span class="p">(</span><span class="s">"Device setup complete"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-195"><span class="w">    </span><span class="p">});</span><span class="w"></span>
</span><span id="line-196"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-197"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Device already set up. Starting main program..."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-198"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
</span><span id="line-199"><span class="w">      </span><span class="n">loadUserData</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"></span>
</span><span id="line-200"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-201">
</span><span id="line-202"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-203"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">esp32Info</span><span class="p">.</span><span class="nb">setup</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-204"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="n">LittleFS</span><span class="p">,</span><span class="w"> </span><span class="s">"/setup.html"</span><span class="p">,</span><span class="w"> </span><span class="s">"text/html"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-205"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-206"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="n">LittleFS</span><span class="p">,</span><span class="w"> </span><span class="s">"/index.html"</span><span class="p">,</span><span class="w"> </span><span class="s">"text/html"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-207"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-208"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-209">
</span><span id="line-210"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/style.css"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-211"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="n">LittleFS</span><span class="p">,</span><span class="w"> </span><span class="s">"/style.css"</span><span class="p">,</span><span class="w"> </span><span class="s">"text/css"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-212"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-213"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/script.js"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-214"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="n">LittleFS</span><span class="p">,</span><span class="w"> </span><span class="s">"/script.js"</span><span class="p">,</span><span class="w"> </span><span class="s">"application/javascript"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-215"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-216"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/favicon.ico"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-217"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="n">LittleFS</span><span class="p">,</span><span class="w"> </span><span class="s">"/favicon.ico"</span><span class="p">,</span><span class="w"> </span><span class="s">"application/javascript"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-218"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-219">
</span><span id="line-220"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/stream"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-221"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lastImage</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-222"><span class="w">      </span><span class="kr">String</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lastImage</span><span class="p">;</span><span class="w"></span>
</span><span id="line-223"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">);</span><span class="w"></span>
</span><span id="line-224"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-225"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"data:,"</span><span class="p">);</span><span class="w">  </span><span class="c1">// Send an empty data URL to avoid errors</span>
</span><span id="line-226"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-227"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-228">
</span><span id="line-229"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/startStream"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-230"><span class="w">    </span><span class="n">streaming</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-231"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Stream started"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-232"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-233">
</span><span id="line-234"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/stopStream"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-235"><span class="w">    </span><span class="n">streaming</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w"></span>
</span><span id="line-236"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Stream stopped"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-237"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-238">
</span><span id="line-239"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/lock"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-240"><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-241"><span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="s">"Lock"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-242"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Locked"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-243"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-244">
</span><span id="line-245"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/unlock"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-246"><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w"></span>
</span><span id="line-247"><span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="s">"Unlocked"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-248"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Unlocked"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-249"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-250">
</span><span id="line-251"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/alerts"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-252"><span class="w">    </span><span class="kr">char</span><span class="w"> </span><span class="n">path</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
</span><span id="line-253"><span class="w">    </span><span class="n">snprintf</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="kr">sizeof</span><span class="p">(</span><span class="n">path</span><span class="p">),</span><span class="w"> </span><span class="s">"/alerts/%04d-%02d.txt"</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">(),</span><span class="w"> </span><span class="n">month</span><span class="p">());</span><span class="w"></span>
</span><span id="line-254"><span class="w">    </span><span class="nf">File</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SD</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">FILE_READ</span><span class="p">);</span><span class="w"></span>
</span><span id="line-255"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-256"><span class="w">      </span><span class="kr">String</span><span class="w"> </span><span class="n">alertContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="p">.</span><span class="nf">readString</span><span class="p">();</span><span class="w"></span>
</span><span id="line-257"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="n">alertContent</span><span class="p">);</span><span class="w"></span>
</span><span id="line-258"><span class="w">      </span><span class="n">file</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
</span><span id="line-259"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-260"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Failed to read file"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-261"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-262"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-263">
</span><span id="line-264"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/list-recordings"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-265"><span class="w">    </span><span class="kr">String</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listRecordings</span><span class="p">();</span><span class="w"></span>
</span><span id="line-266"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="w"> </span><span class="n">files</span><span class="p">);</span><span class="w"></span>
</span><span id="line-267"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-268">
</span><span id="line-269"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/play-recording"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-270"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"file"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-271"><span class="w">      </span><span class="kr">String</span><span class="w"> </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"file"</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-272"><span class="w">      </span><span class="nf">File</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SD</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s">"/recordings/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span><span class="w"></span>
</span><span id="line-273"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-274"><span class="w">        </span><span class="n">AsyncWebServerResponse</span><span class="w"> </span><span class="o">*</span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">beginChunkedResponse</span><span class="p">(</span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"></span>
</span><span id="line-275"><span class="w">                                                                         </span><span class="p">[</span><span class="n">file</span><span class="p">](</span><span class="kr">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="nf">buffer</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">maxLen</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">index</span><span class="p">)</span><span class="w"> </span><span class="n">mutable</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-276"><span class="w">                                                                           </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="nf">available</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-277"><span class="w">                                                                             </span><span class="kt">size_t</span><span class="w"> </span><span class="n">bytesRead</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="nf">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">maxLen</span><span class="p">);</span><span class="w"></span>
</span><span id="line-278"><span class="w">                                                                             </span><span class="k">return</span><span class="w"> </span><span class="n">bytesRead</span><span class="p">;</span><span class="w"></span>
</span><span id="line-279"><span class="w">                                                                           </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-280"><span class="w">                                                                             </span><span class="n">file</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
</span><span id="line-281"><span class="w">                                                                             </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">  </span><span class="c1">// No more data to send</span>
</span><span id="line-282"><span class="w">                                                                           </span><span class="p">}</span><span class="w"></span>
</span><span id="line-283"><span class="w">                                                                         </span><span class="p">});</span><span class="w"></span>
</span><span id="line-284"><span class="w">        </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="p">);</span><span class="w"></span>
</span><span id="line-285"><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-286"><span class="w">        </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"File not found"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-287"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-288"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-289"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Bad Request"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-290"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-291"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-292">
</span><span id="line-293"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/download"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-294"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"file"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-295"><span class="w">      </span><span class="kr">String</span><span class="w"> </span><span class="n">filePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"file"</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-296"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">SD</span><span class="p">.</span><span class="nf">exists</span><span class="p">(</span><span class="n">filePath</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-297"><span class="w">        </span><span class="kr">String</span><span class="w"> </span><span class="n">contentType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getContentType</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span><span class="w"></span>
</span><span id="line-298"><span class="w">        </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="nf">SD</span><span class="p">,</span><span class="w"> </span><span class="n">filePath</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">contentType</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">);</span><span class="w"></span>
</span><span id="line-299"><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-300"><span class="w">        </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"File not found"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-301"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-302"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-303"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Filename not specified"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-304"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-305"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-306">
</span><span id="line-307"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/delete"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_DELETE</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-308"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"file"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-309"><span class="w">      </span><span class="kr">String</span><span class="w"> </span><span class="n">filePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"file"</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-310"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">SD</span><span class="p">.</span><span class="nf">remove</span><span class="p">(</span><span class="n">filePath</span><span class="p">.</span><span class="n">c_str</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-311"><span class="w">        </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"File deleted successfully"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-312"><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-313"><span class="w">        </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Failed to delete file"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-314"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-315"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-316"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"File not specified"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-317"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-318"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-319">
</span><span id="line-320"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/packages"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-321"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="n">LittleFS</span><span class="p">,</span><span class="w"> </span><span class="s">"/index.html"</span><span class="p">,</span><span class="w"> </span><span class="s">"text/html"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-322"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-323">
</span><span id="line-324"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/reboot"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-325"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Rebooting ESP32..."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-326"><span class="w">    </span><span class="nf">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w"></span>
</span><span id="line-327"><span class="w">    </span><span class="n">rebootESP</span><span class="p">(</span><span class="s">"Requested from the Async Web Server"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-328"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-329">
</span><span id="line-330"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/scan-networks"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-331"><span class="w">    </span><span class="kr">int</span><span class="w"> </span><span class="n">numNetworks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">WiFi</span><span class="p">.</span><span class="nf">scanNetworks</span><span class="p">();</span><span class="w"></span>
</span><span id="line-332"><span class="w">    </span><span class="kr">String</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"["</span><span class="p">;</span><span class="w"></span>
</span><span id="line-333"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">numNetworks</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-334"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">","</span><span class="p">;</span><span class="w"></span>
</span><span id="line-335"><span class="w">      </span><span class="n">response</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">"{</span><span class="se">\"</span><span class="s">ssid</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">WiFi</span><span class="p">.</span><span class="nf">SSID</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">signal_strength</span><span class="se">\"</span><span class="s">:"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="nf">WiFi</span><span class="p">.</span><span class="nf">RSSI</span><span class="p">(</span><span class="n">i</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"}"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-336"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-337"><span class="w">    </span><span class="n">response</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">"]"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-338"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">);</span><span class="w"></span>
</span><span id="line-339"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-340">
</span><span id="line-341"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/connect"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-342"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"ssid"</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"password"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-343"><span class="w">      </span><span class="kr">String</span><span class="w"> </span><span class="n">tempssid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"ssid"</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-344"><span class="w">      </span><span class="kr">String</span><span class="w"> </span><span class="n">temppassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"password"</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-345"><span class="w">      </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Connecting to SSID: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">tempssid</span><span class="p">);</span><span class="w"></span>
</span><span id="line-346">
</span><span id="line-347"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">setupWiFi</span><span class="p">(</span><span class="n">tempssid</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">temppassword</span><span class="p">.</span><span class="n">c_str</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Attempt to connect to the new Wi-Fi network</span>
</span><span id="line-348"><span class="w">        </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">wificonnected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-349"><span class="w">        </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Connected to new network"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-350"><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Failed to connect, try reconnecting to the previous network or set up an access point</span>
</span><span id="line-351"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">setupWiFi</span><span class="p">(</span><span class="n">esp32Info</span><span class="p">.</span><span class="n">ssid</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">wifi_password</span><span class="p">.</span><span class="n">c_str</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-352"><span class="w">          </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">wificonnected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w"></span>
</span><span id="line-353"><span class="w">          </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Failed to connect to new network and access point set up."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-354"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-355"><span class="w">          </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Failed to connect to new network, reconnected to previous network."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-356"><span class="w">        </span><span class="p">}</span><span class="w"></span>
</span><span id="line-357"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-358"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-359"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Missing SSID or password"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-360"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-361"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-362">
</span><span id="line-363"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/set-timezone"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-364"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"timezone"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-365"><span class="w">      </span><span class="kr">String</span><span class="w"> </span><span class="n">timezone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"timezone"</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-366"><span class="w">      </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">timezone</span><span class="p">);</span><span class="w"></span>
</span><span id="line-367"><span class="w">      </span><span class="n">setTime</span><span class="p">(</span><span class="n">timezone</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span><span class="w"></span>
</span><span id="line-368"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-369"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"gmtoffset"</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"daylightoffset"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-370"><span class="w">      </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">gmtoffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"gmtoffset"</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">().</span><span class="n">toInt</span><span class="p">();</span><span class="w"></span>
</span><span id="line-371"><span class="w">      </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">gmtoffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">gmtoffset</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3600</span><span class="p">;</span><span class="w"></span>
</span><span id="line-372"><span class="w">      </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">esp32Info</span><span class="p">.</span><span class="n">gmtoffset</span><span class="p">);</span><span class="w"></span>
</span><span id="line-373"><span class="w">      </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">daylightoffset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"daylightoffset"</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">().</span><span class="n">toInt</span><span class="p">();</span><span class="w"></span>
</span><span id="line-374"><span class="w">      </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">esp32Info</span><span class="p">.</span><span class="n">daylightoffset</span><span class="p">);</span><span class="w"></span>
</span><span id="line-375"><span class="w">      </span><span class="n">configTime</span><span class="p">(</span><span class="n">esp32Info</span><span class="p">.</span><span class="n">gmtoffset</span><span class="p">,</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">daylightoffset</span><span class="p">,</span><span class="w"> </span><span class="s">"pool.ntp.org"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-376"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-377">
</span><span id="line-378"><span class="w">    </span><span class="kt">time_t</span><span class="w"> </span><span class="n">now</span><span class="p">;</span><span class="w"></span>
</span><span id="line-379"><span class="w">    </span><span class="kr">struct</span> <span class="nc">tm</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">;</span><span class="w"></span>
</span><span id="line-380"><span class="w">    </span><span class="n">time</span><span class="p">(</span><span class="o">&amp;</span><span class="n">now</span><span class="p">);</span><span class="w"></span>
</span><span id="line-381"><span class="w">    </span><span class="n">localtime_r</span><span class="p">(</span><span class="o">&amp;</span><span class="n">now</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">timeinfo</span><span class="p">);</span><span class="w"></span>
</span><span id="line-382">
</span><span id="line-383"><span class="w">    </span><span class="kr">char</span><span class="w"> </span><span class="n">timeString</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
</span><span id="line-384"><span class="w">    </span><span class="n">strftime</span><span class="p">(</span><span class="n">timeString</span><span class="p">,</span><span class="w"> </span><span class="kr">sizeof</span><span class="p">(</span><span class="n">timeString</span><span class="p">),</span><span class="w"> </span><span class="s">"%Y-%m-%d %H:%M:%S"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">timeinfo</span><span class="p">);</span><span class="w"></span>
</span><span id="line-385"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="kr">String</span><span class="p">(</span><span class="n">timeString</span><span class="p">));</span><span class="w"></span>
</span><span id="line-386"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">timeString</span><span class="p">));</span><span class="w"></span>
</span><span id="line-387"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-388">
</span><span id="line-389"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/logs"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-390"><span class="w">    </span><span class="kr">String</span><span class="w"> </span><span class="n">logs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listFiles</span><span class="p">(</span><span class="kr">true</span><span class="p">);</span><span class="w">  </span><span class="c1">// Pass true to get HTML-formatted output</span>
</span><span id="line-391"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/html"</span><span class="p">,</span><span class="w"> </span><span class="n">logs</span><span class="p">);</span><span class="w"></span>
</span><span id="line-392"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-393">
</span><span id="line-394"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/manage-users"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-395"><span class="w">    </span><span class="n">DynamicJsonDocument</span><span class="w"> </span><span class="n">doc</span><span class="p">(</span><span class="mi">1024</span><span class="p">);</span><span class="w"></span>
</span><span id="line-396"><span class="w">    </span><span class="n">JsonArray</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">.</span><span class="n">createNestedArray</span><span class="p">(</span><span class="s">"users"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-397">
</span><span id="line-398"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-399"><span class="w">      </span><span class="n">JsonObject</span><span class="w"> </span><span class="n">userObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="n">createNestedObject</span><span class="p">();</span><span class="w"></span>
</span><span id="line-400"><span class="w">      </span><span class="n">userObj</span><span class="p">[</span><span class="s">"username"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">username</span><span class="p">;</span><span class="w"></span>
</span><span id="line-401"><span class="w">      </span><span class="n">userObj</span><span class="p">[</span><span class="s">"password"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">password</span><span class="p">;</span><span class="w"></span>
</span><span id="line-402"><span class="w">      </span><span class="n">userObj</span><span class="p">[</span><span class="s">"email"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">email</span><span class="p">;</span><span class="w"></span>
</span><span id="line-403"><span class="w">      </span><span class="n">userObj</span><span class="p">[</span><span class="s">"phonenumber"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">phonenumber</span><span class="p">;</span><span class="w"></span>
</span><span id="line-404"><span class="w">      </span><span class="n">userObj</span><span class="p">[</span><span class="s">"admin"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">admin</span><span class="p">;</span><span class="w"></span>
</span><span id="line-405"><span class="w">      </span><span class="n">userObj</span><span class="p">[</span><span class="s">"pin"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">pin</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">);</span><span class="w"></span>
</span><span id="line-406"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-407">
</span><span id="line-408"><span class="w">    </span><span class="kr">String</span><span class="w"> </span><span class="n">response</span><span class="p">;</span><span class="w"></span>
</span><span id="line-409"><span class="w">    </span><span class="n">serializeJson</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">);</span><span class="w"></span>
</span><span id="line-410"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">);</span><span class="w"></span>
</span><span id="line-411"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-412">
</span><span id="line-413"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/add-user"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_POST</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-414"><span class="w">    </span><span class="kr">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">mail</span><span class="p">,</span><span class="w"> </span><span class="kr">word</span><span class="p">,</span><span class="w"> </span><span class="n">phone</span><span class="p">,</span><span class="w"> </span><span class="n">pinStr</span><span class="p">;</span><span class="w"></span>
</span><span id="line-415"><span class="w">    </span><span class="kr">bool</span><span class="w"> </span><span class="n">admin</span><span class="p">;</span><span class="w"></span>
</span><span id="line-416"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"username"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-417"><span class="w">      </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"username"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-418"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-419"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"password"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-420"><span class="w">      </span><span class="kr">word</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"password"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-421"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-422"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"email"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-423"><span class="w">      </span><span class="n">mail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"email"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-424"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-425"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"phonenumber"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-426"><span class="w">      </span><span class="n">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"phonenumber"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-427"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-428"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"pin"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-429"><span class="w">      </span><span class="n">pinStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"pin"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-430"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-431"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"admin"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-432"><span class="w">      </span><span class="n">admin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"admin"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
</span><span id="line-433"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-434">
</span><span id="line-435"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"User Profile Updated:"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-436"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Username: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w"></span>
</span><span id="line-437"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Password: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kr">word</span><span class="p">);</span><span class="w"></span>
</span><span id="line-438"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Email: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mail</span><span class="p">);</span><span class="w"></span>
</span><span id="line-439"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Phone Number: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">phone</span><span class="p">);</span><span class="w"></span>
</span><span id="line-440"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"PIN: "</span><span class="p">);</span><span class="w"></span>
</span><span id="line-441"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">pinStr</span><span class="p">);</span><span class="w"></span>
</span><span id="line-442"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Admin: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">admin</span><span class="p">));</span><span class="w"></span>
</span><span id="line-443">
</span><span id="line-444"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-445"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">username</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">""</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-446"><span class="w">        </span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"></span>
</span><span id="line-447"><span class="w">        </span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">word</span><span class="p">;</span><span class="w"></span>
</span><span id="line-448"><span class="w">        </span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mail</span><span class="p">;</span><span class="w"></span>
</span><span id="line-449"><span class="w">        </span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">phonenumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">phone</span><span class="p">;</span><span class="w"></span>
</span><span id="line-450"><span class="w">        </span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">admin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">admin</span><span class="p">;</span><span class="w"></span>
</span><span id="line-451"><span class="w">        </span><span class="n">pinStr</span><span class="p">.</span><span class="n">toCharArray</span><span class="p">(</span><span class="n">userid</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">pin</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">);</span><span class="w"></span>
</span><span id="line-452"><span class="w">        </span><span class="n">saveUserData</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"></span>
</span><span id="line-453"><span class="w">        </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"User added successfully"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-454"><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
</span><span id="line-455"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-456"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-457"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-458">
</span><span id="line-459"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/delete-user"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_DELETE</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-460"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">-&gt;</span><span class="n">hasParam</span><span class="p">(</span><span class="s">"index"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-461"><span class="w">      </span><span class="kr">int</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">getParam</span><span class="p">(</span><span class="s">"index"</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">().</span><span class="n">toInt</span><span class="p">();</span><span class="w"></span>
</span><span id="line-462"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">index</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-463"><span class="w">        </span><span class="n">userid</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">();</span><span class="w">  </span><span class="c1">// Clear user data</span>
</span><span id="line-464"><span class="w">        </span><span class="n">saveUserData</span><span class="p">(</span><span class="n">index</span><span class="p">);</span><span class="w"></span>
</span><span id="line-465"><span class="w">        </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"User deleted successfully"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-466"><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-467"><span class="w">        </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Invalid index"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-468"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-469"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-470"><span class="w">      </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Missing index parameter"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-471"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-472"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-473">
</span><span id="line-474"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="w"></span>
</span><span id="line-475"><span class="w">    </span><span class="s">"/post"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_POST</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
</span><span id="line-476"><span class="w">    </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="kr">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">len</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-477"><span class="w">      </span><span class="c1">//Handling function implementation</span>
</span><span id="line-478"><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-479"><span class="w">        </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
</span><span id="line-480"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-481"><span class="w">    </span><span class="p">});</span><span class="w"></span>
</span><span id="line-482">
</span><span id="line-483"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="w"></span>
</span><span id="line-484"><span class="w">    </span><span class="s">"/modify-user"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_POST</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
</span><span id="line-485"><span class="w">    </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="kr">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">len</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-486"><span class="w">      </span><span class="c1">// Allocate a temporary JsonDocument</span>
</span><span id="line-487"><span class="w">      </span><span class="kr">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">capacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON_OBJECT_SIZE</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span><span class="w"></span>
</span><span id="line-488"><span class="w">      </span><span class="n">DynamicJsonDocument</span><span class="w"> </span><span class="n">doc</span><span class="p">(</span><span class="n">capacity</span><span class="p">);</span><span class="w"></span>
</span><span id="line-489">
</span><span id="line-490"><span class="w">      </span><span class="c1">// Create a static buffer to hold the incoming data</span>
</span><span id="line-491"><span class="w">      </span><span class="kr">static</span><span class="w"> </span><span class="kr">String</span><span class="w"> </span><span class="n">requestBody</span><span class="p">;</span><span class="w"></span>
</span><span id="line-492">
</span><span id="line-493"><span class="w">      </span><span class="c1">// Append the incoming data to the requestBody</span>
</span><span id="line-494"><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-495"><span class="w">        </span><span class="n">requestBody</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="kr">char</span><span class="p">)</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
</span><span id="line-496"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-497">
</span><span id="line-498"><span class="w">      </span><span class="c1">// If this is the last chunk of data</span>
</span><span id="line-499"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-500"><span class="w">        </span><span class="c1">// Log the request body</span>
</span><span id="line-501"><span class="w">        </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Request Body: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">requestBody</span><span class="p">);</span><span class="w"></span>
</span><span id="line-502">
</span><span id="line-503"><span class="w">        </span><span class="c1">// Parse JSON object</span>
</span><span id="line-504"><span class="w">        </span><span class="n">DeserializationError</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deserializeJson</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span><span class="w"> </span><span class="n">requestBody</span><span class="p">);</span><span class="w"></span>
</span><span id="line-505"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-506"><span class="w">          </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">"deserializeJson() failed: "</span><span class="p">));</span><span class="w"></span>
</span><span id="line-507"><span class="w">          </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">error</span><span class="p">.</span><span class="n">f_str</span><span class="p">());</span><span class="w"></span>
</span><span id="line-508"><span class="w">          </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Invalid JSON"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-509"><span class="w">          </span><span class="n">requestBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span><span class="w">  </span><span class="c1">// Clear the buffer</span>
</span><span id="line-510"><span class="w">          </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
</span><span id="line-511"><span class="w">        </span><span class="p">}</span><span class="w"></span>
</span><span id="line-512">
</span><span id="line-513"><span class="w">        </span><span class="c1">// Extract values</span>
</span><span id="line-514"><span class="w">        </span><span class="kr">int</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">[</span><span class="s">"index"</span><span class="p">];</span><span class="w"></span>
</span><span id="line-515"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">index</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-516"><span class="w">          </span><span class="n">userid</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">[</span><span class="s">"username"</span><span class="p">].</span><span class="n">as</span><span class="o">&lt;</span><span class="kr">String</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
</span><span id="line-517"><span class="w">          </span><span class="n">userid</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">[</span><span class="s">"password"</span><span class="p">].</span><span class="n">as</span><span class="o">&lt;</span><span class="kr">String</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
</span><span id="line-518"><span class="w">          </span><span class="n">userid</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">[</span><span class="s">"email"</span><span class="p">].</span><span class="n">as</span><span class="o">&lt;</span><span class="kr">String</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
</span><span id="line-519"><span class="w">          </span><span class="n">userid</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">phonenumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">[</span><span class="s">"phonenumber"</span><span class="p">].</span><span class="n">as</span><span class="o">&lt;</span><span class="kr">String</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
</span><span id="line-520"><span class="w">          </span><span class="n">strcpy</span><span class="p">(</span><span class="n">userid</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">pin</span><span class="p">,</span><span class="w"> </span><span class="n">doc</span><span class="p">[</span><span class="s">"pin"</span><span class="p">].</span><span class="n">as</span><span class="o">&lt;</span><span class="kr">String</span><span class="o">&gt;</span><span class="p">().</span><span class="n">c_str</span><span class="p">());</span><span class="w"></span>
</span><span id="line-521"><span class="w">          </span><span class="n">userid</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">admin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">[</span><span class="s">"admin"</span><span class="p">].</span><span class="n">as</span><span class="o">&lt;</span><span class="kr">bool</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
</span><span id="line-522"><span class="w">          </span><span class="n">saveUserData</span><span class="p">(</span><span class="n">index</span><span class="p">);</span><span class="w"></span>
</span><span id="line-523"><span class="w">          </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"User modified successfully"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-524"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-525"><span class="w">          </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">,</span><span class="w"> </span><span class="s">"Invalid index"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-526"><span class="w">        </span><span class="p">}</span><span class="w"></span>
</span><span id="line-527">
</span><span id="line-528"><span class="w">        </span><span class="c1">// Clear the buffer after processing</span>
</span><span id="line-529"><span class="w">        </span><span class="n">requestBody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span><span class="w"></span>
</span><span id="line-530"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-531"><span class="w">    </span><span class="p">});</span><span class="w"></span>
</span><span id="line-532">
</span><span id="line-533"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/device-info"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-534"><span class="w">    </span><span class="n">DynamicJsonDocument</span><span class="w"> </span><span class="n">doc</span><span class="p">(</span><span class="mi">1024</span><span class="p">);</span><span class="w"></span>
</span><span id="line-535">
</span><span id="line-536"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"deviceModel"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">deviceModel</span><span class="p">;</span><span class="w"></span>
</span><span id="line-537"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"chipID"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">chipID</span><span class="p">;</span><span class="w"></span>
</span><span id="line-538"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"chipCores"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">chipCores</span><span class="p">;</span><span class="w"></span>
</span><span id="line-539"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"MAC_Address"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">MAC_Address</span><span class="p">;</span><span class="w"></span>
</span><span id="line-540"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"firmware"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">firmware</span><span class="p">;</span><span class="w"></span>
</span><span id="line-541"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"ssid"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">ssid</span><span class="p">;</span><span class="w"></span>
</span><span id="line-542"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"wifi_password"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">wifi_password</span><span class="p">;</span><span class="w"></span>
</span><span id="line-543"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"signalstrength"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">signalstrength</span><span class="p">;</span><span class="w"></span>
</span><span id="line-544"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"hostname"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">hostname</span><span class="p">;</span><span class="w"></span>
</span><span id="line-545"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"IP"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">IP</span><span class="p">.</span><span class="n">toString</span><span class="p">();</span><span class="w"></span>
</span><span id="line-546"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"wificonnected"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">wificonnected</span><span class="p">;</span><span class="w"></span>
</span><span id="line-547"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"uptime"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">millis</span><span class="p">();</span><span class="w"></span>
</span><span id="line-548"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"gmtoffset"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">gmtoffset</span><span class="p">;</span><span class="w"></span>
</span><span id="line-549"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"daylightoffset"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">daylightoffset</span><span class="p">;</span><span class="w"></span>
</span><span id="line-550"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"interval"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">interval</span><span class="p">;</span><span class="w"></span>
</span><span id="line-551"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"</span><span class="nb">setup</span><span class="s">"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="nb">setup</span><span class="p">;</span><span class="w"></span>
</span><span id="line-552"><span class="w">    </span><span class="n">doc</span><span class="p">[</span><span class="s">"time"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getLocalTimeStr</span><span class="p">();</span><span class="w"></span>
</span><span id="line-553">
</span><span id="line-554"><span class="w">    </span><span class="kr">String</span><span class="w"> </span><span class="n">response</span><span class="p">;</span><span class="w"></span>
</span><span id="line-555"><span class="w">    </span><span class="n">serializeJson</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">);</span><span class="w"></span>
</span><span id="line-556"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">);</span><span class="w"></span>
</span><span id="line-557"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-558">
</span><span id="line-559"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/module-status"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-560"><span class="w">    </span><span class="n">DynamicJsonDocument</span><span class="w"> </span><span class="n">doc</span><span class="p">(</span><span class="mi">1024</span><span class="p">);</span><span class="w">  </span><span class="c1">// Create a JSON document with sufficient memory</span>
</span><span id="line-561">
</span><span id="line-562"><span class="w">    </span><span class="n">JsonObject</span><span class="w"> </span><span class="n">sdCard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">.</span><span class="n">createNestedObject</span><span class="p">(</span><span class="s">"sdCard"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-563"><span class="w">    </span><span class="n">sdCard</span><span class="p">[</span><span class="s">"module"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"SD Card"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-564"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">SD</span><span class="p">.</span><span class="nf">begin</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-565"><span class="w">      </span><span class="n">sdCard</span><span class="p">[</span><span class="s">"status"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Connected"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-566"><span class="w">      </span><span class="n">sdCard</span><span class="p">[</span><span class="s">"</span><span class="nf">ready</span><span class="s">"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-567"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-568"><span class="w">      </span><span class="n">sdCard</span><span class="p">[</span><span class="s">"status"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Disconnected"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-569"><span class="w">      </span><span class="n">sdCard</span><span class="p">[</span><span class="s">"</span><span class="nf">ready</span><span class="s">"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w"></span>
</span><span id="line-570"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-571">
</span><span id="line-572"><span class="w">    </span><span class="c1">// AI Sensor status (pseudo-code)</span>
</span><span id="line-573"><span class="w">    </span><span class="n">JsonObject</span><span class="w"> </span><span class="n">aiSensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">.</span><span class="n">createNestedObject</span><span class="p">(</span><span class="s">"aiSensor"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-574"><span class="w">    </span><span class="n">aiSensor</span><span class="p">[</span><span class="s">"module"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"AI Sensor"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-575"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">AI</span><span class="p">.</span><span class="n">invoke</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="kr">false</span><span class="p">,</span><span class="w"> </span><span class="kr">false</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-576"><span class="w">      </span><span class="n">aiSensor</span><span class="p">[</span><span class="s">"status"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Connected"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-577"><span class="w">      </span><span class="n">aiSensor</span><span class="p">[</span><span class="s">"</span><span class="nf">ready</span><span class="s">"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-578"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-579"><span class="w">      </span><span class="n">aiSensor</span><span class="p">[</span><span class="s">"status"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Disconnected"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-580"><span class="w">      </span><span class="n">aiSensor</span><span class="p">[</span><span class="s">"</span><span class="nf">ready</span><span class="s">"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w"></span>
</span><span id="line-581"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-582">
</span><span id="line-583"><span class="w">    </span><span class="c1">// nRF45 status</span>
</span><span id="line-584"><span class="w">    </span><span class="n">JsonObject</span><span class="w"> </span><span class="n">nrf45</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">.</span><span class="n">createNestedObject</span><span class="p">(</span><span class="s">"nrf45"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-585"><span class="w">    </span><span class="n">nrf45</span><span class="p">[</span><span class="s">"module"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"nRF45"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-586"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kr">false</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-587"><span class="w">      </span><span class="n">nrf45</span><span class="p">[</span><span class="s">"status"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Connected"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-588"><span class="w">      </span><span class="n">nrf45</span><span class="p">[</span><span class="s">"</span><span class="nf">ready</span><span class="s">"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-589"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-590"><span class="w">      </span><span class="n">nrf45</span><span class="p">[</span><span class="s">"status"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Disconnected"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-591"><span class="w">      </span><span class="n">nrf45</span><span class="p">[</span><span class="s">"</span><span class="nf">ready</span><span class="s">"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w"></span>
</span><span id="line-592"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-593">
</span><span id="line-594"><span class="w">    </span><span class="c1">// Unihiker status</span>
</span><span id="line-595"><span class="w">    </span><span class="n">JsonObject</span><span class="w"> </span><span class="n">unihiker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="p">.</span><span class="n">createNestedObject</span><span class="p">(</span><span class="s">"unihiker"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-596"><span class="w">    </span><span class="n">unihiker</span><span class="p">[</span><span class="s">"module"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Unihiker"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-597"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kr">false</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">//Need to update</span>
</span><span id="line-598"><span class="w">      </span><span class="n">unihiker</span><span class="p">[</span><span class="s">"status"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Connected"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-599"><span class="w">      </span><span class="n">unihiker</span><span class="p">[</span><span class="s">"</span><span class="nf">ready</span><span class="s">"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-600"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-601"><span class="w">      </span><span class="n">unihiker</span><span class="p">[</span><span class="s">"status"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Disconnected"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-602"><span class="w">      </span><span class="n">unihiker</span><span class="p">[</span><span class="s">"</span><span class="nf">ready</span><span class="s">"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w"></span>
</span><span id="line-603"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-604">
</span><span id="line-605"><span class="w">    </span><span class="kr">String</span><span class="w"> </span><span class="n">json</span><span class="p">;</span><span class="w"></span>
</span><span id="line-606"><span class="w">    </span><span class="n">serializeJson</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span><span class="w"> </span><span class="n">json</span><span class="p">);</span><span class="w"></span>
</span><span id="line-607"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"application/json"</span><span class="p">,</span><span class="w"> </span><span class="n">json</span><span class="p">);</span><span class="w"></span>
</span><span id="line-608"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-609">
</span><span id="line-610"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/resestxyz"</span><span class="p">,</span><span class="w"> </span><span class="n">HTTP_GET</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">AsyncWebServerRequest</span><span class="w"> </span><span class="o">*</span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-611"><span class="w">    </span><span class="c1">//Check user name and password and admin status</span>
</span><span id="line-612"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kr">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-613"><span class="w">      </span><span class="c1">//clear SD card.</span>
</span><span id="line-614"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">SD</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">SD_CS_PIN</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-615"><span class="w">        </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"SD card initialized to be formated"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-616"><span class="w">        </span><span class="nf">File</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SD</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s">"/"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-617"><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kr">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-618"><span class="w">          </span><span class="nf">File</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">root</span><span class="p">.</span><span class="nf">openNextFile</span><span class="p">();</span><span class="w"></span>
</span><span id="line-619"><span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-620"><span class="w">            </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
</span><span id="line-621"><span class="w">          </span><span class="p">}</span><span class="w"></span>
</span><span id="line-622"><span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="nf">isDirectory</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-623"><span class="w">            </span><span class="n">entry</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
</span><span id="line-624"><span class="w">            </span><span class="k">continue</span><span class="p">;</span><span class="w"></span>
</span><span id="line-625"><span class="w">          </span><span class="p">}</span><span class="w"></span>
</span><span id="line-626"><span class="w">          </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"Deleting file: "</span><span class="p">);</span><span class="w"></span>
</span><span id="line-627"><span class="w">          </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="n">name</span><span class="p">());</span><span class="w"></span>
</span><span id="line-628"><span class="w">          </span><span class="nf">SD</span><span class="p">.</span><span class="nf">remove</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="n">name</span><span class="p">());</span><span class="w"></span>
</span><span id="line-629"><span class="w">          </span><span class="n">entry</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
</span><span id="line-630"><span class="w">        </span><span class="p">}</span><span class="w"></span>
</span><span id="line-631"><span class="w">        </span><span class="n">root</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
</span><span id="line-632"><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-633"><span class="w">        </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Failed to initialize SD card"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-634"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-635"><span class="w">      </span><span class="c1">//clear preferences</span>
</span><span id="line-636"><span class="w">      </span><span class="n">clearAllPreferences</span><span class="p">();</span><span class="w"></span>
</span><span id="line-637"><span class="w">      </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Preferences cleared. Rebooting ESP32..."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-638"><span class="w">      </span><span class="nf">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span><span class="w"></span>
</span><span id="line-639"><span class="w">      </span><span class="n">rebootESP</span><span class="p">(</span><span class="s">"Reset Requested"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-640"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-641">
</span><span id="line-642"><span class="w">    </span><span class="n">request</span><span class="o">-&gt;</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">"text/html"</span><span class="p">,</span><span class="w"> </span><span class="s">"Reset Requested"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-643"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-644">
</span><span id="line-645"><span class="w">  </span><span class="n">ElegantOTA</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="o">&amp;</span><span class="n">server</span><span class="p">);</span><span class="w"></span>
</span><span id="line-646"><span class="w">  </span><span class="n">WebSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="o">&amp;</span><span class="n">server</span><span class="p">);</span><span class="w"></span>
</span><span id="line-647"><span class="w">  </span><span class="n">WebSerial</span><span class="p">.</span><span class="n">onMessage</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](</span><span class="kr">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">len</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-648"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">"Received %lu bytes from WebSerial: "</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span><span class="w"></span>
</span><span id="line-649"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span><span class="w"></span>
</span><span id="line-650"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">();</span><span class="w"></span>
</span><span id="line-651"><span class="w">    </span><span class="n">WebSerial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Received Data..."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-652"><span class="w">    </span><span class="kr">String</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span><span class="w"></span>
</span><span id="line-653"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-654"><span class="w">      </span><span class="n">d</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="kr">char</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
</span><span id="line-655"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-656"><span class="w">    </span><span class="n">WebSerial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">d</span><span class="p">);</span><span class="w"></span>
</span><span id="line-657"><span class="w">  </span><span class="p">});</span><span class="w"></span>
</span><span id="line-658"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="n">onRequestBody</span><span class="p">(</span><span class="n">handleBody</span><span class="p">);</span><span class="w"></span>
</span><span id="line-659"><span class="w">  </span><span class="n">server</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span><span class="w"></span>
</span><span id="line-660"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"Web Server Ready! Use 'http://"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-661"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">esp32Info</span><span class="p">.</span><span class="n">IP</span><span class="p">);</span><span class="w"></span>
</span><span id="line-662"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"' to connect"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-663"><span class="p">}</span><span class="w"></span>
</span><span id="line-664">
</span><span id="line-665"><span class="kr">void</span><span class="w"> </span><span class="nb">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-666"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">streaming</span><span class="p">)</span><span class="w">  </span><span class="c1">// Streaming imgages</span>
</span><span id="line-667"><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">streaming</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-668"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">AI</span><span class="p">.</span><span class="n">invoke</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="kr">false</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-669"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">AI</span><span class="p">.</span><span class="n">last_image</span><span class="p">().</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-670"><span class="w">          </span><span class="n">lastImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AI</span><span class="p">.</span><span class="n">last_image</span><span class="p">();</span><span class="w"></span>
</span><span id="line-671"><span class="w">          </span><span class="c1">// Serial.println("Captured Image: " + lastImage);</span>
</span><span id="line-672"><span class="w">        </span><span class="p">}</span><span class="w"></span>
</span><span id="line-673"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-674"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-675"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">AI</span><span class="p">.</span><span class="n">invoke</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// if sensor sees person then take snapshots for 30 seconds as according to recordGrove</span>
</span><span id="line-676"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">AI</span><span class="p">.</span><span class="n">boxes</span><span class="p">().</span><span class="nf">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
</span><span id="line-677"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">AI</span><span class="p">.</span><span class="n">boxes</span><span class="p">()[</span><span class="n">i</span><span class="p">].</span><span class="n">score</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">70</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-678"><span class="w">        </span><span class="n">alert</span><span class="p">(</span><span class="s">"Person detected. 30sec recording to begin."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-679"><span class="w">        </span><span class="n">recordGrove</span><span class="p">();</span><span class="w"></span>
</span><span id="line-680"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-681"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-682"><span class="w">  </span><span class="n">ElegantOTA</span><span class="p">.</span><span class="nb">loop</span><span class="p">();</span><span class="w"></span>
</span><span id="line-683"><span class="w">  </span><span class="n">WebSerial</span><span class="p">.</span><span class="nb">loop</span><span class="p">();</span><span class="w"></span>
</span><span id="line-684"><span class="p">}</span><span class="w"></span>
</span><span id="line-685">
</span><span id="line-686"><span class="kr">void</span><span class="w"> </span><span class="nf">rebootESP</span><span class="p">(</span><span class="kr">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-687"><span class="w">  </span><span class="n">logSD</span><span class="p">(</span><span class="s">"Rebooting ESP32: "</span><span class="p">);</span><span class="w"></span>
</span><span id="line-688"><span class="w">  </span><span class="n">logSD</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span><span class="w"></span>
</span><span id="line-689"><span class="w">  </span><span class="n">ESP</span><span class="p">.</span><span class="n">restart</span><span class="p">();</span><span class="w"></span>
</span><span id="line-690"><span class="p">}</span><span class="w"></span>
</span><span id="line-691">
</span><span id="line-692"><span class="kr">void</span><span class="w"> </span><span class="nf">listDirContents</span><span class="p">(</span><span class="nf">File</span><span class="w"> </span><span class="n">dir</span><span class="p">,</span><span class="w"> </span><span class="kr">String</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="kr">String</span><span class="w"> </span><span class="o">&amp;</span><span class="n">returnText</span><span class="p">,</span><span class="w"> </span><span class="kr">bool</span><span class="w"> </span><span class="n">ishtml</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-693"><span class="w">  </span><span class="nf">File</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dir</span><span class="p">.</span><span class="nf">openNextFile</span><span class="p">();</span><span class="w"></span>
</span><span id="line-694"><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-695"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="nf">isDirectory</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-696"><span class="w">      </span><span class="kr">String</span><span class="w"> </span><span class="n">dirName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">name</span><span class="p">());</span><span class="w"></span>
</span><span id="line-697"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ishtml</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-698"><span class="w">        </span><span class="n">returnText</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">"&lt;tr&gt;&lt;td&gt;&lt;b&gt;Directory:&lt;/b&gt; "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dirName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-699"><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-700"><span class="w">        </span><span class="n">returnText</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">"Directory: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dirName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-701"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-702"><span class="w">      </span><span class="n">listDirContents</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">dirName</span><span class="p">,</span><span class="w"> </span><span class="n">returnText</span><span class="p">,</span><span class="w"> </span><span class="n">ishtml</span><span class="p">);</span><span class="w">  </span><span class="c1">// Recursively list the contents of the directory</span>
</span><span id="line-703"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-704"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ishtml</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-705"><span class="w">        </span><span class="n">returnText</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">"&lt;tr align='left'&gt;&lt;td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">name</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"&lt;/td&gt;&lt;td&gt;"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">humanReadableSize</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="nf">size</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"&lt;/td&gt;"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-706"><span class="w">        </span><span class="n">returnText</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">"&lt;td&gt;&lt;button onclick=</span><span class="se">\"</span><span class="s">downloadDeleteButton('"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">name</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"', 'download')</span><span class="se">\"</span><span class="s">&gt;Download&lt;/button&gt;&lt;/td&gt;"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-707"><span class="w">        </span><span class="n">returnText</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">"&lt;td&gt;&lt;button onclick=</span><span class="se">\"</span><span class="s">downloadDeleteButton('"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">name</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"', 'delete')</span><span class="se">\"</span><span class="s">&gt;Delete&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-708"><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-709"><span class="w">        </span><span class="n">returnText</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">"File: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">name</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" Size: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">humanReadableSize</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="nf">size</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-710"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-711"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-712"><span class="w">    </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dir</span><span class="p">.</span><span class="nf">openNextFile</span><span class="p">();</span><span class="w"></span>
</span><span id="line-713"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-714"><span class="p">}</span><span class="w"></span>
</span><span id="line-715">
</span><span id="line-716"><span class="c1">// Function to list all files and directories on the SD card</span>
</span><span id="line-717"><span class="kr">String</span><span class="w"> </span><span class="nf">listFiles</span><span class="p">(</span><span class="kr">bool</span><span class="w"> </span><span class="n">ishtml</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-718"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">returnText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span><span class="w"></span>
</span><span id="line-719"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Listing files stored on SD card"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-720">
</span><span id="line-721"><span class="w">  </span><span class="nf">File</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SD</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s">"/"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-722"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ishtml</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-723"><span class="w">    </span><span class="n">returnText</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">"&lt;table&gt;&lt;tr&gt;&lt;th align='left'&gt;Name&lt;/th&gt;&lt;th align='left'&gt;Size&lt;/th&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;&lt;/th&gt;&lt;/tr&gt;"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-724"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-725"><span class="w">  </span><span class="n">listDirContents</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="w"> </span><span class="s">""</span><span class="p">,</span><span class="w"> </span><span class="n">returnText</span><span class="p">,</span><span class="w"> </span><span class="n">ishtml</span><span class="p">);</span><span class="w">  </span><span class="c1">// Call the recursive function</span>
</span><span id="line-726"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ishtml</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-727"><span class="w">    </span><span class="n">returnText</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">"&lt;/table&gt;"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-728"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">returnText</span><span class="p">);</span><span class="w"></span>
</span><span id="line-729"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-730"><span class="w">  </span><span class="n">root</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
</span><span id="line-731">
</span><span id="line-732"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">returnText</span><span class="p">;</span><span class="w"></span>
</span><span id="line-733"><span class="p">}</span><span class="w"></span>
</span><span id="line-734">
</span><span id="line-735"><span class="kr">String</span><span class="w"> </span><span class="nf">humanReadableSize</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">bytes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Make size of files human readable</span>
</span><span id="line-736"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bytes</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1024</span><span class="p">)</span><span class="w"></span>
</span><span id="line-737"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">bytes</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" B"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-738"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bytes</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">))</span><span class="w"></span>
</span><span id="line-739"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">bytes</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1024.0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" KB"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-740"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bytes</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">))</span><span class="w"></span>
</span><span id="line-741"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">bytes</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1024.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1024.0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" MB"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-742"><span class="w">  </span><span class="k">else</span><span class="w"></span>
</span><span id="line-743"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">bytes</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1024.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1024.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1024.0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" GB"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-744"><span class="p">}</span><span class="w"></span>
</span><span id="line-745">
</span><span id="line-746"><span class="kr">String</span><span class="w"> </span><span class="nf">getContentType</span><span class="p">(</span><span class="kr">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// need to remove if not using</span>
</span><span id="line-747"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".htm"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-748"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"text/html"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-749"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".html"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-750"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"text/html"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-751"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".css"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-752"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"text/css"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-753"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".js"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-754"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"application/javascript"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-755"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".png"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-756"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"image/png"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-757"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".gif"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-758"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"image/gif"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-759"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".jpg"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-760"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"image/jpeg"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-761"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".ico"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-762"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"image/x-icon"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-763"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".xml"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-764"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"text/xml"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-765"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".pdf"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-766"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"application/pdf"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-767"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".zip"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-768"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"application/zip"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-769"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".gz"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-770"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"application/x-gzip"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-771"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filename</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s">".txt"</span><span class="p">))</span><span class="w"></span>
</span><span id="line-772"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">"text/plain"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-773"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s">"application/octet-stream"</span><span class="p">;</span><span class="w">  </span><span class="c1">// Default binary type</span>
</span><span id="line-774"><span class="p">}</span><span class="w"></span>
</span><span id="line-775">
</span><span id="line-776"><span class="kr">bool</span><span class="w"> </span><span class="nf">initSDCard</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-777"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nf">SD</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">SD_CS_PIN</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-778"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Card Mount Failed"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-779"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
</span><span id="line-780"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-781"><span class="w">  </span><span class="kr">uint8_t</span><span class="w"> </span><span class="n">cardType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SD</span><span class="p">.</span><span class="n">cardType</span><span class="p">();</span><span class="w"></span>
</span><span id="line-782"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cardType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">CARD_NONE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-783"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"No SD card attached"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-784"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
</span><span id="line-785"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-786"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"SD Card Type: "</span><span class="p">);</span><span class="w"></span>
</span><span id="line-787"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cardType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">CARD_MMC</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-788"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"MMC"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-789"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cardType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">CARD_SD</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-790"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"SDSC"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-791"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cardType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">CARD_SDHC</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-792"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"SDHC"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-793"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-794"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"UNKNOWN"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-795"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-796"><span class="w">  </span><span class="kr">uint64_t</span><span class="w"> </span><span class="n">cardSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SD</span><span class="p">.</span><span class="n">cardSize</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span><span class="w"></span>
</span><span id="line-797"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">"SD Card Size: %lluMB</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">cardSize</span><span class="p">);</span><span class="w"></span>
</span><span id="line-798"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
</span><span id="line-799"><span class="p">}</span><span class="w"></span>
</span><span id="line-800">
</span><span id="line-801"><span class="kr">void</span><span class="w"> </span><span class="nf">writeFile</span><span class="p">(</span><span class="n">fs</span><span class="o">::</span><span class="n">FS</span><span class="w"> </span><span class="o">&amp;</span><span class="n">fs</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-802"><span class="w">  </span><span class="nf">File</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">FILE_WRITE</span><span class="p">);</span><span class="w"></span>
</span><span id="line-803"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-804"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">"Failed to open file for writing: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">);</span><span class="w"></span>
</span><span id="line-805"><span class="w">    </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
</span><span id="line-806"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-807"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">message</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-808"><span class="w">    </span><span class="c1">// Serial.println("File written");</span>
</span><span id="line-809"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-810"><span class="w">    </span><span class="c1">// Serial.println("Write failed");</span>
</span><span id="line-811"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-812"><span class="w">  </span><span class="n">file</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
</span><span id="line-813"><span class="p">}</span><span class="w"></span>
</span><span id="line-814">
</span><span id="line-815"><span class="kr">void</span><span class="w"> </span><span class="nf">appendFile</span><span class="p">(</span><span class="n">fs</span><span class="o">::</span><span class="n">FS</span><span class="w"> </span><span class="o">&amp;</span><span class="n">fs</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-816"><span class="w">  </span><span class="nf">File</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">FILE_APPEND</span><span class="p">);</span><span class="w"></span>
</span><span id="line-817"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-818"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">"Failed to open file for appedning: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">);</span><span class="w"></span>
</span><span id="line-819"><span class="w">    </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
</span><span id="line-820"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-821"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">message</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-822"><span class="w">    </span><span class="c1">// Serial.println("Message appended");</span>
</span><span id="line-823"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-824"><span class="w">    </span><span class="c1">// Serial.println("Append failed");</span>
</span><span id="line-825"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-826"><span class="w">  </span><span class="n">file</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
</span><span id="line-827"><span class="p">}</span><span class="w"></span>
</span><span id="line-828">
</span><span id="line-829"><span class="kr">void</span><span class="w"> </span><span class="nf">recordGrove</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-830"><span class="w">  </span><span class="n">previousMillis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">millis</span><span class="p">();</span><span class="w"></span>
</span><span id="line-831"><span class="w">  </span><span class="kr">unsigned</span><span class="w"> </span><span class="kr">long</span><span class="w"> </span><span class="n">currentMillis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">previousMillis</span><span class="p">;</span><span class="w"></span>
</span><span id="line-832"><span class="w">  </span><span class="kr">struct</span> <span class="nc">tm</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">;</span><span class="w"></span>
</span><span id="line-833"><span class="w">  </span><span class="kr">char</span><span class="w"> </span><span class="n">filename</span><span class="p">[</span><span class="mi">40</span><span class="p">];</span><span class="w"></span>
</span><span id="line-834"><span class="w">  </span><span class="kr">char</span><span class="w"> </span><span class="n">timestamp</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span><span class="w"></span>
</span><span id="line-835"><span class="w">  </span><span class="n">getLocalTime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">timeinfo</span><span class="p">);</span><span class="w"></span>
</span><span id="line-836"><span class="w">  </span><span class="n">snprintf</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="kr">sizeof</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span><span class="w"> </span><span class="s">"/recordings/%04d-%02d-%02d-%02d-%02d-%02d.txt"</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_year</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1900</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_mon</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_mday</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_hour</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_min</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_sec</span><span class="p">);</span><span class="w"></span>
</span><span id="line-837"><span class="w">  </span><span class="n">writeFile</span><span class="p">(</span><span class="nf">SD</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="s">"Initial log</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-838"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">dataToAppend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span><span class="w">  </span><span class="c1">// Initialize an empty string to accumulate data</span>
</span><span id="line-839">
</span><span id="line-840"><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nf">millis</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">previousMillis</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">interval</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-841"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">AI</span><span class="p">.</span><span class="n">invoke</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="kr">false</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">))</span><span class="w"></span>
</span><span id="line-842"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">AI</span><span class="p">.</span><span class="n">last_image</span><span class="p">().</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-843"><span class="w">        </span><span class="n">dataToAppend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AI</span><span class="p">.</span><span class="n">last_image</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span><span class="w">  </span><span class="c1">// Accumulate image data</span>
</span><span id="line-844"><span class="w">        </span><span class="n">lastImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataToAppend</span><span class="p">;</span><span class="w"></span>
</span><span id="line-845"><span class="w">        </span><span class="n">appendFile</span><span class="p">(</span><span class="nf">SD</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">dataToAppend</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span><span class="w"></span>
</span><span id="line-846"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-847"><span class="w">    </span><span class="n">currentMillis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">millis</span><span class="p">();</span><span class="w"></span>
</span><span id="line-848"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-849"><span class="p">}</span><span class="w"></span>
</span><span id="line-850">
</span><span id="line-851"><span class="kr">void</span><span class="w"> </span><span class="nf">alert</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Function to append a message to an alert file</span>
</span><span id="line-852"><span class="w">  </span><span class="kr">char</span><span class="w"> </span><span class="n">path</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
</span><span id="line-853"><span class="w">  </span><span class="n">snprintf</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="kr">sizeof</span><span class="p">(</span><span class="n">path</span><span class="p">),</span><span class="w"> </span><span class="s">"/alerts/%04d-%02d.txt"</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">(),</span><span class="w"> </span><span class="n">month</span><span class="p">());</span><span class="w"></span>
</span><span id="line-854"><span class="w">  </span><span class="n">createDirectories</span><span class="p">(</span><span class="n">path</span><span class="p">);</span><span class="w"></span>
</span><span id="line-855"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">"Appending to alert file: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">);</span><span class="w"></span>
</span><span id="line-856">
</span><span id="line-857"><span class="w">  </span><span class="nf">File</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SD</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">FILE_APPEND</span><span class="p">);</span><span class="w"></span>
</span><span id="line-858"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-859"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Failed to open alert file for appending"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-860"><span class="w">    </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
</span><span id="line-861"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-862"><span class="w">  </span><span class="kr">char</span><span class="w"> </span><span class="n">timestamp</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span><span class="w"></span>
</span><span id="line-863"><span class="w">  </span><span class="kr">struct</span> <span class="nc">tm</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">;</span><span class="w"></span>
</span><span id="line-864"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">getLocalTime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">timeinfo</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-865"><span class="w">    </span><span class="n">snprintf</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span><span class="w"> </span><span class="kr">sizeof</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span><span class="w"> </span><span class="s">"%04d-%02d-%02d %02d:%02d:%02d "</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_year</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1900</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_mon</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_mday</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_hour</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_min</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_sec</span><span class="p">);</span><span class="w"></span>
</span><span id="line-866"><span class="w">    </span><span class="n">file</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">timestamp</span><span class="p">);</span><span class="w"></span>
</span><span id="line-867"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-868">
</span><span id="line-869"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">messageWithNewline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-870"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">messageWithNewline</span><span class="p">))</span><span class="w"></span>
</span><span id="line-871"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Alert message appended"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-872"><span class="w">  </span><span class="k">else</span><span class="w"></span>
</span><span id="line-873"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Append to alert file failed"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-874"><span class="w">  </span><span class="n">file</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
</span><span id="line-875"><span class="p">}</span><span class="w"></span>
</span><span id="line-876">
</span><span id="line-877"><span class="kr">void</span><span class="w"> </span><span class="nf">logSD</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="kr">bool</span><span class="w"> </span><span class="n">serial</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Function to append a message to a log file</span>
</span><span id="line-878"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">serial</span><span class="p">)</span><span class="w"></span>
</span><span id="line-879"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">message</span><span class="p">);</span><span class="w"></span>
</span><span id="line-880"><span class="w">  </span><span class="kr">char</span><span class="w"> </span><span class="n">path</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
</span><span id="line-881"><span class="w">  </span><span class="n">snprintf</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="kr">sizeof</span><span class="p">(</span><span class="n">path</span><span class="p">),</span><span class="w"> </span><span class="s">"/device/logs/%04d-%02d.txt"</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">(),</span><span class="w"> </span><span class="n">month</span><span class="p">());</span><span class="w"></span>
</span><span id="line-882"><span class="w">  </span><span class="n">createDirectories</span><span class="p">(</span><span class="n">path</span><span class="p">);</span><span class="w"></span>
</span><span id="line-883"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">"Appending to log file: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">);</span><span class="w"></span>
</span><span id="line-884">
</span><span id="line-885"><span class="w">  </span><span class="nf">File</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SD</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">FILE_APPEND</span><span class="p">);</span><span class="w"></span>
</span><span id="line-886"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-887"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Failed to open log file for appending"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-888"><span class="w">    </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
</span><span id="line-889"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-890">
</span><span id="line-891"><span class="w">  </span><span class="kr">char</span><span class="w"> </span><span class="n">timestamp</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span><span class="w"></span>
</span><span id="line-892"><span class="w">  </span><span class="kr">struct</span> <span class="nc">tm</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">;</span><span class="w"></span>
</span><span id="line-893"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">getLocalTime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">timeinfo</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-894"><span class="w">    </span><span class="n">snprintf</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span><span class="w"> </span><span class="kr">sizeof</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span><span class="w"> </span><span class="s">"%04d-%02d-%02d %02d:%02d:%02d "</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_year</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1900</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_mon</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_mday</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_hour</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_min</span><span class="p">,</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_sec</span><span class="p">);</span><span class="w"></span>
</span><span id="line-895"><span class="w">    </span><span class="n">file</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">timestamp</span><span class="p">);</span><span class="w"></span>
</span><span id="line-896"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-897">
</span><span id="line-898"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">messageWithNewline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span><span class="w"></span>
</span><span id="line-899"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">messageWithNewline</span><span class="p">))</span><span class="w"></span>
</span><span id="line-900"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Log message appended"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-901"><span class="w">  </span><span class="k">else</span><span class="w"></span>
</span><span id="line-902"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Append to log file failed"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-903"><span class="w">  </span><span class="n">file</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
</span><span id="line-904"><span class="p">}</span><span class="w"></span>
</span><span id="line-905">
</span><span id="line-906"><span class="kr">int</span><span class="w"> </span><span class="nf">year</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Helper functions to get the current year</span>
</span><span id="line-907"><span class="w">  </span><span class="kr">struct</span> <span class="nc">tm</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">;</span><span class="w"></span>
</span><span id="line-908"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">getLocalTime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">timeinfo</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-909"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_year</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1900</span><span class="p">;</span><span class="w"></span>
</span><span id="line-910"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-911"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">1970</span><span class="p">;</span><span class="w">  </span><span class="c1">// Default year if time is not available</span>
</span><span id="line-912"><span class="p">}</span><span class="w"></span>
</span><span id="line-913">
</span><span id="line-914"><span class="kr">int</span><span class="w"> </span><span class="nf">month</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Helper functions to get the current month</span>
</span><span id="line-915"><span class="w">  </span><span class="kr">struct</span> <span class="nc">tm</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">;</span><span class="w"></span>
</span><span id="line-916"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">getLocalTime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">timeinfo</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-917"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">.</span><span class="n">tm_mon</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
</span><span id="line-918"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-919"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Default month if time is not available</span>
</span><span id="line-920"><span class="p">}</span><span class="w"></span>
</span><span id="line-921">
</span><span id="line-922"><span class="kr">String</span><span class="w"> </span><span class="nf">getLocalTimeStr</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Helper function to get the current time as a string</span>
</span><span id="line-923"><span class="w">  </span><span class="kr">struct</span> <span class="nc">tm</span><span class="w"> </span><span class="n">timeinfo</span><span class="p">;</span><span class="w"></span>
</span><span id="line-924"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">getLocalTime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">timeinfo</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-925"><span class="w">    </span><span class="kr">char</span><span class="w"> </span><span class="n">timeString</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span><span class="w"></span>
</span><span id="line-926"><span class="w">    </span><span class="n">strftime</span><span class="p">(</span><span class="n">timeString</span><span class="p">,</span><span class="w"> </span><span class="kr">sizeof</span><span class="p">(</span><span class="n">timeString</span><span class="p">),</span><span class="w"> </span><span class="s">"%Y-%m-%d %H:%M:%S"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">timeinfo</span><span class="p">);</span><span class="w"></span>
</span><span id="line-927"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kr">String</span><span class="p">(</span><span class="n">timeString</span><span class="p">);</span><span class="w"></span>
</span><span id="line-928"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-929"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s">"1970-01-01 00:00:00"</span><span class="p">;</span><span class="w">  </span><span class="c1">// Default time if time is not available</span>
</span><span id="line-930"><span class="p">}</span><span class="w"></span>
</span><span id="line-931">
</span><span id="line-932"><span class="kr">void</span><span class="w"> </span><span class="nf">createDirectories</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Function to create directories if they do not exist</span>
</span><span id="line-933"><span class="w">  </span><span class="kr">char</span><span class="w"> </span><span class="n">temp</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
</span><span id="line-934"><span class="w">  </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span><span class="w"></span>
</span><span id="line-935"><span class="w">  </span><span class="n">snprintf</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="w"> </span><span class="kr">sizeof</span><span class="p">(</span><span class="n">temp</span><span class="p">),</span><span class="w"> </span><span class="s">"%s"</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">);</span><span class="w"></span>
</span><span id="line-936">
</span><span id="line-937"><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">*</span><span class="n">pos</span><span class="p">;</span><span class="w"> </span><span class="n">pos</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-938"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">'/'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-939"><span class="w">      </span><span class="o">*</span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">'\0'</span><span class="p">;</span><span class="w"></span>
</span><span id="line-940"><span class="w">      </span><span class="nf">SD</span><span class="p">.</span><span class="nf">mkdir</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span><span class="w"></span>
</span><span id="line-941"><span class="w">      </span><span class="o">*</span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">'/'</span><span class="p">;</span><span class="w"></span>
</span><span id="line-942"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-943"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-944"><span class="p">}</span><span class="w"></span>
</span><span id="line-945">
</span><span id="line-946"><span class="kr">void</span><span class="w"> </span><span class="nf">setTime</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"America/Chicago"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-947"><span class="w">  </span><span class="n">setenv</span><span class="p">(</span><span class="s">"TZ"</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
</span><span id="line-948"><span class="w">  </span><span class="n">tzset</span><span class="p">();</span><span class="w"></span>
</span><span id="line-949"><span class="p">}</span><span class="w"></span>
</span><span id="line-950">
</span><span id="line-951"><span class="kr">String</span><span class="w"> </span><span class="nf">getInterfaceMacAddress</span><span class="p">(</span><span class="n">esp_mac_type_t</span><span class="w"> </span><span class="n">interface</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-952"><span class="w">  </span><span class="kr">String</span><span class="w"> </span><span class="n">mac</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span><span class="w"></span>
</span><span id="line-953"><span class="w">  </span><span class="kr">unsigned</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="n">mac_base</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
</span><span id="line-954"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">esp_read_mac</span><span class="p">(</span><span class="n">mac_base</span><span class="p">,</span><span class="w"> </span><span class="n">interface</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ESP_OK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-955"><span class="w">    </span><span class="kr">char</span><span class="w"> </span><span class="nf">buffer</span><span class="p">[</span><span class="mi">18</span><span class="p">];</span><span class="w">  </span><span class="c1">// 6*2 characters for hex + 5 characters for colons + 1 character for null terminator</span>
</span><span id="line-956"><span class="w">    </span><span class="n">sprintf</span><span class="p">(</span><span class="nf">buffer</span><span class="p">,</span><span class="w"> </span><span class="s">"%02X:%02X:%02X:%02X:%02X:%02X"</span><span class="p">,</span><span class="w"> </span><span class="n">mac_base</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">mac_base</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">mac_base</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">mac_base</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="n">mac_base</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="w"> </span><span class="n">mac_base</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span><span class="w"></span>
</span><span id="line-957"><span class="w">    </span><span class="n">mac</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">buffer</span><span class="p">;</span><span class="w"></span>
</span><span id="line-958"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-959"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">mac</span><span class="p">;</span><span class="w"></span>
</span><span id="line-960"><span class="p">}</span><span class="w"></span>
</span><span id="line-961">
</span><span id="line-962"><span class="kr">bool</span><span class="w"> </span><span class="nf">setupWiFi</span><span class="p">(</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">newSSID</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">newPassword</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-963"><span class="w">  </span><span class="kr">bool</span><span class="w"> </span><span class="nf">connected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w"></span>
</span><span id="line-964"><span class="w">  </span><span class="kr">int</span><span class="w"> </span><span class="n">attempts</span><span class="p">;</span><span class="w"></span>
</span><span id="line-965">
</span><span id="line-966"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">WiFi</span><span class="p">.</span><span class="n">getMode</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WIFI_AP</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Switch from AP mode to STA mode if necessary</span>
</span><span id="line-967"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Currently in AP mode. Switching to STA mode..."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-968"><span class="w">    </span><span class="nf">WiFi</span><span class="p">.</span><span class="n">softAPdisconnect</span><span class="p">(</span><span class="kr">true</span><span class="p">);</span><span class="w"></span>
</span><span id="line-969"><span class="w">    </span><span class="nf">delay</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span><span class="w"></span>
</span><span id="line-970"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-971">
</span><span id="line-972"><span class="w">  </span><span class="kr">auto</span><span class="w"> </span><span class="n">attemptConnection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">ssid</span><span class="p">,</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="o">*</span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Function to attempt connection to a given Wi-Fi network</span>
</span><span id="line-973"><span class="w">    </span><span class="nf">WiFi</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">ssid</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">);</span><span class="w"></span>
</span><span id="line-974"><span class="w">    </span><span class="kr">int</span><span class="w"> </span><span class="n">attempts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
</span><span id="line-975"><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nf">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">WL_CONNECTED</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">attempts</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-976"><span class="w">      </span><span class="nf">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span><span class="w"></span>
</span><span id="line-977"><span class="w">      </span><span class="n">attempts</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
</span><span id="line-978"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-979"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WL_CONNECTED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-980"><span class="w">      </span><span class="nf">WiFi</span><span class="p">.</span><span class="n">setHostname</span><span class="p">(</span><span class="n">host</span><span class="p">);</span><span class="w"></span>
</span><span id="line-981"><span class="w">      </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">ssid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ssid</span><span class="p">;</span><span class="w"></span>
</span><span id="line-982"><span class="w">      </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">wifi_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">password</span><span class="p">;</span><span class="w"></span>
</span><span id="line-983"><span class="w">      </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">signalstrength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">WiFi</span><span class="p">.</span><span class="nf">RSSI</span><span class="p">();</span><span class="w"></span>
</span><span id="line-984"><span class="w">      </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">IP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">WiFi</span><span class="p">.</span><span class="nf">localIP</span><span class="p">();</span><span class="w"></span>
</span><span id="line-985"><span class="w">      </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">MAC_Address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getInterfaceMacAddress</span><span class="p">(</span><span class="n">ESP_MAC_WIFI_STA</span><span class="p">);</span><span class="w"></span>
</span><span id="line-986"><span class="w">      </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">hostname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">WiFi</span><span class="p">.</span><span class="n">getHostname</span><span class="p">();</span><span class="w"></span>
</span><span id="line-987"><span class="w">      </span><span class="n">setTime</span><span class="p">(</span><span class="s">"America/Chicago"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-988"><span class="w">      </span><span class="n">configTime</span><span class="p">(</span><span class="n">esp32Info</span><span class="p">.</span><span class="n">gmtoffset</span><span class="p">,</span><span class="w"> </span><span class="n">esp32Info</span><span class="p">.</span><span class="n">daylightoffset</span><span class="p">,</span><span class="w"> </span><span class="s">"pool.ntp.org"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-989"><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-990"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w"></span>
</span><span id="line-991"><span class="w">  </span><span class="p">};</span><span class="w"></span>
</span><span id="line-992">
</span><span id="line-993"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WL_CONNECTED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// If already connected, disconnect and try new network</span>
</span><span id="line-994"><span class="w">    </span><span class="n">logSD</span><span class="p">(</span><span class="s">"Currently connected to Wi-Fi. Disconnecting..."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-995"><span class="w">    </span><span class="nf">WiFi</span><span class="p">.</span><span class="nf">disconnect</span><span class="p">();</span><span class="w"></span>
</span><span id="line-996"><span class="w">    </span><span class="nf">delay</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span><span class="w"></span>
</span><span id="line-997"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">attemptConnection</span><span class="p">(</span><span class="n">newSSID</span><span class="p">,</span><span class="w"> </span><span class="n">newPassword</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-998"><span class="w">      </span><span class="n">logSD</span><span class="p">(</span><span class="s">"Connected to new Wi-Fi network."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-999"><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-1000"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Retrieve previous network credentials</span>
</span><span id="line-1001"><span class="p">...</span><span class="w"></span>
</span><span id="line-1002">
</span><span id="line-1003"><span class="n">This</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">truncated</span><span class="p">,</span><span class="w"> </span><span class="n">please</span><span class="w"> </span><span class="n">download</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">contents</span><span class="p">.</span><span class="w"></span>
</span></pre>
       </div>
      </div>
     </div>
     <div class="preview-pane" id="code-widget-657602">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          index.html
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          HTML
         </span>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax all">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="cp">&lt;!doctype html&gt;</span>
</span><span id="line-2"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">"en"</span><span class="p">&gt;</span>
</span><span id="line-3">
</span><span id="line-4"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span><span id="line-5">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"UTF-8"</span> <span class="p">/&gt;</span>
</span><span id="line-6">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">"viewport"</span> <span class="na">content</span><span class="o">=</span><span class="s">"width=device-width, initial-scale=1.0"</span> <span class="p">/&gt;</span>
</span><span id="line-7">  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Project Postman<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span><span id="line-8">  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">href</span><span class="o">=</span><span class="s">"/style.css"</span><span class="p">&gt;</span>
</span><span id="line-9">  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"icon"</span> <span class="na">href</span><span class="o">=</span><span class="s">"/favicon.ico"</span> <span class="na">type</span><span class="o">=</span><span class="s">"image/x-icon"</span><span class="p">&gt;</span>
</span><span id="line-10"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span><span id="line-11">
</span><span id="line-12"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span><span id="line-13">  <span class="c">&lt;!-- Side navigation --&gt;</span>
</span><span id="line-14">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"sidenav"</span><span class="p">&gt;</span>
</span><span id="line-15">    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#main"</span><span class="p">&gt;</span>Main<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-16">    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#recordings"</span><span class="p">&gt;</span>Recordings<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-17">    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#packages"</span><span class="p">&gt;</span>Packages<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-18">    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">"dropdown-btn"</span><span class="p">&gt;</span>Settings
</span><span id="line-19">      <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">"fa fa-caret-down"</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
</span><span id="line-20">    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-21">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"dropdown-container"</span><span class="p">&gt;</span>
</span><span id="line-22">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#logs"</span> <span class="na">class</span><span class="o">=</span><span class="s">"sub-settings"</span><span class="p">&gt;</span>Logs<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-23">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#manage-users"</span> <span class="na">class</span><span class="o">=</span><span class="s">"sub-settings"</span><span class="p">&gt;</span>Manage Users<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-24">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#wifi"</span> <span class="na">class</span><span class="o">=</span><span class="s">"sub-settings"</span><span class="p">&gt;</span>Device Information<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-25">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#serial-messages"</span> <span class="na">class</span><span class="o">=</span><span class="s">"sub-settings"</span><span class="p">&gt;</span>Software Serial Messages<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-26">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#report-problem"</span> <span class="na">class</span><span class="o">=</span><span class="s">"sub-settings"</span><span class="p">&gt;</span>Report a Problem<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-27">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#update-firmware"</span> <span class="na">class</span><span class="o">=</span><span class="s">"sub-settings"</span><span class="p">&gt;</span>Update Firmware<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-28">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-29">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"auth-box"</span><span class="p">&gt;</span>
</span><span id="line-30">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#login"</span> <span class="na">id</span><span class="o">=</span><span class="s">"login-btn"</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-31">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"logout-box"</span><span class="p">&gt;</span>
</span><span id="line-32">        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#logout"</span> <span class="na">id</span><span class="o">=</span><span class="s">"logout-btn"</span><span class="p">&gt;</span>Logout<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-33">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-34">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-35">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-36">
</span><span id="line-37">  <span class="c">&lt;!-- Main content --&gt;</span>
</span><span id="line-38">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"main"</span><span class="p">&gt;</span>
</span><span id="line-39">    <span class="c">&lt;!-- Main section --&gt;</span>
</span><span id="line-40">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"main"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-41">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Live Stream<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-42">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"stream-container"</span><span class="p">&gt;</span>
</span><span id="line-43">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"stream-placeholder"</span><span class="p">&gt;</span>
</span><span id="line-44">          <span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">"stream"</span> <span class="na">src</span><span class="o">=</span><span class="s">""</span> <span class="na">alt</span><span class="o">=</span><span class="s">"Live Stream"</span> <span class="p">/&gt;</span>
</span><span id="line-45">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-46">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"stream-controls"</span><span class="p">&gt;</span>
</span><span id="line-47">          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">"stream-btn"</span><span class="p">&gt;</span>Start Stream<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-48">          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">"lock-btn"</span><span class="p">&gt;</span>Unlock<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-49">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-50">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-51">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"alerts"</span><span class="p">&gt;</span>
</span><span id="line-52">        <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Alerts<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span><span id="line-53">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"alerts-box"</span> <span class="na">id</span><span class="o">=</span><span class="s">"alerts-box"</span><span class="p">&gt;</span>
</span><span id="line-54">          <span class="c">&lt;!-- Alert messages will appear here --&gt;</span>
</span><span id="line-55">          <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>No alerts to show.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-56">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-57">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-58">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-59">
</span><span id="line-60">    <span class="c">&lt;!-- Recordings section --&gt;</span>
</span><span id="line-61">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"recordings"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-62">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Recordings<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-63">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"stream-container"</span><span class="p">&gt;</span>
</span><span id="line-64">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"stream-placeholder"</span><span class="p">&gt;</span>
</span><span id="line-65">          <span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">"recordings-image"</span> <span class="na">src</span><span class="o">=</span><span class="s">""</span> <span class="na">alt</span><span class="o">=</span><span class="s">"Recording Image"</span><span class="p">&gt;</span>
</span><span id="line-66">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-67">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"stream-controls"</span><span class="p">&gt;</span>
</span><span id="line-68">          <span class="c">&lt;!-- Your control buttons here --&gt;</span>
</span><span id="line-69">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-70">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-71">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"recordings-list"</span> <span class="na">class</span><span class="o">=</span><span class="s">"recordings-list"</span><span class="p">&gt;</span>
</span><span id="line-72">        <span class="c">&lt;!-- Recording files will be listed here --&gt;</span>
</span><span id="line-73">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-74">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-75">
</span><span id="line-76">    <span class="c">&lt;!-- Packages section --&gt;</span>
</span><span id="line-77">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"packages"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-78">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Packages<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-79">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"feature-placeholder"</span><span class="p">&gt;</span>
</span><span id="line-80">        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Feature Coming Soon<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-81">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-82">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-83">
</span><span id="line-84">    <span class="c">&lt;!-- Logs section --&gt;</span>
</span><span id="line-85">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"logs"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-86">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Logs<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-87">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"logs-list"</span> <span class="na">class</span><span class="o">=</span><span class="s">"recordings-list"</span><span class="p">&gt;</span>
</span><span id="line-88">        <span class="c">&lt;!-- Recording files will be listed here --&gt;</span>
</span><span id="line-89">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-90">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-91">
</span><span id="line-92">    <span class="c">&lt;!-- Manage Users section --&gt;</span>
</span><span id="line-93">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"manage-users"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-94">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Manage Users<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-95">      <span class="c">&lt;!-- Edit current user info --&gt;</span>
</span><span id="line-96">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"currentUserEdit"</span> <span class="na">class</span><span class="o">=</span><span class="s">"user-info"</span><span class="p">&gt;</span>
</span><span id="line-97">        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"currentUserName"</span><span class="p">&gt;</span>Name:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-98">        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"currentUserName"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"John Doe"</span><span class="p">&gt;</span>
</span><span id="line-99">
</span><span id="line-100">        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"currentUserPermission"</span><span class="p">&gt;</span>Permission:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-101">        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"currentUserPermission"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"Admin"</span><span class="p">&gt;</span>
</span><span id="line-102">
</span><span id="line-103">        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"currentUserPhone"</span><span class="p">&gt;</span>Phone Number:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-104">        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"currentUserPhone"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"123-456-7890"</span><span class="p">&gt;</span>
</span><span id="line-105">
</span><span id="line-106">        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"currentUserEmail"</span><span class="p">&gt;</span>Email:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-107">        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"email"</span> <span class="na">id</span><span class="o">=</span><span class="s">"currentUserEmail"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"john.doe@example.com"</span><span class="p">&gt;</span>
</span><span id="line-108">
</span><span id="line-109">        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"currentUserPin"</span><span class="p">&gt;</span>Pin Code:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-110">        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"currentUserPin"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"****"</span><span class="p">&gt;</span>
</span><span id="line-111">
</span><span id="line-112">        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">"saveCurrentUserBtn"</span><span class="p">&gt;</span>Save Changes<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-113">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"usersTable"</span><span class="p">&gt;</span>
</span><span id="line-114">          <span class="c">&lt;!-- Table for displaying users --&gt;</span>
</span><span id="line-115">          <span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">"userTable"</span><span class="p">&gt;</span>
</span><span id="line-116">            <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
</span><span id="line-117">              <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-118">                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Username<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-119">                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Phone Number<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-120">                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Email<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-121">                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Password<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-122">                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Pin Code<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-123">                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Permission<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-124">                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Actions<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-125">              <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-126">            <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
</span><span id="line-127">            <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span><span id="line-128">              <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user0"</span><span class="p">&gt;</span>
</span><span id="line-129">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-130">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-131">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-132">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-133">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-134">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-135">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-136">              <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-137">              <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user1"</span><span class="p">&gt;</span>
</span><span id="line-138">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-139">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-140">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-141">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-142">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-143">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-144">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-145">              <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-146">              <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user2"</span><span class="p">&gt;</span>
</span><span id="line-147">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-148">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-149">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-150">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-151">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-152">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-153">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-154">              <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-155">              <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user3"</span><span class="p">&gt;</span>
</span><span id="line-156">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-157">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-158">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-159">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-160">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-161">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-162">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-163">              <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-164">              <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user4"</span><span class="p">&gt;</span>
</span><span id="line-165">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-166">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-167">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-168">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-169">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-170">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-171">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-172">              <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-173">              <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user5"</span><span class="p">&gt;</span>
</span><span id="line-174">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-175">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-176">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-177">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-178">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-179">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-180">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-181">              <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-182">            <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span><span id="line-183">          <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</span><span id="line-184">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-185">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-186">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-187">
</span><span id="line-188">    <span class="c">&lt;!-- WiFi Connection section --&gt;</span>
</span><span id="line-189">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"wifi"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-190">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Device Information<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-191">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"wifi-device-container"</span><span class="p">&gt;</span>
</span><span id="line-192">        <span class="c">&lt;!-- WiFi Connection details --&gt;</span>
</span><span id="line-193">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"wifi-connection"</span><span class="p">&gt;</span>
</span><span id="line-194">          <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>WiFi Status<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span><span id="line-195">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"wifi-status"</span><span class="p">&gt;</span>
</span><span id="line-196">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Current Status: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"current-status"</span><span class="p">&gt;</span>Disconnected<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-197">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Connected to: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"current-network"</span><span class="p">&gt;</span>None<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-198">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Signal Strength: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"signal-strength"</span><span class="p">&gt;</span>-<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> dBm<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-199">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>IP Address: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"ip-address"</span><span class="p">&gt;</span>0.0.0.0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-200">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hostname: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"hostname"</span><span class="p">&gt;</span>N/A<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-201">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-202">          <span class="c">&lt;!-- Connect to a selected network --&gt;</span>
</span><span id="line-203">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"wifi-connect"</span><span class="p">&gt;</span>
</span><span id="line-204">            <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Connect to a Network<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span><span id="line-205">            <span class="p">&lt;</span><span class="nt">form</span> <span class="na">onsubmit</span><span class="o">=</span><span class="s">"connectToNetwork(); return false;"</span><span class="p">&gt;</span>
</span><span id="line-206">              <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"network-list"</span><span class="p">&gt;</span>SSID:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-207">              <span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">"network-list"</span> <span class="na">onchange</span><span class="o">=</span><span class="s">"handleSelectionChange()"</span><span class="p">&gt;</span>
</span><span id="line-208">                <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">""</span><span class="p">&gt;</span>Select an SSID<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-209">                <span class="c">&lt;!-- Network options will be populated here --&gt;</span>
</span><span id="line-210">              <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</span><span id="line-211">              <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"manual-ssid"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"Or type SSID here"</span><span class="p">&gt;</span>
</span><span id="line-212">              <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-213">              <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"password"</span><span class="p">&gt;</span>Password:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-214">              <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"password"</span> <span class="na">id</span><span class="o">=</span><span class="s">"password"</span> <span class="na">name</span><span class="o">=</span><span class="s">"password"</span><span class="p">&gt;</span>
</span><span id="line-215">              <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-216">              <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">id </span><span class="o">=</span><span class="s">"connect-btn"</span><span class="na">value</span><span class="o">=</span><span class="s">"Connect"</span><span class="p">&gt;</span>
</span><span id="line-217">            <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span id="line-218">            <span class="c">&lt;!-- Scan for available networks --&gt;</span>
</span><span id="line-219">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"wifi-scan"</span><span class="p">&gt;</span>
</span><span id="line-220">              <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"scanNetworks()"</span><span class="p">&gt;</span>Scan for Networks<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-221">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-222">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-223">          <span class="c">&lt;!-- Device Information details --&gt;</span>
</span><span id="line-224">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"device-info"</span><span class="p">&gt;</span>
</span><span id="line-225">            <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Device Information<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span><span id="line-226">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Device Model: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"device-model"</span><span class="p">&gt;</span>ESP32<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-227">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>MAC Address: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"mac-address"</span><span class="p">&gt;</span>00:00:00:00:00:00<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-228">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Firmware Version: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"firmware-version"</span><span class="p">&gt;</span>1.0.0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-229">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Uptime: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"uptime"</span><span class="p">&gt;</span>0 days 0 hours 0 minutes<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-230">            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"rebootESP()"</span><span class="p">&gt;</span>Reboot ESP32S3<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-231">            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"factoryReset()"</span><span class="p">&gt;</span>Factory Reset<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-232">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-233">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-234">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-235">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-236">
</span><span id="line-237">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"serial-messages"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-238">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Software Serial Messages<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-239">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"serial-terminal"</span><span class="p">&gt;</span>
</span><span id="line-240">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"serial-output"</span> <span class="na">class</span><span class="o">=</span><span class="s">"serial-output"</span><span class="p">&gt;</span>  Received messages will appear here 
</span><span id="line-241">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-242">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"serial-input"</span> <span class="na">class</span><span class="o">=</span><span class="s">"serial-input"</span><span class="p">&gt;</span>
</span><span id="line-243">          <span class="p">&lt;</span><span class="nt">textarea</span> <span class="na">id</span><span class="o">=</span><span class="s">"messageInput"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"Type your message here..."</span><span class="p">&gt;&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>
</span><span id="line-244">          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">"sendMessageBtn"</span><span class="p">&gt;</span>Send<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-245">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-246">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-247">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-248">
</span><span id="line-249">    <span class="c">&lt;!-- Report a Problem section --&gt;</span>
</span><span id="line-250">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"report-problem"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-251">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Report a Problem<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-252">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"contact-info"</span><span class="p">&gt;</span>
</span><span id="line-253">        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>If you encounter any issues or have questions, please reach out using the following contact information:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-254">        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span><span id="line-255">          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>GitHub:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"https://github.com/rashawnoverton"</span>
</span><span id="line-256">              <span class="na">target</span><span class="o">=</span><span class="s">"_blank"</span><span class="p">&gt;</span>github.com/rashawnoverton<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="line-257">          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Website:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"https://rashawnio.wordpress.com/"</span>
</span><span id="line-258">              <span class="na">target</span><span class="o">=</span><span class="s">"_blank"</span><span class="p">&gt;</span>rashawnio.wordpress.com/<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="line-259">          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Hackster.io:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"https://www.hackster.io/rashawnisaiah"</span>
</span><span id="line-260">              <span class="na">target</span><span class="o">=</span><span class="s">"_blank"</span><span class="p">&gt;</span>hackster.io/rashawnisaiah<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="line-261">          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Email:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"mailto:rashawnoverton@live.com"</span><span class="p">&gt;</span>rashawnoverton@live.com<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="line-262">        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span><span id="line-263">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-264">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-265">
</span><span id="line-266">
</span><span id="line-267">    <span class="c">&lt;!-- Update Firmware section --&gt;</span>
</span><span id="line-268">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"update-firmware"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-269">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Update Firmware<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-270">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"feature-placeholder"</span><span class="p">&gt;</span>
</span><span id="line-271">        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Feature Coming Soon<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-272">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-273">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-274">
</span><span id="line-275">    <span class="c">&lt;!-- Login page --&gt;</span>
</span><span id="line-276">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"login"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-277">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-278">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"login-form"</span><span class="p">&gt;</span>
</span><span id="line-279">        <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span id="line-280">          <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"username"</span><span class="p">&gt;</span>Username:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-281">          <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"username"</span> <span class="na">name</span><span class="o">=</span><span class="s">"username"</span> <span class="na">required</span><span class="p">&gt;</span>
</span><span id="line-282">          <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"password"</span><span class="p">&gt;</span>Password:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-283">          <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"password"</span> <span class="na">id</span><span class="o">=</span><span class="s">"password"</span> <span class="na">name</span><span class="o">=</span><span class="s">"password"</span> <span class="na">required</span><span class="p">&gt;</span>
</span><span id="line-284">          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-285">        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span id="line-286">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-287">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-288">
</span><span id="line-289">    <span class="c">&lt;!-- Logout page --&gt;</span>
</span><span id="line-290">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"logout"</span> <span class="na">class</span><span class="o">=</span><span class="s">"content-section"</span><span class="p">&gt;</span>
</span><span id="line-291">      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Logout<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-292">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"logout-message"</span><span class="p">&gt;</span>
</span><span id="line-293">        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>You have been logged out.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-294">        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#login"</span> <span class="na">id</span><span class="o">=</span><span class="s">"login-link"</span><span class="p">&gt;</span>Login Again<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="line-295">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-296">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-297">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-298">  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"/script.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="line-299"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span><span id="line-300"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></pre>
       </div>
      </div>
     </div>
     <div class="preview-pane" id="code-widget-657603">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          style.css
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          CSS
         </span>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax all">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="p">:</span><span class="nd">root</span> <span class="p">{</span>
</span><span id="line-2">  <span class="k">font-family</span><span class="p">:</span> <span class="n">Inter</span><span class="p">,</span> <span class="n">system-ui</span><span class="p">,</span> <span class="n">Avenir</span><span class="p">,</span> <span class="n">Helvetica</span><span class="p">,</span> <span class="n">Arial</span><span class="p">,</span> <span class="kc">sans-serif</span><span class="p">;</span>
</span><span id="line-3">  <span class="k">line-height</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">;</span>
</span><span id="line-4">  <span class="k">font-weight</span><span class="p">:</span> <span class="mi">400</span><span class="p">;</span>
</span><span id="line-5">  <span class="n">color-scheme</span><span class="p">:</span> <span class="n">light</span> <span class="n">dark</span><span class="p">;</span>
</span><span id="line-6">  <span class="k">color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mf">0.87</span><span class="p">);</span>
</span><span id="line-7">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffffff</span><span class="n">be</span><span class="p">;</span>
</span><span id="line-8">  <span class="k">font-synthesis</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-9">  <span class="n">text-rendering</span><span class="p">:</span> <span class="kc">optimizeLegibility</span><span class="p">;</span>
</span><span id="line-10">  <span class="kp">-webkit-</span><span class="n">font-smoothing</span><span class="p">:</span> <span class="n">antialiased</span><span class="p">;</span>
</span><span id="line-11">  <span class="kp">-moz-</span><span class="n">osx-font-smoothing</span><span class="p">:</span> <span class="n">grayscale</span><span class="p">;</span>
</span><span id="line-12"><span class="p">}</span>
</span><span id="line-13">
</span><span id="line-14"><span class="p">.</span><span class="nc">sidenav</span> <span class="p">{</span>
</span><span id="line-15">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-16">  <span class="k">width</span><span class="p">:</span> <span class="mi">200</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-17">  <span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
</span><span id="line-18">  <span class="k">z-index</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
</span><span id="line-19">  <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="line-20">  <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="line-21">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#111</span><span class="p">;</span>
</span><span id="line-22">  <span class="k">overflow-x</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span><span id="line-23">  <span class="k">padding-top</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-24"><span class="p">}</span>
</span><span id="line-25">
</span><span id="line-26"><span class="p">.</span><span class="nc">sidenav</span> <span class="nt">a</span><span class="o">,</span>
</span><span id="line-27"><span class="p">.</span><span class="nc">dropdown-btn</span> <span class="p">{</span>
</span><span id="line-28">  <span class="k">padding</span><span class="p">:</span> <span class="mi">6</span><span class="kt">px</span> <span class="mi">8</span><span class="kt">px</span> <span class="mi">6</span><span class="kt">px</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-29">  <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-30">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-31">  <span class="k">color</span><span class="p">:</span> <span class="mh">#818181</span><span class="p">;</span>
</span><span id="line-32">  <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
</span><span id="line-33">  <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-34">  <span class="k">background</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-35">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-36">  <span class="k">text-align</span><span class="p">:</span> <span class="kc">left</span><span class="p">;</span>
</span><span id="line-37">  <span class="k">cursor</span><span class="p">:</span> <span class="kc">pointer</span><span class="p">;</span>
</span><span id="line-38">  <span class="k">outline</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-39"><span class="p">}</span>
</span><span id="line-40">
</span><span id="line-41"><span class="p">.</span><span class="nc">sidenav</span> <span class="nt">a</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
</span><span id="line-42"><span class="p">.</span><span class="nc">dropdown-btn</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-43">  <span class="k">color</span><span class="p">:</span> <span class="mh">#f1f1f1</span><span class="p">;</span>
</span><span id="line-44"><span class="p">}</span>
</span><span id="line-45">
</span><span id="line-46"><span class="p">.</span><span class="nc">auth-box</span> <span class="p">{</span>
</span><span id="line-47">  <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
</span><span id="line-48">  <span class="k">bottom</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-49">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-50">  <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-51"><span class="p">}</span>
</span><span id="line-52">
</span><span id="line-53"><span class="p">.</span><span class="nc">auth-box</span> <span class="nt">a</span> <span class="p">{</span>
</span><span id="line-54">  <span class="k">display</span><span class="p">:</span> <span class="kc">inline-block</span><span class="p">;</span>
</span><span id="line-55">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-56">  <span class="k">margin</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-57">  <span class="k">color</span><span class="p">:</span> <span class="mh">#818181</span><span class="p">;</span>
</span><span id="line-58">  <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-59">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#333</span><span class="p">;</span>
</span><span id="line-60">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-61"><span class="p">}</span>
</span><span id="line-62">
</span><span id="line-63"><span class="p">.</span><span class="nc">auth-box</span> <span class="nt">a</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-64">  <span class="k">color</span><span class="p">:</span> <span class="mh">#f1f1f1</span><span class="p">;</span>
</span><span id="line-65">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#555</span><span class="p">;</span>
</span><span id="line-66"><span class="p">}</span>
</span><span id="line-67">
</span><span id="line-68"><span class="p">.</span><span class="nc">main</span> <span class="p">{</span>
</span><span id="line-69">  <span class="k">margin-left</span><span class="p">:</span> <span class="mi">200</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-70">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-71">  <span class="k">padding</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-72">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-73">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-74">  <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
</span><span id="line-75">  <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span><span id="line-76"><span class="p">}</span>
</span><span id="line-77">
</span><span id="line-78"><span class="p">.</span><span class="nc">content-section</span> <span class="p">{</span>
</span><span id="line-79">  <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-80">  <span class="k">padding</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-81">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f1f1f1</span><span class="p">;</span>
</span><span id="line-82">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-83">  <span class="k">height</span><span class="p">:</span> <span class="nb">calc</span><span class="p">(</span><span class="mi">100</span><span class="kt">%</span> <span class="o">-</span> <span class="mi">40</span><span class="kt">px</span><span class="p">);</span>
</span><span id="line-84">  <span class="k">overflow-y</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span><span id="line-85"><span class="p">}</span>
</span><span id="line-86">
</span><span id="line-87"><span class="p">.</span><span class="nc">content-section</span><span class="p">.</span><span class="nc">active</span> <span class="p">{</span>
</span><span id="line-88">  <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
</span><span id="line-89"><span class="p">}</span>
</span><span id="line-90">
</span><span id="line-91"><span class="p">.</span><span class="nc">feature-placeholder</span> <span class="p">{</span>
</span><span id="line-92">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddd</span><span class="p">;</span>
</span><span id="line-93">  <span class="k">color</span><span class="p">:</span> <span class="mh">#333</span><span class="p">;</span>
</span><span id="line-94">  <span class="k">padding</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-95">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-96">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-97">  <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-98">  <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-99">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-100"><span class="p">}</span>
</span><span id="line-101">
</span><span id="line-102"><span class="p">.</span><span class="nc">login-form</span><span class="o">,</span>
</span><span id="line-103"><span class="p">.</span><span class="nc">logout-message</span> <span class="p">{</span>
</span><span id="line-104">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-105">  <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
</span><span id="line-106">  <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-107">  <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-108"><span class="p">}</span>
</span><span id="line-109">
</span><span id="line-110"><span class="p">.</span><span class="nc">login-form</span> <span class="nt">form</span> <span class="p">{</span>
</span><span id="line-111">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-112">  <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
</span><span id="line-113">  <span class="k">width</span><span class="p">:</span> <span class="mi">300</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-114"><span class="p">}</span>
</span><span id="line-115">
</span><span id="line-116"><span class="p">.</span><span class="nc">login-form</span> <span class="nt">label</span> <span class="p">{</span>
</span><span id="line-117">  <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-118"><span class="p">}</span>
</span><span id="line-119">
</span><span id="line-120"><span class="p">.</span><span class="nc">login-form</span> <span class="nt">input</span> <span class="p">{</span>
</span><span id="line-121">  <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-122">  <span class="k">padding</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-123"><span class="p">}</span>
</span><span id="line-124">
</span><span id="line-125"><span class="p">.</span><span class="nc">login-form</span> <span class="nt">button</span> <span class="p">{</span>
</span><span id="line-126">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-127">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#007bff</span><span class="p">;</span>
</span><span id="line-128">  <span class="k">color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
</span><span id="line-129">  <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-130">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-131">  <span class="k">cursor</span><span class="p">:</span> <span class="kc">pointer</span><span class="p">;</span>
</span><span id="line-132"><span class="p">}</span>
</span><span id="line-133">
</span><span id="line-134"><span class="p">.</span><span class="nc">login-form</span> <span class="nt">button</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-135">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#0056b3</span><span class="p">;</span>
</span><span id="line-136"><span class="p">}</span>
</span><span id="line-137">
</span><span id="line-138"><span class="p">.</span><span class="nc">logout-message</span> <span class="nt">p</span> <span class="p">{</span>
</span><span id="line-139">  <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-140"><span class="p">}</span>
</span><span id="line-141">
</span><span id="line-142"><span class="p">.</span><span class="nc">logout-message</span> <span class="nt">a</span> <span class="p">{</span>
</span><span id="line-143">  <span class="k">color</span><span class="p">:</span> <span class="mh">#007bff</span><span class="p">;</span>
</span><span id="line-144">  <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-145"><span class="p">}</span>
</span><span id="line-146">
</span><span id="line-147"><span class="p">.</span><span class="nc">logout-message</span> <span class="nt">a</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-148">  <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">underline</span><span class="p">;</span>
</span><span id="line-149"><span class="p">}</span>
</span><span id="line-150">
</span><span id="line-151"><span class="p">.</span><span class="nc">stream-container</span> <span class="p">{</span>
</span><span id="line-152">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-153">  <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
</span><span id="line-154">  <span class="k">align-items</span><span class="p">:</span> <span class="kc">flex-start</span><span class="p">;</span>
</span><span id="line-155">  <span class="c">/* Aligns items to the start (left) */</span>
</span><span id="line-156">  <span class="n">gap</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-157">  <span class="c">/* Space between stream placeholder and controls */</span>
</span><span id="line-158"><span class="p">}</span>
</span><span id="line-159">
</span><span id="line-160"><span class="p">.</span><span class="nc">stream-placeholder</span> <span class="p">{</span>
</span><span id="line-161">  <span class="k">width</span><span class="p">:</span> <span class="mi">240</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-162">  <span class="k">height</span><span class="p">:</span> <span class="mi">240</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-163">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
</span><span id="line-164">  <span class="c">/* Black background to contrast with image */</span>
</span><span id="line-165">  <span class="k">color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
</span><span id="line-166">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-167">  <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-168">  <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-169">  <span class="k">overflow</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span><span id="line-170">  <span class="c">/* Ensure the image doesnt overflow */</span>
</span><span id="line-171"><span class="p">}</span>
</span><span id="line-172">
</span><span id="line-173"><span class="p">#</span><span class="nn">stream</span> <span class="p">{</span>
</span><span id="line-174">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-175">  <span class="c">/* Ensure image fills the container */</span>
</span><span id="line-176">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-177">  <span class="c">/* Ensure image fills the container */</span>
</span><span id="line-178">  <span class="k">object-fit</span><span class="p">:</span> <span class="kc">cover</span><span class="p">;</span>
</span><span id="line-179">  <span class="c">/* Maintain aspect ratio, cover the container */</span>
</span><span id="line-180"><span class="p">}</span>
</span><span id="line-181">
</span><span id="line-182">
</span><span id="line-183"><span class="p">.</span><span class="nc">stream-controls</span> <span class="p">{</span>
</span><span id="line-184">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-185">  <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">row</span><span class="p">;</span>
</span><span id="line-186">  <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-187">  <span class="n">gap</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-188">  <span class="c">/* Space between buttons */</span>
</span><span id="line-189">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-190">  <span class="c">/* Space above the controls */</span>
</span><span id="line-191"><span class="p">}</span>
</span><span id="line-192">
</span><span id="line-193"><span class="p">.</span><span class="nc">stream-controls</span> <span class="nt">button</span> <span class="p">{</span>
</span><span id="line-194">  <span class="k">height</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-195">  <span class="k">width</span><span class="p">:</span> <span class="mi">115</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-196">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">18</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-197"><span class="p">}</span>
</span><span id="line-198">
</span><span id="line-199"><span class="p">.</span><span class="nc">alerts</span> <span class="p">{</span>
</span><span id="line-200">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-201"><span class="p">}</span>
</span><span id="line-202">
</span><span id="line-203"><span class="p">.</span><span class="nc">alerts</span> <span class="nt">h3</span> <span class="p">{</span>
</span><span id="line-204">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-205">  <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-206"><span class="p">}</span>
</span><span id="line-207">
</span><span id="line-208"><span class="p">.</span><span class="nc">alerts-box</span> <span class="p">{</span>
</span><span id="line-209">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f9f9f9</span><span class="p">;</span>
</span><span id="line-210">  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ddd</span><span class="p">;</span>
</span><span id="line-211">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-212">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-213">  <span class="k">height</span><span class="p">:</span> <span class="mi">400</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-214">  <span class="c">/* Adjust the height to your preference */</span>
</span><span id="line-215">  <span class="k">overflow-y</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span><span id="line-216">  <span class="k">box-sizing</span><span class="p">:</span> <span class="kc">border-box</span><span class="p">;</span>
</span><span id="line-217">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-218">  <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column-reverse</span><span class="p">;</span>
</span><span id="line-219">  <span class="c">/* Ensure the scrollbar starts at the bottom */</span>
</span><span id="line-220"><span class="p">}</span>
</span><span id="line-221">
</span><span id="line-222"><span class="p">.</span><span class="nc">recordings-list</span> <span class="p">{</span>
</span><span id="line-223">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f9f9f9</span><span class="p">;</span>
</span><span id="line-224">  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ddd</span><span class="p">;</span>
</span><span id="line-225">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-226">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-227">  <span class="k">overflow-y</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span><span id="line-228">  <span class="k">height</span><span class="p">:</span> <span class="nb">calc</span><span class="p">(</span><span class="mi">100</span><span class="kt">%</span> <span class="o">-</span> <span class="mi">100</span><span class="kt">px</span><span class="p">);</span>
</span><span id="line-229">  <span class="c">/* Adjust to fit your design */</span>
</span><span id="line-230"><span class="p">}</span>
</span><span id="line-231">
</span><span id="line-232"><span class="p">.</span><span class="nc">recordings-list</span> <span class="nt">a</span> <span class="p">{</span>
</span><span id="line-233">  <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
</span><span id="line-234">  <span class="k">margin</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="line-235">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-236">  <span class="k">color</span><span class="p">:</span> <span class="mh">#007bff</span><span class="p">;</span>
</span><span id="line-237">  <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-238">  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ddd</span><span class="p">;</span>
</span><span id="line-239">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-240">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
</span><span id="line-241"><span class="p">}</span>
</span><span id="line-242">
</span><span id="line-243"><span class="p">.</span><span class="nc">recordings-list</span> <span class="nt">a</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-244">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f1f1f1</span><span class="p">;</span>
</span><span id="line-245"><span class="p">}</span>
</span><span id="line-246">
</span><span id="line-247"><span class="p">.</span><span class="nc">recordings-image</span> <span class="p">{</span>
</span><span id="line-248">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-249">  <span class="k">height</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span><span id="line-250">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
</span><span id="line-251">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-252">  <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-253">  <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-254"><span class="p">}</span>
</span><span id="line-255">
</span><span id="line-256"><span class="c">/* Ensure the content section container uses Flexbox for layout */</span>
</span><span id="line-257"><span class="p">.</span><span class="nc">wifi-device-container</span> <span class="p">{</span>
</span><span id="line-258">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-259">  <span class="n">gap</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span> <span class="c">/* Space between the two sections */</span>
</span><span id="line-260"><span class="p">}</span>
</span><span id="line-261">
</span><span id="line-262"><span class="p">.</span><span class="nc">wifi-device-container</span> <span class="o">&gt;</span> <span class="nt">div</span> <span class="p">{</span>
</span><span id="line-263">  <span class="k">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span> <span class="c">/* Allow sections to grow and fill available space equally */</span>
</span><span id="line-264"><span class="p">}</span>
</span><span id="line-265">
</span><span id="line-266"><span class="c">/* Optional: Specific styles for WiFi and Device Information sections */</span>
</span><span id="line-267"><span class="p">#</span><span class="nn">wifi</span><span class="o">,</span> <span class="p">#</span><span class="nn">device-info</span> <span class="p">{</span>
</span><span id="line-268">  <span class="k">padding</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-269">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f1f1f1</span><span class="p">;</span>
</span><span id="line-270">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-271">  <span class="k">height</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span> <span class="c">/* Adjust height based on content */</span>
</span><span id="line-272">  <span class="k">width</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span><span id="line-273"><span class="p">}</span>
</span><span id="line-274">
</span><span id="line-275"><span class="c">/* Manage Users Section */</span>
</span><span id="line-276"><span class="p">#</span><span class="nn">manage-users</span> <span class="p">{</span>
</span><span id="line-277">  <span class="k">padding</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-278"><span class="p">}</span>
</span><span id="line-279">
</span><span id="line-280"><span class="p">#</span><span class="nn">currentUserEdit</span> <span class="p">{</span>
</span><span id="line-281">  <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-282"><span class="p">}</span>
</span><span id="line-283">
</span><span id="line-284"><span class="p">.</span><span class="nc">user-info</span> <span class="p">{</span>
</span><span id="line-285">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f9f9f9</span><span class="p">;</span>
</span><span id="line-286">  <span class="k">padding</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-287">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-288">  <span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">10</span><span class="kt">px</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">);</span>
</span><span id="line-289"><span class="p">}</span>
</span><span id="line-290">
</span><span id="line-291"><span class="p">.</span><span class="nc">user-info</span> <span class="nt">h3</span> <span class="p">{</span>
</span><span id="line-292">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="line-293"><span class="p">}</span>
</span><span id="line-294">
</span><span id="line-295"><span class="p">.</span><span class="nc">user-info</span> <span class="nt">label</span> <span class="p">{</span>
</span><span id="line-296">  <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
</span><span id="line-297">  <span class="k">margin</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span> <span class="mi">0</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-298">  <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
</span><span id="line-299"><span class="p">}</span>
</span><span id="line-300">
</span><span id="line-301"><span class="p">.</span><span class="nc">user-info</span> <span class="nt">input</span> <span class="p">{</span>
</span><span id="line-302">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-303">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-304">  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ccc</span><span class="p">;</span>
</span><span id="line-305">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-306">  <span class="k">box-sizing</span><span class="p">:</span> <span class="kc">border-box</span><span class="p">;</span>
</span><span id="line-307">  <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-308"><span class="p">}</span>
</span><span id="line-309">
</span><span id="line-310"><span class="p">#</span><span class="nn">saveCurrentUserBtn</span> <span class="p">{</span>
</span><span id="line-311">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#4CAF50</span><span class="p">;</span>
</span><span id="line-312">  <span class="k">color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
</span><span id="line-313">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-314">  <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-315">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-316">  <span class="k">cursor</span><span class="p">:</span> <span class="kc">pointer</span><span class="p">;</span>
</span><span id="line-317">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-318"><span class="p">}</span>
</span><span id="line-319">
</span><span id="line-320"><span class="p">#</span><span class="nn">saveCurrentUserBtn</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-321">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#45a049</span><span class="p">;</span>
</span><span id="line-322"><span class="p">}</span>
</span><span id="line-323">
</span><span id="line-324"><span class="p">.</span><span class="nc">usersTable</span> <span class="p">{</span>
</span><span id="line-325">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-326"><span class="p">}</span>
</span><span id="line-327">
</span><span id="line-328"><span class="p">#</span><span class="nn">userTable</span> <span class="p">{</span>
</span><span id="line-329">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-330">  <span class="k">border-collapse</span><span class="p">:</span> <span class="kc">collapse</span><span class="p">;</span>
</span><span id="line-331"><span class="p">}</span>
</span><span id="line-332">
</span><span id="line-333"><span class="p">#</span><span class="nn">userTable</span> <span class="nt">th</span><span class="o">,</span> <span class="p">#</span><span class="nn">userTable</span> <span class="nt">td</span> <span class="p">{</span>
</span><span id="line-334">  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ddd</span><span class="p">;</span>
</span><span id="line-335">  <span class="k">padding</span><span class="p">:</span> <span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-336">  <span class="k">text-align</span><span class="p">:</span> <span class="kc">left</span><span class="p">;</span>
</span><span id="line-337"><span class="p">}</span>
</span><span id="line-338">
</span><span id="line-339"><span class="p">#</span><span class="nn">userTable</span> <span class="nt">th</span> <span class="p">{</span>
</span><span id="line-340">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f2f2f2</span><span class="p">;</span>
</span><span id="line-341">  <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
</span><span id="line-342"><span class="p">}</span>
</span><span id="line-343">
</span><span id="line-344"><span class="p">#</span><span class="nn">userTable</span> <span class="nt">tr</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">even</span><span class="o">)</span> <span class="p">{</span>
</span><span id="line-345">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f9f9f9</span><span class="p">;</span>
</span><span id="line-346"><span class="p">}</span>
</span><span id="line-347">
</span><span id="line-348"><span class="p">#</span><span class="nn">userTable</span> <span class="nt">tr</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-349">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#e2e2e2</span><span class="p">;</span>
</span><span id="line-350"><span class="p">}</span>
</span><span id="line-351">
</span><span id="line-352"><span class="p">#</span><span class="nn">userTable</span> <span class="p">.</span><span class="nc">edit-btn</span> <span class="p">{</span>
</span><span id="line-353">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#007bff</span><span class="p">;</span>
</span><span id="line-354">  <span class="k">color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
</span><span id="line-355">  <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-356">  <span class="k">padding</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-357">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-358">  <span class="k">cursor</span><span class="p">:</span> <span class="kc">pointer</span><span class="p">;</span>
</span><span id="line-359"><span class="p">}</span>
</span><span id="line-360">
</span><span id="line-361"><span class="p">#</span><span class="nn">userTable</span> <span class="p">.</span><span class="nc">edit-btn</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-362">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#0056b3</span><span class="p">;</span>
</span><span id="line-363"><span class="p">}</span>
</span><span id="line-364">
</span><span id="line-365"><span class="c">/* Software Serial Messages Section */</span>
</span><span id="line-366"><span class="p">#</span><span class="nn">serial-messages</span> <span class="p">{</span>
</span><span id="line-367">  <span class="k">padding</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-368"><span class="p">}</span>
</span><span id="line-369">
</span><span id="line-370"><span class="p">.</span><span class="nc">serial-terminal</span> <span class="p">{</span>
</span><span id="line-371">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f9f9f9</span><span class="p">;</span>
</span><span id="line-372">  <span class="k">padding</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-373">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-374">  <span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">10</span><span class="kt">px</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">);</span>
</span><span id="line-375"><span class="p">}</span>
</span><span id="line-376">
</span><span id="line-377"><span class="p">.</span><span class="nc">serial-output</span> <span class="p">{</span>
</span><span id="line-378">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
</span><span id="line-379">  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ccc</span><span class="p">;</span>
</span><span id="line-380">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-381">  <span class="k">height</span><span class="p">:</span> <span class="mi">300</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-382">  <span class="k">overflow-y</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span><span id="line-383">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-384">  <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-385">  <span class="k">font-family</span><span class="p">:</span> <span class="kc">monospace</span><span class="p">;</span>
</span><span id="line-386"><span class="p">}</span>
</span><span id="line-387">
</span><span id="line-388"><span class="p">.</span><span class="nc">serial-input</span> <span class="p">{</span>
</span><span id="line-389">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-390">  <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
</span><span id="line-391"><span class="p">}</span>
</span><span id="line-392">
</span><span id="line-393"><span class="p">#</span><span class="nn">messageInput</span> <span class="p">{</span>
</span><span id="line-394">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-395">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-396">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-397">  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ccc</span><span class="p">;</span>
</span><span id="line-398">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-399">  <span class="k">box-sizing</span><span class="p">:</span> <span class="kc">border-box</span><span class="p">;</span>
</span><span id="line-400">  <span class="k">font-family</span><span class="p">:</span> <span class="kc">monospace</span><span class="p">;</span>
</span><span id="line-401"><span class="p">}</span>
</span><span id="line-402">
</span><span id="line-403"><span class="p">#</span><span class="nn">sendMessageBtn</span> <span class="p">{</span>
</span><span id="line-404">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-405">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#007bff</span><span class="p">;</span>
</span><span id="line-406">  <span class="k">color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
</span><span id="line-407">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-408">  <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-409">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-410">  <span class="k">cursor</span><span class="p">:</span> <span class="kc">pointer</span><span class="p">;</span>
</span><span id="line-411">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-412"><span class="p">}</span>
</span><span id="line-413">
</span><span id="line-414"><span class="p">#</span><span class="nn">sendMessageBtn</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-415">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#0056b3</span><span class="p">;</span>
</span><span id="line-416"><span class="p">}</span>
</span><span id="line-417">
</span><span id="line-418"><span class="c">/* Report a Problem section */</span>
</span><span id="line-419"><span class="p">#</span><span class="nn">report-problem</span> <span class="p">{</span>
</span><span id="line-420">  <span class="k">padding</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-421">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f9f9f9</span><span class="p">;</span>
</span><span id="line-422">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-423">  <span class="k">margin</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-424"><span class="p">}</span>
</span><span id="line-425">
</span><span id="line-426"><span class="p">#</span><span class="nn">report-problem</span> <span class="nt">h2</span> <span class="p">{</span>
</span><span id="line-427">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-428">  <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-429"><span class="p">}</span>
</span><span id="line-430">
</span><span id="line-431"><span class="p">.</span><span class="nc">contact-info</span> <span class="p">{</span>
</span><span id="line-432">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-433">  <span class="k">line-height</span><span class="p">:</span> <span class="mf">1.6</span><span class="p">;</span>
</span><span id="line-434"><span class="p">}</span>
</span><span id="line-435">
</span><span id="line-436"><span class="p">.</span><span class="nc">contact-info</span> <span class="nt">p</span> <span class="p">{</span>
</span><span id="line-437">  <span class="k">margin</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="line-438"><span class="p">}</span>
</span><span id="line-439">
</span><span id="line-440"><span class="p">.</span><span class="nc">contact-info</span> <span class="nt">a</span> <span class="p">{</span>
</span><span id="line-441">  <span class="k">color</span><span class="p">:</span> <span class="mh">#007BFF</span><span class="p">;</span>
</span><span id="line-442">  <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-443"><span class="p">}</span>
</span><span id="line-444">
</span><span id="line-445"><span class="p">.</span><span class="nc">contact-info</span> <span class="nt">a</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-446">  <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">underline</span><span class="p">;</span>
</span><span id="line-447"><span class="p">}</span>
</span></pre>
       </div>
      </div>
     </div>
     <div class="preview-pane" id="code-widget-657605">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          setup.html
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          HTML
         </span>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax all">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span id="line-2"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">"en"</span><span class="p">&gt;</span>
</span><span id="line-3">
</span><span id="line-4"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span><span id="line-5">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Project Postman - WiFi Manager<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span><span id="line-6">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"icon"</span> <span class="na">href</span><span class="o">=</span><span class="s">"/favicon.ico"</span> <span class="na">type</span><span class="o">=</span><span class="s">"image/x-icon"</span><span class="p">&gt;</span>
</span><span id="line-7">    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
</span><span id="line-8">        <span class="nt">body</span> <span class="p">{</span>
</span><span id="line-9">            <span class="k">font-family</span><span class="p">:</span> <span class="n">Arial</span><span class="p">,</span> <span class="kc">sans-serif</span><span class="p">;</span>
</span><span id="line-10">            <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f4f4f9</span><span class="p">;</span>
</span><span id="line-11">            <span class="k">color</span><span class="p">:</span> <span class="mh">#333</span><span class="p">;</span>
</span><span id="line-12">            <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="line-13">            <span class="k">padding</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="line-14">            <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-15">            <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-16">            <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-17">            <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
</span><span id="line-18">        <span class="p">}</span>
</span><span id="line-19">
</span><span id="line-20">        <span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
</span><span id="line-21">            <span class="k">background-color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
</span><span id="line-22">            <span class="k">padding</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-23">            <span class="k">border-radius</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-24">            <span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">10</span><span class="kt">px</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">);</span>
</span><span id="line-25">            <span class="k">max-width</span><span class="p">:</span> <span class="mi">600</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-26">            <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-27">            <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-28">            <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-29">        <span class="p">}</span>
</span><span id="line-30">
</span><span id="line-31">        <span class="nt">h1</span> <span class="p">{</span>
</span><span id="line-32">            <span class="k">color</span><span class="p">:</span> <span class="mh">#007bff</span><span class="p">;</span>
</span><span id="line-33">            <span class="k">font-size</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-34">            <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-35">        <span class="p">}</span>
</span><span id="line-36">
</span><span id="line-37">        <span class="nt">p</span> <span class="p">{</span>
</span><span id="line-38">            <span class="k">font-size</span><span class="p">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-39">            <span class="k">line-height</span><span class="p">:</span> <span class="mf">1.6</span><span class="p">;</span>
</span><span id="line-40">            <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-41">        <span class="p">}</span>
</span><span id="line-42">
</span><span id="line-43">        <span class="nt">button</span> <span class="p">{</span>
</span><span id="line-44">            <span class="k">background-color</span><span class="p">:</span> <span class="mh">#007bff</span><span class="p">;</span>
</span><span id="line-45">            <span class="k">color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
</span><span id="line-46">            <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-47">            <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-48">            <span class="k">font-size</span><span class="p">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-49">            <span class="k">border-radius</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-50">            <span class="k">cursor</span><span class="p">:</span> <span class="kc">pointer</span><span class="p">;</span>
</span><span id="line-51">            <span class="k">transition</span><span class="p">:</span> <span class="k">background-color</span> <span class="mf">0.3</span><span class="kt">s</span> <span class="kc">ease</span><span class="p">;</span>
</span><span id="line-52">            <span class="k">margin-top</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-53">            <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-54">        <span class="p">}</span>
</span><span id="line-55">
</span><span id="line-56">        <span class="nt">button</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-57">            <span class="k">background-color</span><span class="p">:</span> <span class="mh">#0056b3</span><span class="p">;</span>
</span><span id="line-58">        <span class="p">}</span>
</span><span id="line-59">
</span><span id="line-60">        <span class="p">.</span><span class="nc">slide</span> <span class="p">{</span>
</span><span id="line-61">            <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-62">        <span class="p">}</span>
</span><span id="line-63">
</span><span id="line-64">        <span class="p">.</span><span class="nc">slide</span><span class="p">.</span><span class="nc">active</span> <span class="p">{</span>
</span><span id="line-65">            <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
</span><span id="line-66">        <span class="p">}</span>
</span><span id="line-67">
</span><span id="line-68">        <span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
</span><span id="line-69">            <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-70">            <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
</span><span id="line-71">        <span class="p">}</span>
</span><span id="line-72">
</span><span id="line-73">        <span class="p">.</span><span class="nc">check-item</span> <span class="p">{</span>
</span><span id="line-74">            <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-75">            <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-76">            <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-77">
</span><span id="line-78">        <span class="p">}</span>
</span><span id="line-79">
</span><span id="line-80">        <span class="p">.</span><span class="nc">round</span> <span class="p">{</span>
</span><span id="line-81">            <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span>
</span><span id="line-82">            <span class="k">margin-right</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-83">            <span class="c">/* Space between the checkbox and the label */</span>
</span><span id="line-84">        <span class="p">}</span>
</span><span id="line-85">
</span><span id="line-86">        <span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
</span><span id="line-87">            <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-88">            <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
</span><span id="line-89">            <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-90">        <span class="p">}</span>
</span><span id="line-91">
</span><span id="line-92">        <span class="p">.</span><span class="nc">scrollable-content</span> <span class="p">{</span>
</span><span id="line-93">            <span class="k">max-height</span><span class="p">:</span> <span class="n">fit-content</span><span class="p">;</span>
</span><span id="line-94">            <span class="k">max-width</span><span class="p">:</span> <span class="n">fit-content</span><span class="p">;</span>
</span><span id="line-95">            <span class="c">/* Adjust this value as needed */</span>
</span><span id="line-96">            <span class="k">overflow-y</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span><span id="line-97">            <span class="k">padding-right</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-98">            <span class="c">/* Optional: Add some padding to avoid scrollbar overlap */</span>
</span><span id="line-99">        <span class="p">}</span>
</span><span id="line-100">
</span><span id="line-101">        <span class="p">.</span><span class="nc">check-item</span> <span class="p">{</span>
</span><span id="line-102">            <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-103">            <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-104">            <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-105">        <span class="p">}</span>
</span><span id="line-106">
</span><span id="line-107">        <span class="p">.</span><span class="nc">round</span> <span class="p">{</span>
</span><span id="line-108">            <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span>
</span><span id="line-109">            <span class="k">margin-right</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-110">            <span class="c">/* Space between the checkbox and the info */</span>
</span><span id="line-111">            <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-112">            <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-113">            <span class="c">/* Centering the checkbox vertically */</span>
</span><span id="line-114">        <span class="p">}</span>
</span><span id="line-115">
</span><span id="line-116">        <span class="p">.</span><span class="nc">round</span> <span class="nt">label</span> <span class="p">{</span>
</span><span id="line-117">            <span class="k">background-color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
</span><span id="line-118">            <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ccc</span><span class="p">;</span>
</span><span id="line-119">            <span class="k">border-radius</span><span class="p">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-120">            <span class="k">cursor</span><span class="p">:</span> <span class="kc">pointer</span><span class="p">;</span>
</span><span id="line-121">            <span class="k">height</span><span class="p">:</span> <span class="mi">28</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-122">            <span class="k">width</span><span class="p">:</span> <span class="mi">28</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-123">            <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-124">            <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-125">            <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-126">        <span class="p">}</span>
</span><span id="line-127">
</span><span id="line-128">        <span class="p">.</span><span class="nc">round</span> <span class="nt">label</span><span class="p">:</span><span class="nd">after</span> <span class="p">{</span>
</span><span id="line-129">            <span class="k">border</span><span class="p">:</span> <span class="mi">2</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#fff</span><span class="p">;</span>
</span><span id="line-130">            <span class="k">border-top</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-131">            <span class="k">border-right</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span><span id="line-132">            <span class="k">content</span><span class="p">:</span> <span class="s2">""</span><span class="p">;</span>
</span><span id="line-133">            <span class="k">height</span><span class="p">:</span> <span class="mi">6</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-134">            <span class="k">width</span><span class="p">:</span> <span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-135">            <span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="nv">-45deg</span><span class="p">);</span>
</span><span id="line-136">            <span class="k">opacity</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="line-137">            <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
</span><span id="line-138">            <span class="k">top</span><span class="p">:</span> <span class="mi">7</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-139">            <span class="k">left</span><span class="p">:</span> <span class="mi">7</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-140">        <span class="p">}</span>
</span><span id="line-141">
</span><span id="line-142">        <span class="p">.</span><span class="nc">round</span> <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="s2">"checkbox"</span><span class="o">]</span> <span class="p">{</span>
</span><span id="line-143">            <span class="k">visibility</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span><span id="line-144">        <span class="p">}</span>
</span><span id="line-145">
</span><span id="line-146">        <span class="p">.</span><span class="nc">round</span> <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="s2">"checkbox"</span><span class="o">]</span><span class="p">:</span><span class="nd">checked</span><span class="o">+</span><span class="nt">label</span> <span class="p">{</span>
</span><span id="line-147">            <span class="k">background-color</span><span class="p">:</span> <span class="mh">#66bb6a</span><span class="p">;</span>
</span><span id="line-148">            <span class="k">border-color</span><span class="p">:</span> <span class="mh">#66bb6a</span><span class="p">;</span>
</span><span id="line-149">        <span class="p">}</span>
</span><span id="line-150">
</span><span id="line-151">        <span class="p">.</span><span class="nc">round</span> <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="s2">"checkbox"</span><span class="o">]</span><span class="p">:</span><span class="nd">checked</span><span class="o">+</span><span class="nt">label</span><span class="p">:</span><span class="nd">after</span> <span class="p">{</span>
</span><span id="line-152">            <span class="k">opacity</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
</span><span id="line-153">        <span class="p">}</span>
</span><span id="line-154">
</span><span id="line-155">        <span class="p">.</span><span class="nc">check-info</span> <span class="p">{</span>
</span><span id="line-156">            <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span><span id="line-157">            <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">row</span><span class="p">;</span>
</span><span id="line-158">            <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-159">        <span class="p">}</span>
</span><span id="line-160">
</span><span id="line-161">        <span class="p">.</span><span class="nc">check-label</span><span class="o">,</span>
</span><span id="line-162">        <span class="p">.</span><span class="nc">status</span> <span class="p">{</span>
</span><span id="line-163">            <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="line-164">            <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-165">            <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">row</span><span class="p">;</span>
</span><span id="line-166">        <span class="p">}</span>
</span><span id="line-167">
</span><span id="line-168">        <span class="c">/* Mobile Styles */</span>
</span><span id="line-169">        <span class="p">@</span><span class="k">media</span> <span class="o">(</span><span class="nt">max-width</span><span class="o">:</span> <span class="nt">600px</span><span class="o">)</span> <span class="p">{</span>
</span><span id="line-170">            <span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
</span><span id="line-171">                <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-172">            <span class="p">}</span>
</span><span id="line-173">
</span><span id="line-174">            <span class="nt">h1</span> <span class="p">{</span>
</span><span id="line-175">                <span class="k">font-size</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-176">            <span class="p">}</span>
</span><span id="line-177">
</span><span id="line-178">            <span class="nt">p</span> <span class="p">{</span>
</span><span id="line-179">                <span class="k">font-size</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-180">            <span class="p">}</span>
</span><span id="line-181">
</span><span id="line-182">            <span class="nt">button</span> <span class="p">{</span>
</span><span id="line-183">                <span class="k">font-size</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-184">                <span class="k">padding</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-185">            <span class="p">}</span>
</span><span id="line-186">        <span class="p">}</span>
</span><span id="line-187">
</span><span id="line-188">        <span class="c">/* Style for usersTable */</span>
</span><span id="line-189">        <span class="p">#</span><span class="nn">usersTable</span> <span class="p">{</span>
</span><span id="line-190">            <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="line-191">            <span class="k">border-collapse</span><span class="p">:</span> <span class="kc">collapse</span><span class="p">;</span>
</span><span id="line-192">        <span class="p">}</span>
</span><span id="line-193">
</span><span id="line-194">        <span class="p">#</span><span class="nn">usersTable</span> <span class="nt">th</span><span class="o">,</span>
</span><span id="line-195">        <span class="p">#</span><span class="nn">usersTable</span> <span class="nt">td</span> <span class="p">{</span>
</span><span id="line-196">            <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ddd</span><span class="p">;</span>
</span><span id="line-197">            <span class="k">padding</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
</span><span id="line-198">        <span class="p">}</span>
</span><span id="line-199">
</span><span id="line-200">        <span class="p">#</span><span class="nn">usersTable</span> <span class="nt">th</span> <span class="p">{</span>
</span><span id="line-201">            <span class="k">background-color</span><span class="p">:</span> <span class="mh">#007bff</span><span class="p">;</span>
</span><span id="line-202">            <span class="k">color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
</span><span id="line-203">            <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-204">        <span class="p">}</span>
</span><span id="line-205">
</span><span id="line-206">        <span class="p">#</span><span class="nn">usersTable</span> <span class="nt">tr</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">even</span><span class="o">)</span> <span class="p">{</span>
</span><span id="line-207">            <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f2f2f2</span><span class="p">;</span>
</span><span id="line-208">        <span class="p">}</span>
</span><span id="line-209">
</span><span id="line-210">        <span class="p">#</span><span class="nn">usersTable</span> <span class="nt">tr</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span id="line-211">            <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddd</span><span class="p">;</span>
</span><span id="line-212">        <span class="p">}</span>
</span><span id="line-213">
</span><span id="line-214">        <span class="p">#</span><span class="nn">usersTable</span> <span class="nt">td</span> <span class="p">{</span>
</span><span id="line-215">            <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span><span id="line-216">        <span class="p">}</span>
</span><span id="line-217">    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span><span id="line-218"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span><span id="line-219">
</span><span id="line-220"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span><span id="line-221">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"container"</span><span class="p">&gt;</span>
</span><span id="line-222">        <span class="c">&lt;!-- Slide 1: Welcome and Start Setup --&gt;</span>
</span><span id="line-223">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"slide active"</span> <span class="na">id</span><span class="o">=</span><span class="s">"slide1"</span><span class="p">&gt;</span>
</span><span id="line-224">            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Welcome to Project Postman<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span id="line-225">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Click the button below to start the setup process.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-226">            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"nextSlide()"</span><span class="p">&gt;</span>Start Setup<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-227">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-228">
</span><span id="line-229">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"slide"</span> <span class="na">id</span><span class="o">=</span><span class="s">"slide2"</span><span class="p">&gt;</span>
</span><span id="line-230">            <span class="c">&lt;!-- Slide 2 content --&gt;</span>
</span><span id="line-231">            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Sensors and Modules<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span id="line-232">            <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Device Status<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span id="line-233">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-item"</span><span class="p">&gt;</span>
</span><span id="line-234">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"round"</span><span class="p">&gt;</span>
</span><span id="line-235">                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">id</span><span class="o">=</span><span class="s">"sd-card-checkbox"</span> <span class="na">disabled</span><span class="p">&gt;</span>
</span><span id="line-236">                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"sd-card-checkbox"</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-237">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-238">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-info"</span><span class="p">&gt;</span>
</span><span id="line-239">                    <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-label"</span><span class="p">&gt;</span>SD Card<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span><span id="line-240">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"status"</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>.........................................................<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-241">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"status"</span> <span class="na">id</span><span class="o">=</span><span class="s">"sd-card-status"</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-242">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-243">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-244">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-item"</span><span class="p">&gt;</span>
</span><span id="line-245">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"round"</span><span class="p">&gt;</span>
</span><span id="line-246">                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">id</span><span class="o">=</span><span class="s">"grove-ai-checkbox"</span> <span class="na">disabled</span><span class="p">&gt;</span>
</span><span id="line-247">                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"grove-ai-checkbox"</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-248">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-249">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-info"</span><span class="p">&gt;</span>
</span><span id="line-250">                    <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-label"</span><span class="p">&gt;</span>AI Sensor<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span><span id="line-251">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"status"</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>.......................................................<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-252">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"status"</span> <span class="na">id</span><span class="o">=</span><span class="s">"grove-ai-status"</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-253">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-254">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-255">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-item"</span><span class="p">&gt;</span>
</span><span id="line-256">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"round"</span><span class="p">&gt;</span>
</span><span id="line-257">                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">id</span><span class="o">=</span><span class="s">"nrf45-checkbox"</span> <span class="na">disabled</span><span class="p">&gt;</span>
</span><span id="line-258">                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"nrf45-checkbox"</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-259">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-260">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-info"</span><span class="p">&gt;</span>
</span><span id="line-261">                    <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-label"</span><span class="p">&gt;</span>nRF45<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span><span id="line-262">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"status"</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>............................................................<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-263">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"status"</span> <span class="na">id</span><span class="o">=</span><span class="s">"nrf45-status"</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-264">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-265">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-266">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-item"</span><span class="p">&gt;</span>
</span><span id="line-267">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"round"</span><span class="p">&gt;</span>
</span><span id="line-268">                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">id</span><span class="o">=</span><span class="s">"unihiker-checkbox"</span> <span class="na">disabled</span><span class="p">&gt;</span>
</span><span id="line-269">                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"unihiker-checkbox"</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-270">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-271">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-info"</span><span class="p">&gt;</span>
</span><span id="line-272">                    <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="s">"check-label"</span><span class="p">&gt;</span>Unihiker<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
</span><span id="line-273">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"status"</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>..........................................................<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-274">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"status"</span> <span class="na">id</span><span class="o">=</span><span class="s">"unihiker-status"</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-275">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-276">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-277">            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"previousSlide()"</span><span class="p">&gt;</span>Previous<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-278">            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"nextSlide()"</span><span class="p">&gt;</span>Next<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-279">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-280">
</span><span id="line-281">        <span class="c">&lt;!-- Slide 3: Device Info and WiFi Setup --&gt;</span>
</span><span id="line-282">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"slide3"</span> <span class="na">class</span><span class="o">=</span><span class="s">"slide"</span><span class="p">&gt;</span>
</span><span id="line-283">            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Device Info and WiFi Setup<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span id="line-284">            <span class="c">&lt;!-- Display device info here --&gt;</span>
</span><span id="line-285">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Device Model: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"device-model"</span><span class="p">&gt;</span>%DeviceModel%<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-286">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Firmware Version: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"firmware-version"</span><span class="p">&gt;</span>%Version%<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-287">            <span class="c">&lt;!-- Add WiFi setup form here --&gt;</span>
</span><span id="line-288">            <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">"wifiSetupForm"</span> <span class="na">onsubmit</span><span class="o">=</span><span class="s">"connectToNetwork(); return false;"</span><span class="p">&gt;</span>
</span><span id="line-289">                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"network-list"</span><span class="p">&gt;</span>SSID:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-290">                <span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">"network-list"</span> <span class="na">onchange</span><span class="o">=</span><span class="s">"handleSelectionChange()"</span><span class="p">&gt;</span>
</span><span id="line-291">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">""</span><span class="p">&gt;</span>Select an SSID<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-292">                    <span class="c">&lt;!-- Network options will be populated here --&gt;</span>
</span><span id="line-293">                <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</span><span id="line-294">                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"manual-ssid"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"Or type SSID here"</span><span class="p">&gt;</span>
</span><span id="line-295">                <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-296">                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"password"</span><span class="p">&gt;</span>Password:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-297">                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"password"</span> <span class="na">id</span><span class="o">=</span><span class="s">"password"</span> <span class="na">name</span><span class="o">=</span><span class="s">"password"</span><span class="p">&gt;</span>
</span><span id="line-298">                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">"show"</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"togglePasswordVisibility()"</span><span class="p">&gt;</span>
</span><span id="line-299">                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"show"</span><span class="p">&gt;</span>View Password<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-300">                <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-301">                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"scanNetworks()"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Scan Networks"</span><span class="p">&gt;</span>
</span><span id="line-302">                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">id</span><span class="o">=</span><span class="s">"connect-btn"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Connect"</span><span class="p">&gt;</span>
</span><span id="line-303">            <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span id="line-304">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>WiFi:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"wifi-status"</span><span class="p">&gt;</span>$wificonnected<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-305">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Signal Strength:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"signal-strength"</span><span class="p">&gt;</span>$signalstrength<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-306">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>SSID:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"ssid"</span><span class="p">&gt;</span>$ssid<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-307">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>WiFi Password:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"wifi-password"</span><span class="p">&gt;</span>$wifipassword<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-308">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>IP Address:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"ip-address"</span><span class="p">&gt;</span>$IPAddress<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-309">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Hostname:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"hostname"</span><span class="p">&gt;</span>$hostname<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-310">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"date-time"</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span> %TimeDate%<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-311">            <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">"date-time-form"</span> <span class="na">onsubmit</span><span class="o">=</span><span class="s">"setTimezone(); return false;"</span><span class="p">&gt;</span>
</span><span id="line-312">                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"timezone"</span><span class="p">&gt;</span>Timezone:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-313">                <span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">"timezone"</span><span class="p">&gt;</span>
</span><span id="line-314">                    <span class="p">&lt;</span><span class="nt">option</span><span class="p">&gt;</span>Select Timezone<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-315">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Pacific/Midway"</span><span class="p">&gt;</span>(GMT-11:00) Midway Island, Samoa<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-316">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Pacific/Honolulu"</span><span class="p">&gt;</span>(GMT-10:00) Hawaii<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-317">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Anchorage"</span><span class="p">&gt;</span>(GMT-09:00) Alaska<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-318">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Los_Angeles"</span><span class="p">&gt;</span>(GMT-08:00) Pacific Time (US <span class="err">&amp;</span> Canada)<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-319">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Phoenix"</span><span class="p">&gt;</span>(GMT-07:00) Arizona<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-320">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Denver"</span><span class="p">&gt;</span>(GMT-07:00) Mountain Time (US <span class="err">&amp;</span> Canada)<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-321">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Chicago"</span><span class="p">&gt;</span>(GMT-06:00) Central Time (US <span class="err">&amp;</span> Canada)<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-322">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/New_York"</span><span class="p">&gt;</span>(GMT-05:00) Eastern Time (US <span class="err">&amp;</span> Canada)<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-323">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Caracas"</span><span class="p">&gt;</span>(GMT-04:30) Caracas<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-324">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Halifax"</span><span class="p">&gt;</span>(GMT-04:00) Atlantic Time (Canada)<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-325">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Santo_Domingo"</span><span class="p">&gt;</span>(GMT-04:00) Santo Domingo<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-326">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Argentina/Buenos_Aires"</span><span class="p">&gt;</span>(GMT-03:00) Buenos Aires, Georgetown<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-327">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Sao_Paulo"</span><span class="p">&gt;</span>(GMT-03:00) Brasilia<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-328">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"America/Noronha"</span><span class="p">&gt;</span>(GMT-02:00) Mid-Atlantic<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-329">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Atlantic/Azores"</span><span class="p">&gt;</span>(GMT-01:00) Azores<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-330">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Atlantic/Cape_Verde"</span><span class="p">&gt;</span>(GMT-01:00) Cape Verde Islands<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-331">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Africa/Casablanca"</span><span class="p">&gt;</span>(GMT+00:00) Casablanca, Monrovia<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-332">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Europe/London"</span><span class="p">&gt;</span>(GMT+00:00) London, Dublin, Edinburgh<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-333">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Europe/Paris"</span><span class="p">&gt;</span>(GMT+01:00) Paris, Berlin, Rome, Madrid<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-334">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Europe/Athens"</span><span class="p">&gt;</span>(GMT+02:00) Athens, Bucharest<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-335">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Africa/Cairo"</span><span class="p">&gt;</span>(GMT+02:00) Cairo<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-336">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Jerusalem"</span><span class="p">&gt;</span>(GMT+02:00) Jerusalem<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-337">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Baghdad"</span><span class="p">&gt;</span>(GMT+03:00) Baghdad<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-338">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Riyadh"</span><span class="p">&gt;</span>(GMT+03:00) Riyadh, Kuwait, Nairobi<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-339">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Tehran"</span><span class="p">&gt;</span>(GMT+03:30) Tehran<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-340">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Dubai"</span><span class="p">&gt;</span>(GMT+04:00) Abu Dhabi, Dubai<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-341">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Baku"</span><span class="p">&gt;</span>(GMT+04:00) Baku, Tbilisi, Yerevan<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-342">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Kabul"</span><span class="p">&gt;</span>(GMT+04:30) Kabul<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-343">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Karachi"</span><span class="p">&gt;</span>(GMT+05:00) Islamabad, Karachi<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-344">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Kolkata"</span><span class="p">&gt;</span>(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-345">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Kathmandu"</span><span class="p">&gt;</span>(GMT+05:45) Kathmandu<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-346">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Dhaka"</span><span class="p">&gt;</span>(GMT+06:00) Dhaka<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-347">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Almaty"</span><span class="p">&gt;</span>(GMT+06:00) Almaty, Novosibirsk<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-348">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Rangoon"</span><span class="p">&gt;</span>(GMT+06:30) Yangon (Rangoon)<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-349">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Bangkok"</span><span class="p">&gt;</span>(GMT+07:00) Bangkok, Hanoi, Jakarta<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-350">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Hong_Kong"</span><span class="p">&gt;</span>(GMT+08:00) Beijing, Hong Kong<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-351">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Krasnoyarsk"</span><span class="p">&gt;</span>(GMT+08:00) Krasnoyarsk, Kuala Lumpur<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-352">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Asia/Tokyo"</span><span class="p">&gt;</span>(GMT+09:00) Tokyo, Seoul<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-353">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Australia/Adelaide"</span><span class="p">&gt;</span>(GMT+09:30) Adelaide<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-354">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Australia/Sydney"</span><span class="p">&gt;</span>(GMT+10:00) Sydney, Melbourne<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-355">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Pacific/Guam"</span><span class="p">&gt;</span>(GMT+10:00) Guam, Port Moresby<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-356">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Australia/Brisbane"</span><span class="p">&gt;</span>(GMT+10:00) Brisbane<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-357">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Australia/Darwin"</span><span class="p">&gt;</span>(GMT+09:30) Darwin<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-358">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Pacific/Noumea"</span><span class="p">&gt;</span>(GMT+11:00) Noumea, Vladivostok<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-359">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Pacific/Auckland"</span><span class="p">&gt;</span>(GMT+12:00) Auckland, Wellington<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-360">                    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"Pacific/Tongatapu"</span><span class="p">&gt;</span>(GMT+13:00) Nuku'alofa<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
</span><span id="line-361">                <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</span><span id="line-362">                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"daylight-savings"</span><span class="p">&gt;</span>Daylight Savings<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-363">                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">id</span><span class="o">=</span><span class="s">"daylight-savings"</span> <span class="p">/&gt;</span>
</span><span id="line-364">                <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-365">                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"time-offset"</span><span class="p">&gt;</span>Time Offset:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-366">                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"number"</span> <span class="na">id</span><span class="o">=</span><span class="s">"time-offset"</span> <span class="na">name</span><span class="o">=</span><span class="s">"time-offset"</span> <span class="na">min</span><span class="o">=</span><span class="s">"-12"</span> <span class="na">max</span><span class="o">=</span><span class="s">"12"</span> <span class="na">step</span><span class="o">=</span><span class="s">"1"</span> <span class="p">/&gt;</span>
</span><span id="line-367">                <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-368">                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">id</span><span class="o">=</span><span class="s">"set-datetime-btn"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Set Date and Time"</span> <span class="p">/&gt;</span>
</span><span id="line-369">                <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-370">            <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span id="line-371">            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"previousSlide()"</span><span class="p">&gt;</span>Previous<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-372">            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"nextSlide()"</span><span class="p">&gt;</span>Next<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-373">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-374">
</span><span id="line-375">        <span class="c">&lt;!-- Slide 4: User Profile Setup --&gt;</span>
</span><span id="line-376">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"slide4"</span> <span class="na">class</span><span class="o">=</span><span class="s">"slide"</span><span class="p">&gt;</span>
</span><span id="line-377">            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>User Profile Setup<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span id="line-378">            <span class="c">&lt;!-- Add user profile setup form here --&gt;</span>
</span><span id="line-379">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"scrollable-content"</span><span class="p">&gt;</span>
</span><span id="line-380">                <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">"userProfileForm"</span> <span class="na">onsubmit</span><span class="o">=</span><span class="s">"addUser(event)"</span><span class="p">&gt;</span>
</span><span id="line-381">                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"username"</span><span class="p">&gt;</span>Username:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-382">                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"username"</span> <span class="na">name</span><span class="o">=</span><span class="s">"username"</span> <span class="na">required</span><span class="p">&gt;</span>
</span><span id="line-383">                    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-384">                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"user-password"</span><span class="p">&gt;</span>Password:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-385">                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"password"</span> <span class="na">id</span><span class="o">=</span><span class="s">"user-password"</span> <span class="na">name</span><span class="o">=</span><span class="s">"password"</span> <span class="na">required</span><span class="p">&gt;</span>
</span><span id="line-386">                    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-387">                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"email"</span><span class="p">&gt;</span>Email:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-388">                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"email"</span> <span class="na">id</span><span class="o">=</span><span class="s">"email"</span> <span class="na">name</span><span class="o">=</span><span class="s">"email"</span> <span class="na">required</span><span class="p">&gt;</span>
</span><span id="line-389">                    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-390">                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"phonenumber"</span><span class="p">&gt;</span>Phone Number:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-391">                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"tel"</span> <span class="na">id</span><span class="o">=</span><span class="s">"phonenumber"</span> <span class="na">name</span><span class="o">=</span><span class="s">"phonenumber"</span> <span class="na">required</span><span class="p">&gt;</span>
</span><span id="line-392">                    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-393">                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"pin"</span><span class="p">&gt;</span>PIN (6-digits):<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-394">                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">id</span><span class="o">=</span><span class="s">"pin"</span> <span class="na">name</span><span class="o">=</span><span class="s">"pin"</span> <span class="na">pattern</span><span class="o">=</span><span class="s">"[0-9]{6}"</span> <span class="na">required</span><span class="p">&gt;</span>
</span><span id="line-395">                    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-396">                    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"admin"</span><span class="p">&gt;</span>Admin:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span><span id="line-397">                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">id</span><span class="o">=</span><span class="s">"admin"</span> <span class="na">name</span><span class="o">=</span><span class="s">"admin"</span><span class="p">&gt;</span>
</span><span id="line-398">                    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-399">                    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span><span class="p">&gt;</span>Add User<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-400">                <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span id="line-401">
</span><span id="line-402">                <span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">"usersTable"</span> <span class="na">border</span><span class="o">=</span><span class="s">"1"</span><span class="p">&gt;</span>
</span><span id="line-403">                    <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
</span><span id="line-404">                        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-405">                            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>ID<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-406">                            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Username<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-407">                            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Password<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-408">                            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Email<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-409">                            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Phone Number<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-410">                            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>PIN<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-411">                            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Admin<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-412">                            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Actions<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="line-413">                        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-414">                    <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
</span><span id="line-415">                    <span class="p">&lt;</span><span class="nt">tbody</span> <span class="na">id</span><span class="o">=</span><span class="s">"usersTableBody"</span><span class="p">&gt;</span>
</span><span id="line-416">                        <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user0"</span><span class="p">&gt;</span>
</span><span id="line-417">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-418">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-419">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-420">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-421">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-422">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-423">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-424">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-425">                        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-426">                        <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user1"</span><span class="p">&gt;</span>
</span><span id="line-427">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-428">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-429">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-430">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-431">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-432">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-433">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-434">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-435">                        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-436">                        <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user2"</span><span class="p">&gt;</span>
</span><span id="line-437">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>2<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-438">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-439">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-440">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-441">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-442">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-443">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-444">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-445">                        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-446">                        <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user3"</span><span class="p">&gt;</span>
</span><span id="line-447">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>3<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-448">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-449">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-450">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-451">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-452">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-453">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-454">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-455">                        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-456">                        <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user4"</span><span class="p">&gt;</span>
</span><span id="line-457">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>4<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-458">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-459">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-460">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-461">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-462">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-463">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-464">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-465">                        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-466">                        <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">id</span><span class="o">=</span><span class="s">"user5"</span><span class="p">&gt;</span>
</span><span id="line-467">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-468">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-469">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-470">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-471">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-472">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-473">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-474">                            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="line-475">                        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="line-476">                    <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span><span id="line-477">                <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</span><span id="line-478">                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"previousSlide()"</span><span class="p">&gt;</span>Previous<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-479">                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"nextSlide()"</span><span class="p">&gt;</span>Next<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-480">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-481">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-482">
</span><span id="line-483">        <span class="c">&lt;!-- Slide 5: Finish Setup --&gt;</span>
</span><span id="line-484">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"slide5"</span> <span class="na">class</span><span class="o">=</span><span class="s">"slide"</span><span class="p">&gt;</span>
</span><span id="line-485">            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Finish Setup<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span id="line-486">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Please confirm your information:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-487">            <span class="c">&lt;!-- Display confirmed information here --&gt;</span>
</span><span id="line-488">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Device Model: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"confirmed-device-model"</span><span class="p">&gt;</span>%DeviceModel%<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-489">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Firmware Version: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"confirmed-firmware-version"</span><span class="p">&gt;</span>%Version%<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-490">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>SSID: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"confirmed-ssid"</span><span class="p">&gt;</span>$data.ssid<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-491">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>WiFi Password: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"confirmed-wifi-password"</span><span class="p">&gt;</span>$wifi_password<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-492">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>IP Address: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"confirmed-ip-address"</span><span class="p">&gt;</span>$data.IP<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-493">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hostname: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"confirmed-hostname"</span><span class="p">&gt;</span>$hostname<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-494">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Timezone: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"confirmed-timezone"</span><span class="p">&gt;</span>$selected_timezone<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-495">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Daylight Savings: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"confirmed-daylight-savings"</span><span class="p">&gt;</span>$daylight_savings<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-496">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Time Offset: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"confirmed-time-offset"</span><span class="p">&gt;</span>$time_offset<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-497">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Date and Time: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"confirmed-date-time"</span><span class="p">&gt;</span>$TimeDate<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-498">            <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span><span id="line-499">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Click the button below to finish the setup:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="line-500">            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"previousSlide()"</span><span class="p">&gt;</span>Previous<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-501">            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"rebootESP()"</span><span class="p">&gt;</span>Finish Setup and Reboot<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="line-502">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-503">
</span><span id="line-504">        <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="line-505">            <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'DOMContentLoaded'</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-506">                <span class="nx">loadDeviceInfo</span><span class="p">();</span>
</span><span id="line-507">            <span class="p">});</span>
</span><span id="line-508">
</span><span id="line-509">            <span class="kd">let</span> <span class="nx">currentSlide</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
</span><span id="line-510">            <span class="kd">const</span> <span class="nx">slides</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'.slide'</span><span class="p">);</span>
</span><span id="line-511">
</span><span id="line-512">            <span class="kd">function</span> <span class="nx">showSlide</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-513">                <span class="nx">slides</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">slide</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-514">                    <span class="nx">slide</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s1">'active'</span><span class="p">,</span> <span class="nx">i</span> <span class="o">===</span> <span class="nx">index</span><span class="p">);</span>
</span><span id="line-515">                <span class="p">});</span>
</span><span id="line-516">                <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">===</span> <span class="mf">1</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-517">                    <span class="nx">updateDeviceStatus</span><span class="p">();</span>
</span><span id="line-518">                <span class="p">}</span>
</span><span id="line-519">                <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">===</span> <span class="mf">3</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-520">                    <span class="nx">loadUsers</span><span class="p">();</span>
</span><span id="line-521">                <span class="p">}</span>
</span><span id="line-522">                <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">===</span> <span class="mf">4</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-523">                    <span class="nx">loadFinishInfo</span><span class="p">();</span>
</span><span id="line-524">                <span class="p">}</span>
</span><span id="line-525">            <span class="p">}</span>
</span><span id="line-526">
</span><span id="line-527">            <span class="kd">function</span> <span class="nx">nextSlide</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-528">                <span class="nx">currentSlide</span> <span class="o">=</span> <span class="p">(</span><span class="nx">currentSlide</span> <span class="o">+</span> <span class="mf">1</span><span class="p">)</span> <span class="o">%</span> <span class="nx">slides</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span id="line-529">                <span class="nx">showSlide</span><span class="p">(</span><span class="nx">currentSlide</span><span class="p">);</span>
</span><span id="line-530">            <span class="p">}</span>
</span><span id="line-531">
</span><span id="line-532">            <span class="kd">function</span> <span class="nx">previousSlide</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-533">                <span class="nx">currentSlide</span> <span class="o">=</span> <span class="p">(</span><span class="nx">currentSlide</span> <span class="o">-</span> <span class="mf">1</span> <span class="o">+</span> <span class="nx">slides</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">%</span> <span class="nx">slides</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span id="line-534">                <span class="nx">showSlide</span><span class="p">(</span><span class="nx">currentSlide</span><span class="p">);</span>
</span><span id="line-535">            <span class="p">}</span>
</span><span id="line-536">
</span><span id="line-537">            <span class="kd">function</span> <span class="nx">togglePasswordVisibility</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-538">                <span class="kd">const</span> <span class="nx">passwordInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'password'</span><span class="p">);</span>
</span><span id="line-539">                <span class="k">if</span> <span class="p">(</span><span class="nx">passwordInput</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">'password'</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-540">                    <span class="nx">passwordInput</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">'text'</span><span class="p">;</span>
</span><span id="line-541">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-542">                    <span class="nx">passwordInput</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">'password'</span><span class="p">;</span>
</span><span id="line-543">                <span class="p">}</span>
</span><span id="line-544">            <span class="p">}</span>
</span><span id="line-545">
</span><span id="line-546">            <span class="kd">function</span> <span class="nx">scanNetworks</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// Function to scan networks and populate the dropdown</span>
</span><span id="line-547">                <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/scan-networks'</span><span class="p">)</span>
</span><span id="line-548">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span id="line-549">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">networks</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-550">                        <span class="kd">const</span> <span class="nx">networkList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'network-list'</span><span class="p">);</span>
</span><span id="line-551">                        <span class="nx">networkList</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'&lt;option value=""&gt;Select an SSID&lt;/option&gt;'</span><span class="p">;</span> <span class="c1">// Reset dropdown</span>
</span><span id="line-552">
</span><span id="line-553">                        <span class="nx">networks</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">network</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-554">                            <span class="kd">const</span> <span class="nx">option</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'option'</span><span class="p">);</span>
</span><span id="line-555">                            <span class="nx">option</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">network</span><span class="p">.</span><span class="nx">ssid</span><span class="si">}</span><span class="sb"> (</span><span class="si">${</span><span class="nx">network</span><span class="p">.</span><span class="nx">signal_strength</span><span class="si">}</span><span class="sb"> dBm)`</span><span class="p">;</span>
</span><span id="line-556">                            <span class="nx">option</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">network</span><span class="p">.</span><span class="nx">ssid</span><span class="p">;</span> <span class="c1">// Set value to SSID</span>
</span><span id="line-557">                            <span class="nx">networkList</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">option</span><span class="p">);</span>
</span><span id="line-558">                        <span class="p">});</span>
</span><span id="line-559">                    <span class="p">})</span>
</span><span id="line-560">                    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-561">                        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching network list:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span><span id="line-562">                    <span class="p">});</span>
</span><span id="line-563">            <span class="p">}</span>
</span><span id="line-564">
</span><span id="line-565">            <span class="kd">function</span> <span class="nx">connectToNetwork</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-566">                <span class="kd">const</span> <span class="nx">networkList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'network-list'</span><span class="p">);</span>
</span><span id="line-567">                <span class="kd">const</span> <span class="nx">manualSSID</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'manual-ssid'</span><span class="p">).</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
</span><span id="line-568">                <span class="kd">const</span> <span class="nx">ssid</span> <span class="o">=</span> <span class="nx">networkList</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="nx">manualSSID</span><span class="p">;</span> <span class="c1">// Use selected SSID or manual input</span>
</span><span id="line-569">                <span class="kd">const</span> <span class="nx">password</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'password'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="line-570">
</span><span id="line-571">                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ssid</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-572">                    <span class="nx">alert</span><span class="p">(</span><span class="s1">'Please enter or select an SSID.'</span><span class="p">);</span>
</span><span id="line-573">                    <span class="k">return</span><span class="p">;</span>
</span><span id="line-574">                <span class="p">}</span>
</span><span id="line-575">
</span><span id="line-576">                <span class="c1">// Send connection request to the server</span>
</span><span id="line-577">                <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/connect'</span><span class="p">,</span> <span class="p">{</span>
</span><span id="line-578">                    <span class="nx">method</span><span class="o">:</span> <span class="s1">'POST'</span><span class="p">,</span>
</span><span id="line-579">                    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
</span><span id="line-580">                        <span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
</span><span id="line-581">                    <span class="p">},</span>
</span><span id="line-582">                    <span class="nx">body</span><span class="o">:</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="nx">ssid</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}),</span>
</span><span id="line-583">                <span class="p">})</span>
</span><span id="line-584">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-585">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-586">                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Connection result:'</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
</span><span id="line-587">                        <span class="c1">// Handle connection result</span>
</span><span id="line-588">                    <span class="p">})</span>
</span><span id="line-589">                    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-590">                        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error connecting to network:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span><span id="line-591">                    <span class="p">});</span>
</span><span id="line-592">            <span class="p">}</span>
</span><span id="line-593">
</span><span id="line-594">            <span class="kd">function</span> <span class="nx">handleSelectionChange</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// Function to handle changes in the dropdown or input field</span>
</span><span id="line-595">                <span class="kd">const</span> <span class="nx">networkList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'network-list'</span><span class="p">);</span>
</span><span id="line-596">                <span class="kd">const</span> <span class="nx">manualSSID</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'manual-ssid'</span><span class="p">);</span>
</span><span id="line-597">
</span><span id="line-598">                <span class="c1">// If a dropdown option is selected, clear the input field</span>
</span><span id="line-599">                <span class="k">if</span> <span class="p">(</span><span class="nx">networkList</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-600">                    <span class="nx">manualSSID</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span> <span class="c1">// Clear manual input</span>
</span><span id="line-601">                <span class="p">}</span>
</span><span id="line-602">            <span class="p">}</span>
</span><span id="line-603">
</span><span id="line-604">            <span class="kd">function</span> <span class="nx">setTimezone</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-605">                <span class="kd">const</span> <span class="nx">timezoneSelect</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'timezone'</span><span class="p">);</span>
</span><span id="line-606">                <span class="kd">const</span> <span class="nx">selectedTimezone</span> <span class="o">=</span> <span class="nx">timezoneSelect</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="line-607">
</span><span id="line-608">                <span class="kd">const</span> <span class="nx">timeOffsetInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'time-offset'</span><span class="p">);</span>
</span><span id="line-609">                <span class="kd">const</span> <span class="nx">timeOffset</span> <span class="o">=</span> <span class="nx">timeOffsetInput</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="line-610">
</span><span id="line-611">                <span class="kd">const</span> <span class="nx">daylightSavingsCheckbox</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'daylight-savings'</span><span class="p">);</span>
</span><span id="line-612">                <span class="kd">const</span> <span class="nx">daylightSavings</span> <span class="o">=</span> <span class="nx">daylightSavingsCheckbox</span><span class="p">.</span><span class="nx">checked</span> <span class="o">?</span> <span class="mf">3600</span> <span class="o">:</span> <span class="mf">0</span><span class="p">;</span> <span class="c1">// 3600 seconds = 1 hour</span>
</span><span id="line-613">
</span><span id="line-614">                <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="sb">`/set-timezone?timezone=</span><span class="si">${</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">selectedTimezone</span><span class="p">)</span><span class="si">}</span><span class="sb">&amp;gmtoffset=</span><span class="si">${</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">timeOffset</span><span class="p">)</span><span class="si">}</span><span class="sb">&amp;daylightoffset=</span><span class="si">${</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">daylightSavings</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span id="line-615">
</span><span id="line-616">                <span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
</span><span id="line-617">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-618">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-619">                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Timezone set result:'</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
</span><span id="line-620">                        <span class="c1">// Display the result on the webpage</span>
</span><span id="line-621">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'date-time'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
</span><span id="line-622">                    <span class="p">})</span>
</span><span id="line-623">                    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-624">                        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error setting timezone:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span><span id="line-625">                    <span class="p">});</span>
</span><span id="line-626">            <span class="p">}</span>
</span><span id="line-627">
</span><span id="line-628">            <span class="kd">function</span> <span class="nx">loadDeviceInfo</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-629">                <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/device-info'</span><span class="p">)</span>
</span><span id="line-630">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span id="line-631">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-632">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'device-model'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">deviceModel</span><span class="p">;</span>
</span><span id="line-633">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'firmware-version'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">firmware</span><span class="p">;</span>
</span><span id="line-634">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'wifi-status'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">wificonnected</span> <span class="o">?</span> <span class="s1">'Connected'</span> <span class="o">:</span> <span class="s1">'Disconnected'</span><span class="p">;</span>
</span><span id="line-635">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'signal-strength'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">signalstrength</span><span class="p">;</span>
</span><span id="line-636">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ssid'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">ssid</span><span class="p">;</span>
</span><span id="line-637">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'wifi-password'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">wifi_password</span><span class="p">;</span>
</span><span id="line-638">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ip-address'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">IP</span><span class="p">;</span>
</span><span id="line-639">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'hostname'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">hostname</span><span class="p">;</span>
</span><span id="line-640">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'date-time'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">time</span><span class="p">;</span>
</span><span id="line-641">                    <span class="p">})</span>
</span><span id="line-642">                    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-643">                        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching device info:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span><span id="line-644">                    <span class="p">});</span>
</span><span id="line-645">            <span class="p">}</span>
</span><span id="line-646">
</span><span id="line-647">            <span class="kd">function</span> <span class="nx">updateDeviceStatus</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-648">                <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/module-status'</span><span class="p">)</span>
</span><span id="line-649">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span id="line-650">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-651">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'sd-card-checkbox'</span><span class="p">).</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">sdCard</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s1">'Connected'</span><span class="p">;</span>
</span><span id="line-652">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'sd-card-status'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">sdCard</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
</span><span id="line-653">
</span><span id="line-654">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'grove-ai-checkbox'</span><span class="p">).</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">aiSensor</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s1">'Connected'</span><span class="p">;</span>
</span><span id="line-655">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'grove-ai-status'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">aiSensor</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
</span><span id="line-656">
</span><span id="line-657">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'nrf45-checkbox'</span><span class="p">).</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">nrf45</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s1">'Connected'</span><span class="p">;</span>
</span><span id="line-658">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'nrf45-status'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">nrf45</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
</span><span id="line-659">
</span><span id="line-660">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'unihiker-checkbox'</span><span class="p">).</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">unihiker</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s1">'Connected'</span><span class="p">;</span>
</span><span id="line-661">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'unihiker-status'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">unihiker</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
</span><span id="line-662">                    <span class="p">})</span>
</span><span id="line-663">                    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching device status:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-664">            <span class="p">}</span>
</span><span id="line-665">
</span><span id="line-666">            <span class="kd">function</span> <span class="nx">rebootESP</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-667">                <span class="k">if</span> <span class="p">(</span><span class="nx">confirm</span><span class="p">(</span><span class="s2">"Are you sure you want to reboot the ESP32S3?"</span><span class="p">))</span> <span class="p">{</span>
</span><span id="line-668">                    <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/finish'</span><span class="p">)</span>
</span><span id="line-669">                        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-670">                        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">text</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Reboot command sent:'</span><span class="p">,</span> <span class="nx">text</span><span class="p">))</span>
</span><span id="line-671">                        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error sending reboot command:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-672">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-673">                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Reboot canceled.'</span><span class="p">);</span>
</span><span id="line-674">                <span class="p">}</span>
</span><span id="line-675">            <span class="p">}</span>
</span><span id="line-676">
</span><span id="line-677">            <span class="kd">function</span> <span class="nx">loadUsers</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-678">                <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/manage-users'</span><span class="p">)</span>
</span><span id="line-679">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span id="line-680">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-681">                        <span class="kd">const</span> <span class="nx">usersTableBody</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'usersTableBody'</span><span class="p">);</span>
</span><span id="line-682">                        <span class="nx">usersTableBody</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span> <span class="c1">// Clear existing rows</span>
</span><span id="line-683">
</span><span id="line-684">                        <span class="nx">data</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">user</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-685">                            <span class="kd">const</span> <span class="nx">row</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">);</span>
</span><span id="line-686">                            <span class="nx">row</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`</span>
</span><span id="line-687"><span class="sb">                        &lt;td&gt;</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">&lt;/td&gt;</span>
</span><span id="line-688"><span class="sb">                        &lt;td&gt;</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="sb">&lt;/td&gt;</span>
</span><span id="line-689"><span class="sb">                        &lt;td&gt;</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="si">}</span><span class="sb">&lt;/td&gt;</span>
</span><span id="line-690"><span class="sb">                        &lt;td&gt;</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="si">}</span><span class="sb">&lt;/td&gt;</span>
</span><span id="line-691"><span class="sb">                        &lt;td&gt;</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">phonenumber</span><span class="si">}</span><span class="sb">&lt;/td&gt;</span>
</span><span id="line-692"><span class="sb">                        &lt;td&gt;</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">pin</span><span class="si">}</span><span class="sb">&lt;/td&gt;</span>
</span><span id="line-693"><span class="sb">                        &lt;td&gt;</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">admin</span> <span class="o">?</span> <span class="s1">'Yes'</span> <span class="o">:</span> <span class="s1">'No'</span><span class="si">}</span><span class="sb">&lt;/td&gt;</span>
</span><span id="line-694"><span class="sb">                        &lt;td&gt;</span>
</span><span id="line-695"><span class="sb">                          &lt;button onclick="deleteUser(</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">)"&gt;Delete&lt;/button&gt;</span>
</span><span id="line-696"><span class="sb">                          &lt;button onclick="modifyUser(</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">)"&gt;Modify&lt;/button&gt;</span>
</span><span id="line-697"><span class="sb">                        &lt;/td&gt;</span>
</span><span id="line-698"><span class="sb">                      `</span><span class="p">;</span>
</span><span id="line-699">                            <span class="nx">usersTableBody</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>
</span><span id="line-700">                        <span class="p">});</span>
</span><span id="line-701">                    <span class="p">})</span>
</span><span id="line-702">                    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching user data:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-703">            <span class="p">}</span>
</span><span id="line-704">
</span><span id="line-705">            <span class="kd">function</span> <span class="nx">addUser</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-706">                <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> <span class="c1">// Prevent the default form submission</span>
</span><span id="line-707">
</span><span id="line-708">                <span class="kd">const</span> <span class="nx">form</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'userProfileForm'</span><span class="p">);</span>
</span><span id="line-709">                <span class="kd">const</span> <span class="nx">formData</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">FormData</span><span class="p">(</span><span class="nx">form</span><span class="p">);</span>
</span><span id="line-710">
</span><span id="line-711">                <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/add-user'</span><span class="p">,</span> <span class="p">{</span>
</span><span id="line-712">                    <span class="nx">method</span><span class="o">:</span> <span class="s1">'POST'</span><span class="p">,</span>
</span><span id="line-713">                    <span class="nx">body</span><span class="o">:</span> <span class="nx">formData</span>
</span><span id="line-714">                <span class="p">})</span>
</span><span id="line-715">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-716">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-717">                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Form submission successful:'</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</span><span id="line-718">                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span><span id="line-719">                        <span class="nx">form</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span> <span class="c1">// Clear the form after submission</span>
</span><span id="line-720">                        <span class="nx">loadUsers</span><span class="p">();</span> <span class="c1">// Reload users after adding a new user</span>
</span><span id="line-721">                    <span class="p">})</span>
</span><span id="line-722">                    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-723">                        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span><span id="line-724">                    <span class="p">});</span>
</span><span id="line-725">            <span class="p">}</span>
</span><span id="line-726">
</span><span id="line-727">            <span class="kd">function</span> <span class="nx">deleteUser</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-728">                <span class="nx">fetch</span><span class="p">(</span><span class="sb">`/delete-user?index=</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="p">{</span> <span class="nx">method</span><span class="o">:</span> <span class="s1">'DELETE'</span> <span class="p">})</span>
</span><span id="line-729">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-730">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-731">                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span id="line-732">                        <span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span id="line-733">                        <span class="nx">loadUsers</span><span class="p">();</span> <span class="c1">// Reload users after deletion</span>
</span><span id="line-734">                    <span class="p">})</span>
</span><span id="line-735">                    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error deleting user:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-736">            <span class="p">}</span>
</span><span id="line-737">
</span><span id="line-738">            <span class="kd">function</span> <span class="nx">modifyUser</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-739">                <span class="kd">const</span> <span class="nx">row</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="sb">`#usersTableBody tr:nth-child(</span><span class="si">${</span><span class="nx">index</span> <span class="o">+</span> <span class="mf">1</span><span class="si">}</span><span class="sb">)`</span><span class="p">);</span>
</span><span id="line-740">                <span class="kd">const</span> <span class="nx">cells</span> <span class="o">=</span> <span class="nx">row</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'td'</span><span class="p">);</span>
</span><span id="line-741">
</span><span id="line-742">                <span class="c1">// Replace cell content with input fields</span>
</span><span id="line-743">                <span class="nx">cells</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`&lt;input type="text" value="</span><span class="si">${</span><span class="nx">cells</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">innerText</span><span class="si">}</span><span class="sb">" id="username-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">"&gt;`</span><span class="p">;</span>
</span><span id="line-744">                <span class="nx">cells</span><span class="p">[</span><span class="mf">2</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`&lt;input type="password" value="</span><span class="si">${</span><span class="nx">cells</span><span class="p">[</span><span class="mf">2</span><span class="p">].</span><span class="nx">innerText</span><span class="si">}</span><span class="sb">" id="password-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">"&gt;`</span><span class="p">;</span>
</span><span id="line-745">                <span class="nx">cells</span><span class="p">[</span><span class="mf">3</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`&lt;input type="email" value="</span><span class="si">${</span><span class="nx">cells</span><span class="p">[</span><span class="mf">3</span><span class="p">].</span><span class="nx">innerText</span><span class="si">}</span><span class="sb">" id="email-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">"&gt;`</span><span class="p">;</span>
</span><span id="line-746">                <span class="nx">cells</span><span class="p">[</span><span class="mf">4</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`&lt;input type="tel" value="</span><span class="si">${</span><span class="nx">cells</span><span class="p">[</span><span class="mf">4</span><span class="p">].</span><span class="nx">innerText</span><span class="si">}</span><span class="sb">" id="phonenumber-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">"&gt;`</span><span class="p">;</span>
</span><span id="line-747">                <span class="nx">cells</span><span class="p">[</span><span class="mf">5</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`&lt;input type="text" value="</span><span class="si">${</span><span class="nx">cells</span><span class="p">[</span><span class="mf">5</span><span class="p">].</span><span class="nx">innerText</span><span class="si">}</span><span class="sb">" id="pin-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">" pattern="[0-9]{6}"&gt;`</span><span class="p">;</span>
</span><span id="line-748">                <span class="nx">cells</span><span class="p">[</span><span class="mf">6</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`&lt;input type="checkbox" </span><span class="si">${</span><span class="nx">cells</span><span class="p">[</span><span class="mf">6</span><span class="p">].</span><span class="nx">innerText</span> <span class="o">===</span> <span class="s1">'Yes'</span> <span class="o">?</span> <span class="s1">'checked'</span> <span class="o">:</span> <span class="s1">''</span><span class="si">}</span><span class="sb"> id="admin-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">"&gt;`</span><span class="p">;</span>
</span><span id="line-749">
</span><span id="line-750">                <span class="c1">// Replace Modify button with Save button</span>
</span><span id="line-751">                <span class="nx">cells</span><span class="p">[</span><span class="mf">7</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`</span>
</span><span id="line-752"><span class="sb">                    &lt;button onclick="saveUser(</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">)"&gt;Save&lt;/button&gt;</span>
</span><span id="line-753"><span class="sb">                    &lt;button onclick="cancelEdit(</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">)"&gt;Cancel&lt;/button&gt;</span>
</span><span id="line-754"><span class="sb">                `</span><span class="p">;</span>
</span><span id="line-755">            <span class="p">}</span>
</span><span id="line-756">
</span><span id="line-757">            <span class="kd">function</span> <span class="nx">saveUser</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-758">                <span class="kd">const</span> <span class="nx">username</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="sb">`username-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="line-759">                <span class="kd">const</span> <span class="nx">password</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="sb">`password-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="line-760">                <span class="kd">const</span> <span class="nx">email</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="sb">`email-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="line-761">                <span class="kd">const</span> <span class="nx">phonenumber</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="sb">`phonenumber-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="line-762">                <span class="kd">const</span> <span class="nx">pin</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="sb">`pin-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="line-763">                <span class="kd">const</span> <span class="nx">admin</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="sb">`admin-</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">checked</span><span class="p">;</span>
</span><span id="line-764">            
</span><span id="line-765">                <span class="kd">const</span> <span class="nx">requestBody</span> <span class="o">=</span> <span class="p">{</span><span class="nx">index</span><span class="p">,</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">phonenumber</span><span class="p">,</span> <span class="nx">pin</span><span class="p">,</span> <span class="nx">admin</span><span class="p">};</span>
</span><span id="line-766">            
</span><span id="line-767">                <span class="c1">// Log the body to the console</span>
</span><span id="line-768">                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request Body:'</span><span class="p">,</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">requestBody</span><span class="p">));</span>
</span><span id="line-769">            
</span><span id="line-770">                <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/modify-user'</span><span class="p">,</span> <span class="p">{</span>
</span><span id="line-771">                    <span class="nx">method</span><span class="o">:</span> <span class="s1">'POST'</span><span class="p">,</span>
</span><span id="line-772">                    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
</span><span id="line-773">                        <span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
</span><span id="line-774">                    <span class="p">},</span>
</span><span id="line-775">                    <span class="nx">body</span><span class="o">:</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">requestBody</span><span class="p">),</span>
</span><span id="line-776">                <span class="p">})</span>
</span><span id="line-777">                <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-778">                    <span class="c1">// Log the response status and headers</span>
</span><span id="line-779">                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Response Status:'</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
</span><span id="line-780">                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Response Headers:'</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">);</span>
</span><span id="line-781">                    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span>
</span><span id="line-782">                <span class="p">})</span>
</span><span id="line-783">                <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-784">                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span id="line-785">                    <span class="nx">loadUsers</span><span class="p">();</span> <span class="c1">// Reload users after modification</span>
</span><span id="line-786">                <span class="p">})</span>
</span><span id="line-787">                <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-788">            <span class="p">}</span>
</span><span id="line-789">
</span><span id="line-790">            <span class="kd">function</span> <span class="nx">cancelEdit</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-791">                <span class="nx">loadUsers</span><span class="p">();</span> <span class="c1">// Reload users to cancel edit</span>
</span><span id="line-792">            <span class="p">}</span>
</span><span id="line-793">
</span><span id="line-794">            <span class="kd">function</span> <span class="nx">loadFinishInfo</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-795">                <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/device-info'</span><span class="p">)</span>
</span><span id="line-796">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span id="line-797">                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-798">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'confirmed-device-model'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">deviceModel</span><span class="p">;</span>
</span><span id="line-799">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'confirmed-firmware-version'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">firmware</span><span class="p">;</span>
</span><span id="line-800">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'confirmed-ssid'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">ssid</span><span class="p">;</span>
</span><span id="line-801">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'confirmed-wifi-password'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">wifi_password</span><span class="p">;</span>
</span><span id="line-802">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'confirmed-ip-address'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">IP</span><span class="p">;</span>
</span><span id="line-803">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'confirmed-hostname'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">hostname</span><span class="p">;</span>
</span><span id="line-804">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'confirmed-timezone'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">gmtoffset</span><span class="p">;</span> <span class="c1">// Assuming gmtoffset is the timezone</span>
</span><span id="line-805">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'confirmed-daylight-savings'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">daylightoffset</span><span class="p">;</span> <span class="c1">// Assuming daylightoffset is daylight savings</span>
</span><span id="line-806">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'confirmed-time-offset'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">interval</span><span class="p">;</span> <span class="c1">// Assuming interval is the time offset</span>
</span><span id="line-807">                        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'confirmed-date-time'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">time</span><span class="p">;</span>
</span><span id="line-808">                    <span class="p">})</span>
</span><span id="line-809">                    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching device info:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-810">            <span class="p">}</span>
</span><span id="line-811">            
</span><span id="line-812">            <span class="c1">// Call loadDeviceInfo when the slide is viewed</span>
</span><span id="line-813">            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'slide5'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'show'</span><span class="p">,</span> <span class="nx">loadFinishInfo</span><span class="p">);</span>
</span><span id="line-814">
</span><span id="line-815">            <span class="c1">// Call loadUsers when the page loads</span>
</span><span id="line-816">            <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'DOMContentLoaded'</span><span class="p">,</span> <span class="nx">loadUsers</span><span class="p">);</span>
</span><span id="line-817">
</span><span id="line-818">            <span class="c1">// Initialize the first slide</span>
</span><span id="line-819">            <span class="nx">showSlide</span><span class="p">(</span><span class="nx">currentSlide</span><span class="p">);</span>
</span><span id="line-820">        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="line-821">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="line-822"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span><span id="line-823">
</span><span id="line-824"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></pre>
       </div>
      </div>
     </div>
     <div class="preview-pane" id="code-widget-657604">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          script.js
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          JavaScript
         </span>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax all">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="kd">function</span> <span class="nx">downloadDeleteButton</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-2">  <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">action</span> <span class="o">+</span> <span class="s1">'?file='</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">filePath</span><span class="p">);</span>
</span><span id="line-3">  <span class="k">if</span> <span class="p">(</span><span class="nx">action</span> <span class="o">===</span> <span class="s1">'download'</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-4">    <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
</span><span id="line-5">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">action</span> <span class="o">===</span> <span class="s1">'delete'</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-6">    <span class="k">if</span> <span class="p">(</span><span class="nx">confirm</span><span class="p">(</span><span class="s2">"Are you sure you want to delete this file?"</span><span class="p">))</span> <span class="p">{</span>
</span><span id="line-7">      <span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span> <span class="nx">method</span><span class="o">:</span> <span class="s1">'DELETE'</span> <span class="p">})</span>
</span><span id="line-8">        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-9">        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">text</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-10">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
</span><span id="line-11">          <span class="nx">loadLogs</span><span class="p">();</span> <span class="c1">// Refresh the Logs list after deletion</span>
</span><span id="line-12">        <span class="p">})</span>
</span><span id="line-13">        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error deleting file:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-14">    <span class="p">}</span>
</span><span id="line-15">  <span class="p">}</span>
</span><span id="line-16"><span class="p">}</span>
</span><span id="line-17">
</span><span id="line-18"><span class="kd">function</span> <span class="nx">rebootESP</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-19">  <span class="k">if</span> <span class="p">(</span><span class="nx">confirm</span><span class="p">(</span><span class="s2">"Are you sure you want to reboot the ESP32S3?"</span><span class="p">))</span> <span class="p">{</span>
</span><span id="line-20">    <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/reboot'</span><span class="p">)</span>
</span><span id="line-21">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-22">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">text</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Reboot command sent:'</span><span class="p">,</span> <span class="nx">text</span><span class="p">))</span>
</span><span id="line-23">      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error sending reboot command:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-24">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-25">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Reboot canceled.'</span><span class="p">);</span>
</span><span id="line-26">  <span class="p">}</span>
</span><span id="line-27"><span class="p">}</span>
</span><span id="line-28">
</span><span id="line-29"><span class="kd">function</span> <span class="nx">scanNetworks</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// Function to scan networks and populate the dropdown</span>
</span><span id="line-30">  <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/scan-networks'</span><span class="p">)</span>
</span><span id="line-31">    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span id="line-32">    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">networks</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-33">      <span class="kd">const</span> <span class="nx">networkList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'network-list'</span><span class="p">);</span>
</span><span id="line-34">      <span class="nx">networkList</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'&lt;option value=""&gt;Select an SSID&lt;/option&gt;'</span><span class="p">;</span> <span class="c1">// Reset dropdown</span>
</span><span id="line-35">
</span><span id="line-36">      <span class="nx">networks</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">network</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-37">        <span class="kd">const</span> <span class="nx">option</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'option'</span><span class="p">);</span>
</span><span id="line-38">        <span class="nx">option</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">network</span><span class="p">.</span><span class="nx">ssid</span><span class="si">}</span><span class="sb"> (</span><span class="si">${</span><span class="nx">network</span><span class="p">.</span><span class="nx">signal_strength</span><span class="si">}</span><span class="sb"> dBm)`</span><span class="p">;</span>
</span><span id="line-39">        <span class="nx">option</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">network</span><span class="p">.</span><span class="nx">ssid</span><span class="p">;</span> <span class="c1">// Set value to SSID</span>
</span><span id="line-40">        <span class="nx">networkList</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">option</span><span class="p">);</span>
</span><span id="line-41">      <span class="p">});</span>
</span><span id="line-42">    <span class="p">})</span>
</span><span id="line-43">    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-44">      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching network list:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span><span id="line-45">    <span class="p">});</span>
</span><span id="line-46"><span class="p">}</span>
</span><span id="line-47">
</span><span id="line-48">
</span><span id="line-49"><span class="kd">function</span> <span class="nx">handleSelectionChange</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// Function to handle changes in the dropdown or input field</span>
</span><span id="line-50">  <span class="kd">const</span> <span class="nx">networkList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'network-list'</span><span class="p">);</span>
</span><span id="line-51">  <span class="kd">const</span> <span class="nx">manualSSID</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'manual-ssid'</span><span class="p">);</span>
</span><span id="line-52">
</span><span id="line-53">  <span class="c1">// If a dropdown option is selected, clear the input field</span>
</span><span id="line-54">  <span class="k">if</span> <span class="p">(</span><span class="nx">networkList</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-55">    <span class="nx">manualSSID</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span> <span class="c1">// Clear manual input</span>
</span><span id="line-56">  <span class="p">}</span>
</span><span id="line-57"><span class="p">}</span>
</span><span id="line-58">
</span><span id="line-59"><span class="c1">// Function to handle form submission</span>
</span><span id="line-60"><span class="kd">function</span> <span class="nx">connectToNetwork</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-61">  <span class="kd">const</span> <span class="nx">networkList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'network-list'</span><span class="p">);</span>
</span><span id="line-62">  <span class="kd">const</span> <span class="nx">manualSSID</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'manual-ssid'</span><span class="p">).</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
</span><span id="line-63">  <span class="kd">const</span> <span class="nx">ssid</span> <span class="o">=</span> <span class="nx">networkList</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="nx">manualSSID</span><span class="p">;</span> <span class="c1">// Use selected SSID or manual input</span>
</span><span id="line-64">  <span class="kd">const</span> <span class="nx">password</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'password'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="line-65">
</span><span id="line-66">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ssid</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-67">    <span class="nx">alert</span><span class="p">(</span><span class="s1">'Please enter or select an SSID.'</span><span class="p">);</span>
</span><span id="line-68">    <span class="k">return</span><span class="p">;</span>
</span><span id="line-69">  <span class="p">}</span>
</span><span id="line-70">
</span><span id="line-71">  <span class="c1">// Send connection request to the server</span>
</span><span id="line-72">  <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/connect'</span><span class="p">,</span> <span class="p">{</span>
</span><span id="line-73">    <span class="nx">method</span><span class="o">:</span> <span class="s1">'POST'</span><span class="p">,</span>
</span><span id="line-74">    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
</span><span id="line-75">      <span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
</span><span id="line-76">    <span class="p">},</span>
</span><span id="line-77">    <span class="nx">body</span><span class="o">:</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="nx">ssid</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}),</span>
</span><span id="line-78">  <span class="p">})</span>
</span><span id="line-79">    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-80">    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-81">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Connection result:'</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
</span><span id="line-82">      <span class="c1">// Handle connection result</span>
</span><span id="line-83">    <span class="p">})</span>
</span><span id="line-84">    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-85">      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error connecting to network:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span><span id="line-86">    <span class="p">});</span>
</span><span id="line-87"><span class="p">}</span>
</span><span id="line-88">
</span><span id="line-89"><span class="c1">// Initialize dropdown buttons</span>
</span><span id="line-90"><span class="kd">const</span> <span class="nx">dropdownButtons</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s2">"dropdown-btn"</span><span class="p">);</span>
</span><span id="line-91"><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">dropdownButtons</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">button</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-92">  <span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span id="line-93">    <span class="k">this</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s2">"active"</span><span class="p">);</span> <span class="c1">// Toggle the active class to show/hide the dropdown content</span>
</span><span id="line-94">    <span class="kd">const</span> <span class="nx">dropdownContent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextElementSibling</span><span class="p">;</span>
</span><span id="line-95">    <span class="nx">dropdownContent</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="nx">dropdownContent</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">===</span> <span class="s2">"block"</span> <span class="o">?</span> <span class="s2">"none"</span> <span class="o">:</span> <span class="s2">"block"</span><span class="p">;</span>
</span><span id="line-96">  <span class="p">});</span>
</span><span id="line-97"><span class="p">});</span>
</span><span id="line-98">
</span><span id="line-99"><span class="c1">// Handle page navigation</span>
</span><span id="line-100"><span class="kd">const</span> <span class="nx">sections</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'.content-section'</span><span class="p">);</span>
</span><span id="line-101">
</span><span id="line-102"><span class="c1">// Function to show the section with the given ID</span>
</span><span id="line-103"><span class="kd">function</span> <span class="nx">showSection</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-104">  <span class="nx">sections</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">section</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-105">    <span class="kd">const</span> <span class="nx">isActive</span> <span class="o">=</span> <span class="nx">section</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">;</span>
</span><span id="line-106">    <span class="nx">section</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s1">'active'</span><span class="p">,</span> <span class="nx">isActive</span><span class="p">);</span>
</span><span id="line-107">
</span><span id="line-108">    <span class="k">if</span> <span class="p">(</span><span class="nx">id</span> <span class="o">===</span> <span class="s1">'update-firmware'</span> <span class="o">&amp;&amp;</span> <span class="nx">isActive</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-109">      <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'/update'</span><span class="p">,</span> <span class="s1">'_blank'</span><span class="p">);</span>
</span><span id="line-110">    <span class="p">}</span>
</span><span id="line-111">
</span><span id="line-112">    <span class="k">if</span> <span class="p">(</span><span class="nx">id</span> <span class="o">==</span> <span class="s1">'serial-messages'</span> <span class="o">&amp;&amp;</span> <span class="nx">isActive</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-113">      <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'/webserial'</span><span class="p">,</span> <span class="s1">'_blank'</span><span class="p">);</span>
</span><span id="line-114">    <span class="p">}</span>
</span><span id="line-115">  <span class="p">});</span>
</span><span id="line-116"><span class="p">}</span>
</span><span id="line-117">
</span><span id="line-118"><span class="c1">// Event listeners for navigation links</span>
</span><span id="line-119"><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'.sidenav a'</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">link</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-120">  <span class="nx">link</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="nx">event</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-121">    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span id="line-122">    <span class="kd">const</span> <span class="nx">targetId</span> <span class="o">=</span> <span class="nx">link</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">'href'</span><span class="p">).</span><span class="nx">substring</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
</span><span id="line-123">    <span class="nx">showSection</span><span class="p">(</span><span class="nx">targetId</span><span class="p">);</span>
</span><span id="line-124">  <span class="p">});</span>
</span><span id="line-125"><span class="p">});</span>
</span><span id="line-126">
</span><span id="line-127"><span class="c1">// Initialize first section</span>
</span><span id="line-128"><span class="nx">showSection</span><span class="p">(</span><span class="s1">'main'</span><span class="p">);</span>
</span><span id="line-129">
</span><span id="line-130"><span class="c1">// Handle Image Stream</span>
</span><span id="line-131"><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"DOMContentLoaded"</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-132">  <span class="kd">let</span> <span class="nx">streaming</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>  <span class="c1">// Flag to track streaming status</span>
</span><span id="line-133">  <span class="kd">const</span> <span class="nx">streamImg</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'stream'</span><span class="p">);</span>
</span><span id="line-134">  <span class="kd">const</span> <span class="nx">streamBtn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'stream-btn'</span><span class="p">);</span>
</span><span id="line-135">  <span class="kd">let</span> <span class="nx">streamInterval</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span id="line-136">
</span><span id="line-137">  <span class="k">if</span> <span class="p">(</span><span class="nx">streamBtn</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-138">    <span class="c1">// Click event for stream button</span>
</span><span id="line-139">    <span class="nx">streamBtn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-140">      <span class="k">if</span> <span class="p">(</span><span class="nx">streaming</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-141">        <span class="c1">// Stop streaming</span>
</span><span id="line-142">        <span class="nx">streamBtn</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">'Start Stream'</span><span class="p">;</span>
</span><span id="line-143">        <span class="nx">streaming</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span id="line-144">        <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/stopStream'</span><span class="p">);</span>  <span class="c1">// Send request to stop streaming</span>
</span><span id="line-145">
</span><span id="line-146">        <span class="c1">// Clear interval to stop fetching frames</span>
</span><span id="line-147">        <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">streamInterval</span><span class="p">);</span>
</span><span id="line-148">        <span class="nx">streamInterval</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span id="line-149">
</span><span id="line-150">        <span class="c1">// The last image remains displayed</span>
</span><span id="line-151">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-152">        <span class="c1">// Start streaming</span>
</span><span id="line-153">        <span class="nx">streamBtn</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">'Stop Stream'</span><span class="p">;</span>
</span><span id="line-154">        <span class="nx">streaming</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span id="line-155">        <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/startStream'</span><span class="p">);</span>  <span class="c1">// Send request to start streaming</span>
</span><span id="line-156">
</span><span id="line-157">        <span class="c1">// Set interval to fetch new frames</span>
</span><span id="line-158">        <span class="nx">streamInterval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-159">          <span class="k">if</span> <span class="p">(</span><span class="nx">streaming</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-160">            <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/stream'</span><span class="p">)</span>
</span><span id="line-161">              <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-162">              <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">text</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-163">                <span class="k">if</span> <span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-164">                  <span class="nx">streamImg</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">'data:image/jpeg;base64,'</span> <span class="o">+</span> <span class="nx">text</span><span class="p">;</span>
</span><span id="line-165">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-166">                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'No image received.'</span><span class="p">);</span>
</span><span id="line-167">                <span class="p">}</span>
</span><span id="line-168">              <span class="p">})</span>
</span><span id="line-169">              <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching stream:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-170">          <span class="p">}</span>
</span><span id="line-171">        <span class="p">},</span> <span class="mf">50</span><span class="p">);</span> <span class="c1">// Fetch new frames every 50 milliseconds</span>
</span><span id="line-172">      <span class="p">}</span>
</span><span id="line-173">    <span class="p">});</span>
</span><span id="line-174">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-175">    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Stream button not found.'</span><span class="p">);</span>
</span><span id="line-176">  <span class="p">}</span>
</span><span id="line-177">
</span><span id="line-178">  <span class="c1">// Handle Lock/Unlock Button</span>
</span><span id="line-179">  <span class="kd">const</span> <span class="nx">lockBtn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'lock-btn'</span><span class="p">);</span>
</span><span id="line-180">  <span class="kd">let</span> <span class="nx">locked</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span id="line-181">
</span><span id="line-182">  <span class="k">if</span> <span class="p">(</span><span class="nx">lockBtn</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-183">    <span class="nx">lockBtn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-184">      <span class="k">if</span> <span class="p">(</span><span class="nx">locked</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-185">        <span class="c1">// Unlock the system</span>
</span><span id="line-186">        <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/lock'</span><span class="p">);</span>
</span><span id="line-187">        <span class="nx">lockBtn</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">'Unlock'</span><span class="p">;</span>
</span><span id="line-188">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-189">        <span class="c1">// Lock the system</span>
</span><span id="line-190">        <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/unlock'</span><span class="p">);</span>
</span><span id="line-191">        <span class="nx">lockBtn</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">'Lock'</span><span class="p">;</span>
</span><span id="line-192">      <span class="p">}</span>
</span><span id="line-193">      <span class="nx">locked</span> <span class="o">=</span> <span class="o">!</span><span class="nx">locked</span><span class="p">;</span>
</span><span id="line-194">    <span class="p">});</span>
</span><span id="line-195">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-196">    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Lock button not found.'</span><span class="p">);</span>
</span><span id="line-197">  <span class="p">}</span>
</span><span id="line-198">
</span><span id="line-199">  <span class="c1">// Fetch and display alerts</span>
</span><span id="line-200">  <span class="kd">const</span> <span class="nx">alertsBox</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'alerts-box'</span><span class="p">);</span>
</span><span id="line-201">
</span><span id="line-202">  <span class="kd">function</span> <span class="nx">loadAlerts</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-203">    <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/alerts'</span><span class="p">)</span>
</span><span id="line-204">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-205">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">text</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-206">        <span class="k">if</span> <span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-207">          <span class="nx">alertsBox</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\n/g</span><span class="p">,</span> <span class="s1">'&lt;br&gt;'</span><span class="p">);</span> <span class="c1">// Replace newlines with &lt;br&gt;</span>
</span><span id="line-208">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-209">          <span class="nx">alertsBox</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'&lt;p&gt;No alerts to show.&lt;/p&gt;'</span><span class="p">;</span>
</span><span id="line-210">        <span class="p">}</span>
</span><span id="line-211">      <span class="p">})</span>
</span><span id="line-212">      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-213">        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching alerts:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span><span id="line-214">        <span class="nx">alertsBox</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'&lt;p&gt;Error loading alerts.&lt;/p&gt;'</span><span class="p">;</span>
</span><span id="line-215">      <span class="p">});</span>
</span><span id="line-216">  <span class="p">}</span>
</span><span id="line-217">
</span><span id="line-218">  <span class="c1">// Initial load of alerts</span>
</span><span id="line-219">  <span class="nx">loadAlerts</span><span class="p">();</span>
</span><span id="line-220">
</span><span id="line-221">  <span class="c1">// Refresh alerts every minute</span>
</span><span id="line-222">  <span class="nx">setInterval</span><span class="p">(</span><span class="nx">loadAlerts</span><span class="p">,</span> <span class="mf">60000</span><span class="p">);</span> <span class="c1">// Refresh every 60,000 ms (1 minute)</span>
</span><span id="line-223">
</span><span id="line-224">  <span class="c1">// Fetch and display Logs</span>
</span><span id="line-225">  <span class="kd">const</span> <span class="nx">logsList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'logs-list'</span><span class="p">);</span>
</span><span id="line-226">
</span><span id="line-227">  <span class="kd">function</span> <span class="nx">loadLogs</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-228">    <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/logs'</span><span class="p">)</span>
</span><span id="line-229">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-230">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">text</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-231">        <span class="kd">const</span> <span class="nx">logs</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">'\n'</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="nx">file</span> <span class="p">=&gt;</span> <span class="nx">file</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="o">!==</span> <span class="s1">''</span><span class="p">);</span> <span class="c1">// Split the text by newlines</span>
</span><span id="line-232">        <span class="k">if</span> <span class="p">(</span><span class="nx">logs</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-233">          <span class="nx">logsList</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">logs</span><span class="p">;</span>
</span><span id="line-234">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-235">          <span class="nx">logsList</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'&lt;p&gt;No logs available.&lt;/p&gt;'</span><span class="p">;</span>
</span><span id="line-236">        <span class="p">}</span>
</span><span id="line-237">      <span class="p">})</span>
</span><span id="line-238">      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-239">        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching logs:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span><span id="line-240">        <span class="nx">logsList</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'&lt;p&gt;Error loading logs.&lt;/p&gt;'</span><span class="p">;</span>
</span><span id="line-241">      <span class="p">});</span>
</span><span id="line-242">  <span class="p">}</span>
</span><span id="line-243">
</span><span id="line-244">  <span class="kd">function</span> <span class="nx">playRecording</span><span class="p">(</span><span class="nx">filename</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-245">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Playing recording: </span><span class="si">${</span><span class="nx">filename</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="line-246">    <span class="nx">fetch</span><span class="p">(</span><span class="sb">`/play-recording?file=</span><span class="si">${</span><span class="nx">filename</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span><span id="line-247">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
</span><span id="line-248">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-249">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Data received:'</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</span><span id="line-250">        <span class="kd">const</span> <span class="nx">frames</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">'\n'</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span> <span class="c1">// Discard the first frame (title)</span>
</span><span id="line-251">        <span class="kd">const</span> <span class="nx">totalFrames</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span id="line-252">        <span class="kd">const</span> <span class="nx">intervalTime</span> <span class="o">=</span> <span class="mf">30000</span> <span class="o">/</span> <span class="nx">totalFrames</span><span class="p">;</span> <span class="c1">// 30 seconds divided by the number of frames</span>
</span><span id="line-253">
</span><span id="line-254">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Total frames: </span><span class="si">${</span><span class="nx">totalFrames</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="line-255">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Interval time: </span><span class="si">${</span><span class="nx">intervalTime</span><span class="si">}</span><span class="sb"> ms`</span><span class="p">);</span>
</span><span id="line-256">
</span><span id="line-257">        <span class="kd">const</span> <span class="nx">recordingsImage</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'recordings-image'</span><span class="p">);</span>
</span><span id="line-258">        <span class="kd">let</span> <span class="nx">frameIndex</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
</span><span id="line-259">
</span><span id="line-260">        <span class="kd">function</span> <span class="nx">displayNextFrame</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-261">          <span class="k">if</span> <span class="p">(</span><span class="nx">frameIndex</span> <span class="o">&lt;</span> <span class="nx">totalFrames</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-262">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Displaying frame </span><span class="si">${</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mf">1</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">totalFrames</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="line-263">            <span class="nx">recordingsImage</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="sb">`data:image/jpeg;base64,</span><span class="si">${</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span id="line-264">            <span class="nx">frameIndex</span><span class="o">++</span><span class="p">;</span>
</span><span id="line-265">            <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">displayNextFrame</span><span class="p">,</span> <span class="nx">intervalTime</span><span class="p">);</span>
</span><span id="line-266">          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-267">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'All frames displayed.'</span><span class="p">);</span>
</span><span id="line-268">          <span class="p">}</span>
</span><span id="line-269">        <span class="p">}</span>
</span><span id="line-270">
</span><span id="line-271">        <span class="nx">displayNextFrame</span><span class="p">();</span>
</span><span id="line-272">      <span class="p">})</span>
</span><span id="line-273">      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error playing recording:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-274">  <span class="p">}</span>
</span><span id="line-275">  <span class="c1">// Initial load of logs</span>
</span><span id="line-276">  <span class="nx">loadLogs</span><span class="p">();</span>
</span><span id="line-277">
</span><span id="line-278">  <span class="c1">// Refresh logs every minute</span>
</span><span id="line-279">  <span class="c1">// setInterval(loadLogs, 60000); // Refresh every 60,000 ms (1 minute)</span>
</span><span id="line-280">
</span><span id="line-281">  <span class="kd">function</span> <span class="nx">fetchDeviceInfo</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-282">    <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/device-info'</span><span class="p">)</span>
</span><span id="line-283">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span> <span class="c1">// Fetch as text first</span>
</span><span id="line-284">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">text</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-285">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Raw JSON response:'</span><span class="p">,</span> <span class="nx">text</span><span class="p">);</span> <span class="c1">// Log the raw JSON response</span>
</span><span id="line-286">        <span class="k">return</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span> <span class="c1">// Parse the JSON</span>
</span><span id="line-287">      <span class="p">})</span>
</span><span id="line-288">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-289">        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'device-info'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`</span>
</span><span id="line-290"><span class="sb">          &lt;h3&gt;Device Information&lt;/h3&gt;</span>
</span><span id="line-291"><span class="sb">          &lt;p&gt;&lt;strong&gt;Device Model:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">deviceModel</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="line-292"><span class="sb">          &lt;p&gt;&lt;strong&gt;Chip ID:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">chipID</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="line-293"><span class="sb">          &lt;p&gt;&lt;strong&gt;Chip Cores:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">chipCores</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="line-294"><span class="sb">          &lt;p&gt;&lt;strong&gt;MAC Address:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">MAC_Address</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="line-295"><span class="sb">          &lt;p&gt;&lt;strong&gt;Firmware:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">firmware</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="line-296"><span class="sb">          &lt;p&gt;&lt;strong&gt;Uptime:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">uptime</span><span class="si">}</span><span class="sb"> &lt;/p&gt;</span>
</span><span id="line-297"><span class="sb">          &lt;p&gt;&lt;strong&gt;GMT Offset:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">gmtoffset</span><span class="si">}</span><span class="sb"> seconds&lt;/p&gt;</span>
</span><span id="line-298"><span class="sb">          &lt;p&gt;&lt;strong&gt;Daylight Offset:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">daylightoffset</span><span class="si">}</span><span class="sb"> minutes&lt;/p&gt;</span>
</span><span id="line-299"><span class="sb">          &lt;p&gt;&lt;strong&gt;Interval:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">interval</span><span class="si">}</span><span class="sb"> ms&lt;/p&gt;</span>
</span><span id="line-300"><span class="sb">          &lt;button onclick="rebootESP()"&gt;Reboot ESP32S3&lt;/button&gt;</span>
</span><span id="line-301"><span class="sb">        `</span><span class="p">;</span>
</span><span id="line-302">        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'wifi-status'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`</span>
</span><span id="line-303"><span class="sb">          &lt;p&gt;&lt;strong&gt;WiFi:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">wificonnected</span> <span class="o">?</span> <span class="s1">'Connected'</span> <span class="o">:</span> <span class="s1">'Disconnected'</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="line-304"><span class="sb">          &lt;p&gt;&lt;strong&gt;Signal Strength:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">signalstrength</span><span class="si">}</span><span class="sb"> dBm&lt;/p&gt;</span>
</span><span id="line-305"><span class="sb">          &lt;p&gt;&lt;strong&gt;SSID:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">ssid</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="line-306"><span class="sb">          &lt;p&gt;&lt;strong&gt;WiFi Password:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">wifi_password</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="line-307"><span class="sb">          &lt;p&gt;&lt;strong&gt;IP Address:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">IP</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="line-308"><span class="sb">          &lt;p&gt;&lt;strong&gt;Hostname:&lt;/strong&gt; </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">hostname</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="line-309"><span class="sb">        `</span><span class="p">;</span>
</span><span id="line-310">      <span class="p">})</span>
</span><span id="line-311">      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching device info:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-312">  <span class="p">}</span>
</span><span id="line-313">
</span><span id="line-314">  <span class="kd">function</span> <span class="nx">listRecordings</span><span class="p">()</span> <span class="p">{</span>
</span><span id="line-315">    <span class="nx">fetch</span><span class="p">(</span><span class="s1">'/list-recordings'</span><span class="p">)</span> <span class="c1">// Adjust the URL to your endpoint</span>
</span><span id="line-316">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span id="line-317">      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-318">        <span class="kd">const</span> <span class="nx">recordingsContainer</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'recordings-list'</span><span class="p">);</span>
</span><span id="line-319">        <span class="nx">recordingsContainer</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span> <span class="c1">// Clear any existing content</span>
</span><span id="line-320">
</span><span id="line-321">        <span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">recording</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span id="line-322">          <span class="kd">const</span> <span class="nx">recordingElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'div'</span><span class="p">);</span>
</span><span id="line-323">          <span class="nx">recordingElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'recording'</span><span class="p">);</span>
</span><span id="line-324">
</span><span id="line-325">          <span class="kd">const</span> <span class="nx">nameElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'p'</span><span class="p">);</span>
</span><span id="line-326">          <span class="nx">nameElement</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="sb">`Name: </span><span class="si">${</span><span class="nx">recording</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span id="line-327">          <span class="nx">recordingElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">nameElement</span><span class="p">);</span>
</span><span id="line-328">
</span><span id="line-329">          <span class="kd">const</span> <span class="nx">sizeElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'p'</span><span class="p">);</span>
</span><span id="line-330">          <span class="nx">sizeElement</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="sb">`Size: </span><span class="si">${</span><span class="nx">recording</span><span class="p">.</span><span class="nx">size</span><span class="si">}</span><span class="sb"> bytes`</span><span class="p">;</span>
</span><span id="line-331">          <span class="nx">recordingElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">sizeElement</span><span class="p">);</span>
</span><span id="line-332">
</span><span id="line-333">          <span class="kd">const</span> <span class="nx">playButton</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'button'</span><span class="p">);</span>
</span><span id="line-334">          <span class="nx">playButton</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">'Play'</span><span class="p">;</span>
</span><span id="line-335">          <span class="c1">// playButton.onclick = () =&gt; playRecording(recording.name);</span>
</span><span id="line-336">          <span class="nx">playButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">playRecording</span><span class="p">(</span><span class="nx">recording</span><span class="p">.</span><span class="nx">name</span><span class="p">));</span>
</span><span id="line-337">          <span class="nx">recordingElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">playButton</span><span class="p">);</span>
</span><span id="line-338">
</span><span id="line-339">          <span class="nx">recordingsContainer</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">recordingElement</span><span class="p">);</span>
</span><span id="line-340">        <span class="p">});</span>
</span><span id="line-341">      <span class="p">})</span>
</span><span id="line-342">      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error fetching recordings list:'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</span><span id="line-343">  <span class="p">}</span>
</span><span id="line-344">
</span><span id="line-345">  <span class="c1">// Initialize recordings list on page load</span>
</span><span id="line-346">  <span class="nx">listRecordings</span><span class="p">();</span>
</span><span id="line-347">
</span><span id="line-348">  <span class="c1">// Initial load of device info</span>
</span><span id="line-349">  <span class="nx">fetchDeviceInfo</span><span class="p">();</span>
</span><span id="line-350">  <span class="c1">// Refresh device info every minute (optional)</span>
</span><span id="line-351">  <span class="c1">// setInterval(fetchDeviceInfo, 60000); // Refresh every 60,000 ms (1 minute)</span>
</span><span id="line-352">
</span><span id="line-353">  <span class="c1">// Initialize network scan and form submission</span>
</span><span id="line-354">  <span class="nx">scanNetworks</span><span class="p">();</span>
</span><span id="line-355">
</span><span id="line-356">  <span class="c1">// Set up event listeners for network connection</span>
</span><span id="line-357">  <span class="kd">const</span> <span class="nx">networkList</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'network-list'</span><span class="p">);</span>
</span><span id="line-358">  <span class="kd">const</span> <span class="nx">manualSSID</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'manual-ssid'</span><span class="p">);</span>
</span><span id="line-359">  <span class="kd">const</span> <span class="nx">connectBtn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'connect-btn'</span><span class="p">);</span>
</span><span id="line-360">
</span><span id="line-361">  <span class="k">if</span> <span class="p">(</span><span class="nx">networkList</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-362">    <span class="nx">networkList</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="nx">handleSelectionChange</span><span class="p">);</span>
</span><span id="line-363">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-364">    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Network list not found.'</span><span class="p">);</span>
</span><span id="line-365">  <span class="p">}</span>
</span><span id="line-366">
</span><span id="line-367">  <span class="k">if</span> <span class="p">(</span><span class="nx">manualSSID</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-368">    <span class="nx">manualSSID</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'input'</span><span class="p">,</span> <span class="nx">handleSelectionChange</span><span class="p">);</span>
</span><span id="line-369">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-370">    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Manual SSID input not found.'</span><span class="p">);</span>
</span><span id="line-371">  <span class="p">}</span>
</span><span id="line-372">
</span><span id="line-373">  <span class="k">if</span> <span class="p">(</span><span class="nx">connectBtn</span><span class="p">)</span> <span class="p">{</span>
</span><span id="line-374">    <span class="nx">connectBtn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="nx">connectToNetwork</span><span class="p">);</span>
</span><span id="line-375">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span id="line-376">    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Connect button not found.'</span><span class="p">);</span>
</span><span id="line-377">  <span class="p">}</span>
</span><span id="line-378"><span class="p">});</span>
</span></pre>
       </div>
      </div>
     </div>
     <div class="preview-pane" id="code-widget-657599">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          unihiker_app.py
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          Python
         </span>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax all">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="kn">import</span> <span class="nn">time</span>
</span><span id="line-2"><span class="kn">import</span> <span class="nn">json</span>
</span><span id="line-3"><span class="kn">import</span> <span class="nn">os</span>
</span><span id="line-4"><span class="kn">import</span> <span class="nn">subprocess</span>
</span><span id="line-5"><span class="kn">from</span> <span class="nn">unihiker</span> <span class="kn">import</span> <span class="n">GUI</span>
</span><span id="line-6">
</span><span id="line-7"><span class="c1"># Initialize global variables</span>
</span><span id="line-8"><span class="n">gui</span><span class="o">=</span><span class="n">GUI</span><span class="p">()</span>  <span class="c1"># Instantiate the GUI class</span>
</span><span id="line-9"><span class="n">pin</span> <span class="o">=</span> <span class="s2">""</span>
</span><span id="line-10"><span class="n">unlocked</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="line-11"><span class="n">s1</span> <span class="o">=</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">s3</span> <span class="o">=</span> <span class="n">s4</span> <span class="o">=</span> <span class="n">s5</span> <span class="o">=</span> <span class="n">s6</span> <span class="o">=</span> <span class="n">txt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="line-12">
</span><span id="line-13"><span class="k">def</span> <span class="nf">home</span><span class="p">():</span>
</span><span id="line-14">    <span class="n">gui</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="line-15">    <span class="n">gui</span><span class="o">.</span><span class="n">fill_round_rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">unlock</span><span class="p">())</span>
</span><span id="line-16">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">'Unlock'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">unlock</span><span class="p">())</span>
</span><span id="line-17">    
</span><span id="line-18">    <span class="n">gui</span><span class="o">.</span><span class="n">fill_round_rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">"fill round rect clicked"</span><span class="p">))</span>
</span><span id="line-19">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">115</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">'Call'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="nb">print</span><span class="p">(</span><span class="s2">"fill round rect clicked"</span><span class="p">))</span>
</span><span id="line-20">    
</span><span id="line-21">    <span class="n">gui</span><span class="o">.</span><span class="n">fill_round_rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">160</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"green"</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">"fill round rect clicked"</span><span class="p">))</span>
</span><span id="line-22">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">185</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">'Message'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="nb">print</span><span class="p">(</span><span class="s2">"fill round rect clicked"</span><span class="p">))</span>
</span><span id="line-23">    
</span><span id="line-24">    <span class="n">gui</span><span class="o">.</span><span class="n">fill_round_rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">230</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"orange"</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">"fill round rect clicked"</span><span class="p">))</span>
</span><span id="line-25">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">'System'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="nb">print</span><span class="p">(</span><span class="s2">"fill round rect clicked"</span><span class="p">))</span>
</span><span id="line-26">    
</span><span id="line-27"><span class="k">def</span> <span class="nf">pincode</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span id="line-28">    <span class="k">global</span> <span class="n">pin</span>
</span><span id="line-29">    <span class="k">global</span> <span class="n">unlocked</span>
</span><span id="line-30">    <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="s2">"clc"</span><span class="p">:</span>
</span><span id="line-31">        <span class="n">pin</span> <span class="o">=</span> <span class="s2">""</span>
</span><span id="line-32">        <span class="n">s1</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">30</span><span class="p">)</span>
</span><span id="line-33">        <span class="n">s2</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">60</span><span class="p">)</span>
</span><span id="line-34">        <span class="n">s3</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">90</span><span class="p">)</span>
</span><span id="line-35">        <span class="n">s4</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">120</span><span class="p">)</span>
</span><span id="line-36">        <span class="n">s5</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">150</span><span class="p">)</span>
</span><span id="line-37">        <span class="n">s6</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">180</span><span class="p">)</span>
</span><span id="line-38">    <span class="k">else</span><span class="p">:</span>
</span><span id="line-39">        <span class="n">unlocked</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="line-40">        <span class="n">pin</span> <span class="o">=</span> <span class="n">pin</span> <span class="o">+</span> <span class="n">data</span>
</span><span id="line-41">        <span class="nb">print</span><span class="p">(</span><span class="n">pin</span><span class="p">)</span>
</span><span id="line-42">        <span class="n">lpin</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pin</span><span class="p">)</span>
</span><span id="line-43">        <span class="k">if</span> <span class="n">lpin</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="line-44">            <span class="n">s1</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">30</span> <span class="o">+</span> <span class="mi">15</span><span class="p">)</span>
</span><span id="line-45">        <span class="k">elif</span> <span class="n">lpin</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="line-46">            <span class="n">s2</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">60</span> <span class="o">+</span> <span class="mi">15</span><span class="p">)</span>
</span><span id="line-47">        <span class="k">elif</span> <span class="n">lpin</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="line-48">            <span class="n">s3</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">90</span> <span class="o">+</span> <span class="mi">15</span><span class="p">)</span>
</span><span id="line-49">        <span class="k">elif</span> <span class="n">lpin</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="line-50">            <span class="n">s4</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span> <span class="o">+</span> <span class="mi">15</span><span class="p">)</span>
</span><span id="line-51">        <span class="k">elif</span> <span class="n">lpin</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
</span><span id="line-52">            <span class="n">s5</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">150</span> <span class="o">+</span> <span class="mi">15</span><span class="p">)</span>
</span><span id="line-53">        <span class="k">elif</span> <span class="n">lpin</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
</span><span id="line-54">            <span class="n">s6</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">180</span> <span class="o">+</span> <span class="mi">15</span><span class="p">)</span>
</span><span id="line-55">            <span class="n">code</span> <span class="o">=</span> <span class="n">check</span><span class="p">(</span><span class="n">pin</span><span class="p">)</span>
</span><span id="line-56">            <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="line-57">                <span class="n">txt</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">"Invalid Pin"</span><span class="p">)</span>
</span><span id="line-58">                <span class="n">unlocked</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="line-59">            <span class="k">else</span><span class="p">:</span>
</span><span id="line-60">                <span class="n">txt</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">"Unlocked: "</span> <span class="o">+</span> <span class="n">code</span><span class="p">[</span><span class="s1">'username'</span><span class="p">])</span>
</span><span id="line-61">                <span class="n">unlocked</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="line-62">            <span class="c1"># showpin(pin)</span>
</span><span id="line-63">        <span class="k">elif</span> <span class="n">lpin</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
</span><span id="line-64">            <span class="n">pin</span> <span class="o">=</span> <span class="s2">""</span>
</span><span id="line-65">            <span class="n">s1</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">30</span><span class="p">)</span>
</span><span id="line-66">            <span class="n">s2</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">60</span><span class="p">)</span>
</span><span id="line-67">            <span class="n">s3</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">90</span><span class="p">)</span>
</span><span id="line-68">            <span class="n">s4</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">120</span><span class="p">)</span>
</span><span id="line-69">            <span class="n">s5</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">150</span><span class="p">)</span>
</span><span id="line-70">            <span class="n">s6</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">180</span><span class="p">)</span>
</span><span id="line-71">            
</span><span id="line-72"><span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">entered_pin</span><span class="p">):</span>
</span><span id="line-73">    <span class="n">file_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">'/media/mmcblk0p1/postman/utilities/user.json'</span>
</span><span id="line-74">    <span class="k">try</span><span class="p">:</span>
</span><span id="line-75">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="line-76">            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="line-77">            <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="line-78">                <span class="k">if</span> <span class="n">entry</span><span class="p">[</span><span class="s1">'pincode'</span><span class="p">]</span> <span class="o">==</span> <span class="n">entered_pin</span><span class="p">:</span>
</span><span id="line-79">                    <span class="k">return</span> <span class="n">entry</span>
</span><span id="line-80">                <span class="k">else</span><span class="p">:</span>
</span><span id="line-81">                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="line-82">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="line-83">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Error reading the file: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="line-84">    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="line-85">
</span><span id="line-86"><span class="k">def</span> <span class="nf">set_file_permissions</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
</span><span id="line-87">    <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="mo">0o600</span><span class="p">)</span>  <span class="c1"># Set file to be readable and writable only by the owner</span>
</span><span id="line-88">    
</span><span id="line-89"><span class="k">def</span> <span class="nf">change_pin</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">new_pin</span><span class="p">):</span>
</span><span id="line-90">    <span class="n">file_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">'/media/mmcblk0p1/postman/utilities/user.json'</span>
</span><span id="line-91">    <span class="k">try</span><span class="p">:</span>
</span><span id="line-92">        <span class="c1"># Check if the file exists, if not create it with the user ID and blank fields</span>
</span><span id="line-93">        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
</span><span id="line-94">            <span class="n">initial_data</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">"user_id"</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s2">"username"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"pincode"</span><span class="p">:</span> <span class="s2">""</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)]</span>
</span><span id="line-95">            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="line-96">                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">initial_data</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</span><span id="line-97">                
</span><span id="line-98">        <span class="n">set_file_permissions</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="line-99">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="line-100">            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="line-101">        
</span><span id="line-102">        <span class="n">user_found</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="line-103">        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="line-104">            <span class="k">if</span> <span class="n">entry</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">]</span> <span class="o">==</span> <span class="n">user_id</span><span class="p">:</span>
</span><span id="line-105">                <span class="n">entry</span><span class="p">[</span><span class="s1">'username'</span><span class="p">]</span> <span class="o">=</span> <span class="n">username</span>
</span><span id="line-106">                <span class="n">entry</span><span class="p">[</span><span class="s1">'pincode'</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_pin</span>
</span><span id="line-107">                <span class="n">user_found</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="line-108">                <span class="k">break</span>
</span><span id="line-109">        
</span><span id="line-110">        <span class="k">if</span> <span class="ow">not</span> <span class="n">user_found</span><span class="p">:</span>
</span><span id="line-111">            <span class="nb">print</span><span class="p">(</span><span class="s2">"User ID not found."</span><span class="p">)</span>
</span><span id="line-112">            <span class="k">return</span> <span class="kc">False</span>
</span><span id="line-113">        
</span><span id="line-114">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="line-115">            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</span><span id="line-116">        <span class="k">return</span> <span class="kc">True</span>
</span><span id="line-117">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="line-118">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Error updating the file: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="line-119">        <span class="k">return</span> <span class="kc">False</span>
</span><span id="line-120">        
</span><span id="line-121"><span class="k">def</span> <span class="nf">passcode</span><span class="p">():</span>
</span><span id="line-122">    <span class="k">global</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span> <span class="n">s4</span><span class="p">,</span> <span class="n">s5</span><span class="p">,</span> <span class="n">s6</span><span class="p">,</span> <span class="n">txt</span>
</span><span id="line-123">    <span class="n">gui</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="line-124">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">30</span> <span class="o">+</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-125">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">60</span> <span class="o">+</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-126">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">90</span> <span class="o">+</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-127">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span> <span class="o">+</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-128">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">150</span> <span class="o">+</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-129">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">180</span> <span class="o">+</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-130">    
</span><span id="line-131">    <span class="n">txt</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">draw_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">"Enter 6-Digit Pin"</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"#0000FF"</span><span class="p">)</span>
</span><span id="line-132">    <span class="n">s1</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">fill_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">30</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-133">    <span class="n">s2</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">fill_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">60</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-134">    <span class="n">s3</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">fill_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">90</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-135">    <span class="n">s4</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">fill_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">120</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-136">    <span class="n">s5</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">fill_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">150</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-137">    <span class="n">s6</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">fill_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="mi">180</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
</span><span id="line-138">    
</span><span id="line-139">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"1"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"1"</span><span class="p">))</span>
</span><span id="line-140">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"2"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"2"</span><span class="p">))</span>
</span><span id="line-141">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"3"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"3"</span><span class="p">))</span>
</span><span id="line-142">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">160</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"4"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"4"</span><span class="p">))</span>
</span><span id="line-143">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">160</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"5"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"5"</span><span class="p">))</span>
</span><span id="line-144">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">160</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"6"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"6"</span><span class="p">))</span>
</span><span id="line-145">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">220</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"7"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"7"</span><span class="p">))</span>
</span><span id="line-146">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">220</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"8"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"8"</span><span class="p">))</span>
</span><span id="line-147">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">220</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"9"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"9"</span><span class="p">))</span>
</span><span id="line-148">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">280</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"0"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"0"</span><span class="p">))</span>
</span><span id="line-149">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">280</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"Clear"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">pincode</span><span class="p">(</span><span class="s2">"clc"</span><span class="p">))</span>
</span><span id="line-150">    <span class="n">gui</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">280</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"Home"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">home</span><span class="p">())</span>
</span><span id="line-151">    
</span><span id="line-152"><span class="k">def</span> <span class="nf">request_open</span><span class="p">():</span>
</span><span id="line-153">    <span class="n">gui</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="line-154">    <span class="n">gui</span><span class="o">.</span><span class="n">fill_circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">115</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">"Open clicked"</span><span class="p">))</span>
</span><span id="line-155">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">115</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"Open"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">"Open clicked"</span><span class="p">))</span>
</span><span id="line-156">    <span class="n">gui</span><span class="o">.</span><span class="n">fill_round_rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">230</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"orange"</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">home</span><span class="p">())</span>
</span><span id="line-157">    <span class="n">gui</span><span class="o">.</span><span class="n">draw_text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">'Home'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="n">home</span><span class="p">())</span>    
</span><span id="line-158">
</span><span id="line-159"><span class="k">def</span> <span class="nf">unlock</span><span class="p">():</span>
</span><span id="line-160">    <span class="nb">print</span><span class="p">(</span><span class="s1">'unlock'</span><span class="p">)</span>
</span><span id="line-161">    <span class="n">passcode</span><span class="p">()</span>
</span><span id="line-162">    <span class="k">global</span> <span class="n">unlocked</span>
</span><span id="line-163">    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="line-164">    <span class="k">if</span> <span class="n">unlocked</span><span class="p">:</span>
</span><span id="line-165">        <span class="n">request_open</span><span class="p">()</span>
</span><span id="line-166">        <span class="n">unlocked</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="line-167">    <span class="k">elif</span> <span class="n">unlocked</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="line-168">        <span class="n">home</span><span class="p">()</span>
</span><span id="line-169">    <span class="k">elif</span><span class="p">(</span><span class="n">unlocked</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="line-170">        <span class="k">pass</span>
</span><span id="line-171">    
</span><span id="line-172"><span class="k">def</span> <span class="nf">call</span><span class="p">():</span>
</span><span id="line-173">    <span class="k">pass</span>
</span><span id="line-174">
</span><span id="line-175"><span class="k">def</span> <span class="nf">message</span><span class="p">():</span>
</span><span id="line-176">    <span class="k">pass</span>
</span><span id="line-177">
</span><span id="line-178"><span class="k">def</span> <span class="nf">system</span><span class="p">():</span>
</span><span id="line-179">    <span class="k">pass</span>
</span><span id="line-180">
</span><span id="line-181"><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span id="line-182">    <span class="n">home</span><span class="p">()</span>
</span><span id="line-183">    
</span><span id="line-184">    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="line-185">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="line-186">    
</span><span id="line-187"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
</span><span id="line-188">    <span class="n">main</span><span class="p">()</span>
</span></pre>
       </div>
      </div>
     </div>
     <div class="preview-pane" id="code-widget-657610">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          unihiker_uart.py
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          Python
         </span>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax all">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="kn">from</span> <span class="nn">pinpong.board</span> <span class="kn">import</span> <span class="n">UART</span>
</span><span id="line-2">
</span><span id="line-3"><span class="k">class</span> <span class="nc">Serial</span><span class="p">:</span>
</span><span id="line-4">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bus</span><span class="p">,</span> <span class="n">baudrate</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="line-5">        <span class="c1"># Initialize UART with the specified parameters</span>
</span><span id="line-6">        <span class="bp">self</span><span class="o">.</span><span class="n">uart1</span> <span class="o">=</span> <span class="n">UART</span><span class="p">(</span><span class="n">bus_num</span><span class="o">=</span><span class="n">bus</span><span class="p">)</span>  <span class="c1"># Use bus parameter for flexibility</span>
</span><span id="line-7">        <span class="bp">self</span><span class="o">.</span><span class="n">uart1</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">baud_rate</span><span class="o">=</span><span class="n">baudrate</span><span class="p">,</span> <span class="n">bits</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">parity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="line-8">        
</span><span id="line-9">    <span class="k">def</span> <span class="nf">readline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="line-10">        <span class="n">data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">''</span>
</span><span id="line-11">        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">uart1</span><span class="o">.</span><span class="n">any</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="line-12">            <span class="n">data</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uart1</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="line-13">        
</span><span id="line-14">        <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
</span><span id="line-15">            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ascii_to_char</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="line-16">        <span class="k">return</span> <span class="n">data</span>
</span><span id="line-17">
</span><span id="line-18">    <span class="k">def</span> <span class="nf">ascii_to_char</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ascii_values</span><span class="p">):</span>
</span><span id="line-19">        <span class="k">return</span> <span class="s1">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">ascii_values</span><span class="p">)</span>
</span><span id="line-20">
</span><span id="line-21">    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="line-22">        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="line-23">            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>  <span class="c1"># Convert string to bytes if necessary</span>
</span><span id="line-24">        <span class="bp">self</span><span class="o">.</span><span class="n">uart1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></pre>
       </div>
      </div>
     </div>
     <div class="preview-pane" id="code-widget-657600">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          testwebcam.py
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          Python
         </span>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax all">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="kn">import</span> <span class="nn">cv2</span>
</span><span id="line-2"><span class="kn">import</span> <span class="nn">time</span>
</span><span id="line-3"><span class="c1"># from unihiker import Audio</span>
</span><span id="line-4"><span class="kn">import</span> <span class="nn">os</span>
</span><span id="line-5"><span class="c1"># import subprocess</span>
</span><span id="line-6"><span class="kn">from</span> <span class="nn">pinpong.board</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="line-7"><span class="kn">from</span> <span class="nn">pinpong.extension.unihiker</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="line-8">
</span><span id="line-9"><span class="n">Board</span><span class="p">()</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
</span><span id="line-10"><span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> 
</span><span id="line-11"><span class="c1"># audio = Audio()  </span>
</span><span id="line-12">    
</span><span id="line-13"><span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_BUFFERSIZE</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> 
</span><span id="line-14"><span class="n">fourcc</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter_fourcc</span><span class="p">(</span><span class="o">*</span><span class="s1">'XVID'</span><span class="p">)</span>
</span><span id="line-15"><span class="n">out</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter</span><span class="p">(</span><span class="s1">'temp.avi'</span><span class="p">,</span> <span class="n">fourcc</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">))</span>
</span><span id="line-16"><span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="line-17"><span class="n">frame_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="line-18"><span class="c1"># audio.start_record('output.wav')</span>
</span><span id="line-19"><span class="k">while</span><span class="p">(</span><span class="n">cap</span><span class="o">.</span><span class="n">isOpened</span><span class="p">()):</span>  
</span><span id="line-20">    <span class="n">ret</span><span class="p">,</span> <span class="n">img</span> <span class="o">=</span> <span class="n">cap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> 
</span><span id="line-21">    <span class="k">if</span> <span class="n">ret</span><span class="p">:</span> 
</span><span id="line-22">        <span class="n">frame_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="line-23">        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="line-24">        <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">current_time</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="line-25">
</span><span id="line-26">        <span class="k">if</span> <span class="n">elapsed_time</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>  <span class="c1"># Update every second</span>
</span><span id="line-27">            <span class="n">actual_fps</span> <span class="o">=</span> <span class="n">frame_count</span> <span class="o">/</span> <span class="n">elapsed_time</span>
</span><span id="line-28">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Actual capture frame rate: </span><span class="si">{</span><span class="n">actual_fps</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="line-29">            <span class="n">start_time</span> <span class="o">=</span> <span class="n">current_time</span>
</span><span id="line-30">            <span class="n">frame_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="line-31">            
</span><span id="line-32">        <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="line-33">        
</span><span id="line-34">        <span class="k">if</span> <span class="n">button_a</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span> <span class="c1"># Press the "a" key on Unihiker will stop the program.</span>
</span><span id="line-35">            <span class="c1"># audio.stop_record()</span>
</span><span id="line-36">            <span class="nb">print</span><span class="p">(</span><span class="s2">"exit"</span><span class="p">)</span>
</span><span id="line-37">            <span class="k">break</span> 
</span><span id="line-38">    <span class="k">else</span><span class="p">:</span>
</span><span id="line-39">        <span class="k">break</span>
</span><span id="line-40"><span class="nb">print</span><span class="p">(</span><span class="s2">"Release writer and camera"</span><span class="p">)</span>
</span><span id="line-41"><span class="n">cap</span><span class="o">.</span><span class="n">release</span><span class="p">()</span> <span class="c1"># Release usb camera. </span>
</span><span id="line-42"><span class="n">out</span><span class="o">.</span><span class="n">release</span><span class="p">()</span> <span class="c1"># Release video writer</span>
</span><span id="line-43"><span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span> <span class="c1"># Destory all windows created by opencv.</span>
</span><span id="line-44"><span class="c1"># cmd = "ffmpeg -y -ac 2 -channel_layout mono -i output.wav -i output.avi -pix_fmt yuv420p test.avi"</span>
</span><span id="line-45"><span class="c1"># subprocess.call(cmd, shell=True)</span>
</span><span id="line-46"><span class="c1"># os.remove('output.wav')</span>
</span><span id="line-47"><span class="c1"># os.remove('output.avi')</span>
</span></pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="project-attachment">
    <div class="header">
     <div class="text">
      <h3 class="hckui__typography__h3">
       GitHub Project Postman
      </h3>
     </div>
    </div>
    <a href="https://github.com/rashawnoverton/project-postman">
     Github
    </a>
   </div>
  </section>
  <div class="project-section-break">
  </div>
  <div class="project-section-break">
  </div>
 </div>
</div>
