<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css"><link rel="stylesheet" href="../custom.css"><div class="middle-column">
 <section id="overview">
  <h1 class="hckui__typography__h1" itemprop="name">
   Smart Mobility Aid with GPS and Obstacle Detection
  </h1>
  <p class="hckui__typography__bodyL hckui__layout__marginBottom15" itemprop="description">
   Smart Mobility Aid: GPS and obstacle detection for safer, independent navigation with real-time feedback.
  </p>
  <div class="hckui__layout__marginTop30">
   <div class="project-cover-image" itemprop="image" itemscope="" itemtype="https://schema.org/ImageObject">
    <meta content="https://hackster.imgix.net/uploads/attachments/1753228/_n3irClKZSk.blob?auto=compress&amp;w=900&amp;h=675&amp;fit=min&amp;fm=jpg" itemprop="url"/>
    <meta content="900" itemprop="width"/>
    <meta content="675" itemprop="height"/>
    <img alt="Smart Mobility Aid with GPS and Obstacle Detection" src="0.jpg"/>
   </div>
  </div>
 </section>
 <div class="project-section-break">
 </div>
 <div id="project_page_simple_ad_portal">
 </div>
 <div id="description" itemprop="articleBody">
  <section id="things">
   <div class="project-section-title">
    <h2 class="hckui__typography__h2 title-with-anchor">
     <span>
      Things used in this project
     </span>
    </h2>
   </div>
   <div class="project-parts">
    <div class="view-expanded" style="display:block">
     <table class="project-parts-table">
      <colgroup>
       <col style="width: 100px; height: 50px;"/>
       <col style="width: auto;"/>
      </colgroup>
      <tbody>
       <tr class="head">
        <td colspan="2">
         <h3 class="hckui__typography__h3">
          Hardware components
         </h3>
        </td>
        <tr>
         <td class="part-img">
          <img alt="Seeed Studio XIAO ESP32S3 Sense" src="1.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1650360/screenshot_2023-11-20_at_17_16_09_QdLoLAbseq.png?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1650360/screenshot_2023-11-20_at_17_16_09_QdLoLAbseq.png?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Seeed Studio XIAO ESP32S3 Sense","href":"/seeed/products/seeed-studio-xiao-esp32s3-sense?ref=project-372074","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/seeed/products/seeed-studio-xiao-esp32s3-sense?ref=project-372074">
           Seeed Studio XIAO ESP32S3 Sense
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Blues Notecard (Cellular)" src="2.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1708752/wbnan-front_tdId2xJ1V4.png?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1708752/wbnan-front_tdId2xJ1V4.png?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Blues Notecard (Cellular)","href":"/blues-wireless/products/blues-notecard-cellular?ref=project-372074","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/blues-wireless/products/blues-notecard-cellular?ref=project-372074">
           Blues Notecard (Cellular)
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
         </td>
         <td class="hckui__typography__bodyL">
          Aaware Ultrasonic Sensors
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Solar Cockroach Vibrating Disc Motor" src="3.jpg" srcset="https://hackster.imgix.net/uploads/attachments/517715/vibrating-disk_V49KRCcMgA.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/517715/vibrating-disk_V49KRCcMgA.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Brown Dog Gadgets Solar Cockroach Vibrating Disc Motor","href":"/brown-dog-gadgets/products/solar-cockroach-vibrating-disc-motor?ref=project-372074","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/brown-dog-gadgets/products/solar-cockroach-vibrating-disc-motor?ref=project-372074">
           Brown Dog Gadgets Solar Cockroach Vibrating Disc Motor
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="9V battery (generic)" src="4.jpg" srcset="https://hackster.imgix.net/uploads/image/file/79856/tens70.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/image/file/79856/tens70.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          9V battery (generic)
         </td>
        </tr>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
  </section>
  <div class="project-section-break">
  </div>
  <section id="story">
   <div class="project-section-title">
    <h2 class="hckui__typography__h2 title-with-anchor">
     <span>
      Story
     </span>
    </h2>
   </div>
   <div class="project-story collapsible-section collapsed hljs-active hljs-monokai" itemprop="text">
    <ul class="hckui__typography__bodyL">
     <li>
      <span>
       Title:
      </span>
      <br/>
      <span>
       Compact Obstacle Detection with GPS Navigation System Using XIAO ESP32S3 Sense and NOTECARD CELLULAR NBGL
      </span>
      <br/>
     </li>
     <li>
      <span>
       Abstract
      </span>
      <br/>
      <span>
       Independent navigation through urban areas is still a huge challenge for people with different kinds of mobility impairments because of various complex topography and lack of accessible means to navigate. We present a compact mobility aid system integrated with obstacle detection and GPS capability to offer real-time navigation assistance. The system, with an XIAO ESP32S3 Sense microcontroller performing the processing, along with a NOTECARD CELLULAR NBGL for GPS and cellular communication, provides dynamic obstacle feedback and precise navigation. It improves user independence and access, enabling a safer and more inclusive experience in urban centers. The mobility aid should be lightweight and portable to easily fit within existing mobility devices or act independently as an aid.
      </span>
      <br/>
      <br/>
     </li>
     <li>
      <span>
       1. Introduction
      </span>
      <br/>
      <span>
       1.1 Background
      </span>
      <br/>
      <span>
       The challenges of navigating urban environments are numerous, including but not limited to obstacles, slopes, and general lack of good accessible navigation aids. Most of the existing solutions lack the incorporation of real-time obstacle detection and navigation guidance, which impacts the user autonomy and safety considerably.
      </span>
      <br/>
      <br/>
      <span>
       1.2 Objectives
      </span>
      <br/>
      <span>
       The main purpose of this project is to create a compact and efficient mobility aid system that integrates obstacle detection with GPS navigation. It also needs to provide real-time obstacle and useful intelligence through an urban environment to maximize the user's independence and safety in general.
      </span>
      <br/>
      <br/>
     </li>
     <li>
      <span>
       2. System Components
      </span>
      <br/>
      <span>
       2.1 XIAO ESP32S3 Sense
      </span>
      <br/>
      <span>
       XIAO ESP32S3 Sense is such a type of general-purpose microcontroller, featuring low power and connectivity. The key feature list is provided below:
      </span>
      <br/>
      <br/>
      <span>
       Processor: Dual-core processor with efficient multitasking
      </span>
      <br/>
      <span>
       Memory: Sufficient RAM and Flash MEMORY to perform sensor reading and algorithm processing
      </span>
      <br/>
      <span>
       Onboard Wi-Fi and Bluetooth
      </span>
      <br/>
      <span>
       2.2 NOTECARD CELLULAR NBGL
      </span>
      <br/>
      <span>
       This is a type of cellular module. The main functionality or feature set that attributes to such modules is done by on-GPS functionalities to provide accurate localization insight.
      </span>
      <br/>
      <span>
       Cellular Connectivity: Provides uninterruptable communication and data transmission.
      </span>
      <br/>
      <span>
       2.3 Obstacle Detection
      </span>
      <br/>
      <span>
       The detection of obstacles in the system is done using ultrasonic or infrared sensors. Particular details are as follows:
      </span>
      <br/>
      <br/>
      <span>
       Ultrasonic Sensors: The distance is measured by ultrasonic sensors through emitting sound waves and measuring the time it takes for the echo to reach back.
      </span>
      <br/>
      <span>
       Infrared Sensors: Obstacles can be detected based on reflected infrared light.
      </span>
      <br/>
      <span>
       2.4 Feedback Mechanism
      </span>
      <br/>
      <span>
       The system offers several feedback mechanisms:
      </span>
      <br/>
      <br/>
      <span>
       Auditory Feedback: Voice prompts or beeps to alert users regarding obstacles.
      </span>
      <br/>
      <span>
       Haptic Feedback: Vibration alerts smooth
      </span>
      <br/>
      <span>
       Visual Feedback: It shall be integrated into the App and shall display the navigation map amongst other options.
      </span>
      <br/>
      <span>
       2.5 Power Supply
      </span>
      <br/>
      <span>
       Battery: Lithium-ion rechargeable battery with enough capacity to use it continuously.
      </span>
      <br/>
     </li>
     <li>
      <span>
       3. System Operation
      </span>
      <br/>
      <span>
       3.1 Initialization
      </span>
      <br/>
      <span>
       Power On: It shall start the operation of the entire device by using a power switch.
      </span>
      <br/>
      <span>
       Establish the Connection: It shall establish connections with the GPS satellites and cellular networks.
      </span>
      <br/>
      <span>
       3.2 Obstacle Detection
      </span>
      <br/>
      <span>
       Sensor ON: Consistent scanning of obstacles
      </span>
      <br/>
      <span>
       Data Processing: Computes the distance and triggers the mechanisms of feedback.
      </span>
      <br/>
      <span>
       Obstacle Detection Feedback: Indicates immediate obstacles through instant alerts.
      </span>
      <br/>
      <span>
       3.3 GPS Navigation
      </span>
      <br/>
      <span>
       Location Tracking: Uses the NOTECARD CELLULAR NBGL for real-time GPS location data.
      </span>
      <br/>
      <span>
       Route Guidance: Navigate through voice or a display.
      </span>
      <br/>
      <span>
       Re-routing: Dynamic routes according to movement of user and obstacles that come in the way.
      </span>
      <br/>
     </li>
     <li>
      <span>
       4. Development and Testing
      </span>
      <br/>
      <span>
       4.1 Prototyping
      </span>
      <br/>
      <span>
       Component Integration: allows assembly and connection of sensors, the microcontroller, and GPS module with each other
      </span>
      <br/>
      <span>
       Software Development: the firmware to be written and checked for sensor data treatment and integration with GPS
      </span>
      <br/>
      <span>
       4.2 Testing
      </span>
      <br/>
      <span>
       Lab Testing: This should be done to verify the accuracy of obstacle detection and GPS functionality within controlled test environments.
      </span>
      <br/>
      <span>
       Field Testing: It should also be tested in real-world urban environments to ascertain the performance and reliability.
      </span>
      <br/>
      <span>
       User Feedback: General feedback should be acquired to identify areas of improvement from potential users or persons with mobility challenges.
      </span>
      <br/>
      <span>
       4.3 Iteration
      </span>
      <br/>
      <span>
       Further Development: The design should be refined according to the test results and feedback from the users.
      </span>
      <br/>
      <span>
       Mass Production Scaling: Strategies put in place for mass production and deployment.
      </span>
      <br/>
     </li>
     <li>
      <span>
       5. Problems and Solutions
      </span>
      <br/>
      <span>
       5.1 Obstacle Detection
      </span>
      <br/>
      <span>
       Problem: Detection of all kinds of obstacles accurately.
      </span>
      <br/>
      <span>
       Solution: Advanced sensor data processing algorithms will be implemented and integration of multiple sensor types.
      </span>
      <br/>
      <span>
       5.2 GPS Accuracy
      </span>
      <br/>
      <span>
       Problem: Reliable GPS tracking is difficult in urban environments as signal interference may easily happen.
      </span>
      <br/>
      <span>
       Solution: High-precision GPS modules and integrated signals boosting techniques.
      </span>
      <br/>
      <span>
       5.3 Battery Life
      </span>
      <br/>
      <span>
       Problem: Power consumption vs. the function of a device.
      </span>
      <br/>
      <span>
       Solution: Optimizing code for low power consumption and applying high-capacity batteries, as well as appropriate hardware.
      </span>
      <br/>
     </li>
     <li>
      <span>
       6. Explanation of the Code and Improvements
      </span>
      <br/>
      <span>
       6.1 Overview of the Code
      </span>
      <br/>
      <span>
       The attached Arduino code marries GPS and obstacle-sensing functionalities on the XIAO ESP32S3 Sense and NOTECARD CELLULAR NBGL devices. Important functionalities under the code include:
      </span>
      <br/>
      <br/>
      <span>
       Initialization of Sensors: In this part of the code, pins are configured for ultrasonic sensors plus pins for feedback mechanisms.
      </span>
      <br/>
      <span>
       Obstacle detection logic: Measures distances and triggers feedback mechanisms based on proximity.
      </span>
      <br/>
      <span>
       Handling of GPS Data: This part invokes and processes GPS data from the NOTECARD CELLULAR NBGL.
      </span>
      <br/>
      <span>
       6.2 Improvements on the Code Given
      </span>
      <br/>
      <span>
       Error Checking: Do intensive error checking while retrieving GPS information or sensor readings.
      </span>
      <br/>
      <span>
       Power Management: The design should also provide options for different power-saving modes in order to extend the battery life of the device. Feedback Customization: The user should be allowed to configure the feedback options through the mobile application or a settings interface.
      </span>
     </li>
     <li>
      <span>
       7. Future Work and Applications                                                                              7.1 Future Work Advanced Sensor Integration: Further integration of other sensors to explicitly detect obstacles can be made. Machine Learning: Obstacle detection using machine learning algorithms and further guidance of these using the algorithms is possible. 7.2 Applications Mobility Devices: Integration with wheelchairs, walkers, and other mobility aids.
      </span>
      <br/>
      <span>
       Urban Navigation: Use this to allow sophisticated urban navigation with mapping apps.
      </span>
      <br/>
     </li>
     <li>
      <span>
       8. Conclusion
      </span>
      <br/>
      <span>
       This compact mobility aid system using the XIAO ESP32S3 Sense and NOTECARD CELLULAR NBGL is a revolutionary improvement in assistive technology. Bringing together both obstacle detection and GPS navigation, the system hosts the potential to enable people who face mobility impairment a harmonious blend of user autonomy and safety in an urban setting.
      </span>
      <br/>
      <br/>
      <span>
       References
      </span>
      <br/>
      <span>
       Datasheets: XIAO ESP32S3 Sense, NOTECARD CELLULAR NBGL.
      </span>
      <br/>
      <span>
       Documentation: Arduino IDE, Notecard API documentation, etc.
      </span>
      <br/>
      <span>
       Literature: A few related research papers concerning assistive technology and mobility aids.
      </span>
      <br/>
      <span>
       Appendix
      </span>
      <br/>
      <span>
       A. Circuit Diagram
      </span>
      <br/>
      <span>
       Diagram: A detailed circuit diagram showing the connections between the components.
      </span>
      <br/>
      <span>
       B. Software Installation
      </span>
      <br/>
      <span>
       Instructions: Step-by-step installation and uploading of code in Arduino IDE.
      </span>
      <br/>
      <span>
       C. User Manual
      </span>
      <br/>
      <span>
       Instructions: The specific steps that a user would go through in operating the mobility aid system.
      </span>
      <br/>
      <br/>
      <br/>
      <br/>
      <span>
       C++ Syntax:
      </span>
     </li>
     <li>
      <span>
       The code has typical C++ syntax; that is, it includes libraries with #include &lt;Library&gt;, Arduino sketches use the functions void setup() and void loop(), and Serial.begin(115200) to start serial communication.
      </span>
      <br/>
      <span>
       Arduino Platform: Code written on the Arduino platform is more or less C++; however, C++ in Arduino is a watered-down version that embedded system programmers use to interface with a microcontroller.
      </span>
      <br/>
      <span>
       Below is a simple explanation of the C++ features used in the code:
      </span>
      <br/>
      <br/>
      <span>
       Preprocessor Directives: #include &lt;Wire.h&gt; and #include &lt;Adafruit_Sensor.h&gt; are used to include the necessary libraries. Variables and Data Type: Variable usage includes int, long, const. Control Structures: Using control structures if and else for decision making. Functions: Specific functions defined in the Arduino framework are used such as setup() and loop(), but those are written in C++.
      </span>
     </li>
    </ul>
   </div>
  </section>
  <div class="project-section-break">
  </div>
  <section id="code">
   <div class="project-section-title">
    <h2 class="hckui__typography__h2 title-with-anchor">
     <span>
      Code
     </span>
    </h2>
   </div>
   <div class="project-attachment project-code-widget single-file">
    <div class="tabs hckui__typography__bodyS">
     <ul>
      <li class="active">
       <a data-target="#code-widget-657116" href="javascript:void(0)">
        code
       </a>
      </li>
     </ul>
    </div>
    <div class="preview-container">
     <div class="preview-pane active" id="code-widget-657116">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          code
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          C/C++
         </span>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax all">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
</span><span id="line-2"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Adafruit_Sensor.h&gt;</span><span class="cp"></span>
</span><span id="line-3"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Adafruit_LSM6DSOX.h&gt;</span><span class="cp"></span>
</span><span id="line-4"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Adafruit_LIS3MDL.h&gt;</span><span class="cp"></span>
</span><span id="line-5"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Notecard.h&gt;</span><span class="cp"></span>
</span><span id="line-6">
</span><span id="line-7"><span class="c1">// Define pins for ultrasonic sensor</span>
</span><span id="line-8"><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">trigPin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span><span class="w"></span>
</span><span id="line-9"><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">echoPin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"></span>
</span><span id="line-10"><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">motorPin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w">  </span><span class="c1">// For haptic feedback</span>
</span><span id="line-11">
</span><span id="line-12"><span class="c1">// Define distance threshold (in cm)</span>
</span><span id="line-13"><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
</span><span id="line-14">
</span><span id="line-15"><span class="c1">// Instantiate Notecard object</span>
</span><span id="line-16"><span class="n">Notecard</span><span class="w"> </span><span class="n">notecard</span><span class="p">;</span><span class="w"></span>
</span><span id="line-17">
</span><span id="line-18"><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-19"><span class="w">  </span><span class="c1">// Initialize serial communication</span>
</span><span id="line-20"><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span><span class="w"></span>
</span><span id="line-21">
</span><span id="line-22"><span class="w">  </span><span class="c1">// Initialize pins</span>
</span><span id="line-23"><span class="w">  </span><span class="n">pinMode</span><span class="p">(</span><span class="n">trigPin</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span><span class="w"></span>
</span><span id="line-24"><span class="w">  </span><span class="n">pinMode</span><span class="p">(</span><span class="n">echoPin</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT</span><span class="p">);</span><span class="w"></span>
</span><span id="line-25"><span class="w">  </span><span class="n">pinMode</span><span class="p">(</span><span class="n">motorPin</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span><span class="w"></span>
</span><span id="line-26">
</span><span id="line-27"><span class="w">  </span><span class="c1">// Ensure motor is off initially</span>
</span><span id="line-28"><span class="w">  </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">motorPin</span><span class="p">,</span><span class="w"> </span><span class="n">LOW</span><span class="p">);</span><span class="w"></span>
</span><span id="line-29">
</span><span id="line-30"><span class="w">  </span><span class="c1">// Initialize Notecard</span>
</span><span id="line-31"><span class="w">  </span><span class="n">notecard</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span><span class="w"></span>
</span><span id="line-32"><span class="w">  </span><span class="n">notecard</span><span class="p">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="s">"card.status"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-33">
</span><span id="line-34"><span class="w">  </span><span class="c1">// Configure GPS</span>
</span><span id="line-35"><span class="w">  </span><span class="n">notecard</span><span class="p">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="s">"{</span><span class="se">\"</span><span class="s">req</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">card.location.mode</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">mode</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">periodic</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">seconds</span><span class="se">\"</span><span class="s">:60}"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-36"><span class="p">}</span><span class="w"></span>
</span><span id="line-37">
</span><span id="line-38"><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-39"><span class="w">  </span><span class="c1">// Send a pulse to trigger the ultrasonic sensor</span>
</span><span id="line-40"><span class="w">  </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">trigPin</span><span class="p">,</span><span class="w"> </span><span class="n">LOW</span><span class="p">);</span><span class="w"></span>
</span><span id="line-41"><span class="w">  </span><span class="n">delayMicroseconds</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
</span><span id="line-42"><span class="w">  </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">trigPin</span><span class="p">,</span><span class="w"> </span><span class="n">HIGH</span><span class="p">);</span><span class="w"></span>
</span><span id="line-43"><span class="w">  </span><span class="n">delayMicroseconds</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
</span><span id="line-44"><span class="w">  </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">trigPin</span><span class="p">,</span><span class="w"> </span><span class="n">LOW</span><span class="p">);</span><span class="w"></span>
</span><span id="line-45">
</span><span id="line-46"><span class="w">  </span><span class="c1">// Measure the echo time</span>
</span><span id="line-47"><span class="w">  </span><span class="kt">long</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pulseIn</span><span class="p">(</span><span class="n">echoPin</span><span class="p">,</span><span class="w"> </span><span class="n">HIGH</span><span class="p">);</span><span class="w"></span>
</span><span id="line-48"><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.034</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// Calculate distance in cm</span>
</span><span id="line-49">
</span><span id="line-50"><span class="w">  </span><span class="c1">// Check if an obstacle is within the threshold</span>
</span><span id="line-51"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">distance</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-52"><span class="w">    </span><span class="c1">// Activate haptic feedback</span>
</span><span id="line-53"><span class="w">    </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">motorPin</span><span class="p">,</span><span class="w"> </span><span class="n">HIGH</span><span class="p">);</span><span class="w"></span>
</span><span id="line-54"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-55"><span class="w">    </span><span class="c1">// Deactivate haptic feedback</span>
</span><span id="line-56"><span class="w">    </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">motorPin</span><span class="p">,</span><span class="w"> </span><span class="n">LOW</span><span class="p">);</span><span class="w"></span>
</span><span id="line-57"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-58">
</span><span id="line-59"><span class="w">  </span><span class="c1">// Request GPS data</span>
</span><span id="line-60"><span class="w">  </span><span class="n">J</span><span class="w"> </span><span class="o">*</span><span class="n">req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">notecard</span><span class="p">.</span><span class="n">newRequest</span><span class="p">(</span><span class="s">"card.location"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-61"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">req</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-62"><span class="w">    </span><span class="n">J</span><span class="w"> </span><span class="o">*</span><span class="n">rsp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">notecard</span><span class="p">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">req</span><span class="p">);</span><span class="w"></span>
</span><span id="line-63"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rsp</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-64"><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">JGetString</span><span class="p">(</span><span class="n">rsp</span><span class="p">,</span><span class="w"> </span><span class="s">"status"</span><span class="p">));</span><span class="w"></span>
</span><span id="line-65"><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">JGetString</span><span class="p">(</span><span class="n">rsp</span><span class="p">,</span><span class="w"> </span><span class="s">"mode"</span><span class="p">));</span><span class="w"></span>
</span><span id="line-66"><span class="w">      </span><span class="n">JDelete</span><span class="p">(</span><span class="n">rsp</span><span class="p">);</span><span class="w"></span>
</span><span id="line-67"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-68"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-69">
</span><span id="line-70"><span class="w">  </span><span class="c1">// Short delay before next measurement</span>
</span><span id="line-71"><span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w"></span>
</span></pre>
       </div>
      </div>
     </div>
    </div>
   </div>
  </section>
  <div class="project-section-break">
  </div>
  <div class="project-section-break">
  </div>
 </div>
</div>
