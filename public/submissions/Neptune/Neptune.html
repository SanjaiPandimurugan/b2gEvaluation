<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css"><link rel="stylesheet" href="../custom.css"><div class="middle-column">
 <section id="overview">
  <h1 class="hckui__typography__h1" itemprop="name">
   Neptune
  </h1>
  <p class="hckui__typography__bodyL hckui__layout__marginBottom15" itemprop="description">
   IR Remote Control for TV &amp; Portable Lamp, and Light Monitor with Fire Alarm by Using Blues Notecarrier-A, Cardputer and XIAO ESP32S3
  </p>
  <div class="hckui__layout__marginTop30">
   <div class="hckui__layout__hiddenMedUp">
   </div>
   <div class="project-cover-image" itemprop="image" itemscope="" itemtype="https://schema.org/ImageObject">
    <meta content="https://hackster.imgix.net/uploads/attachments/1733824/_KKcW0iMoGP.blob?auto=compress&amp;w=900&amp;h=675&amp;fit=min&amp;fm=jpg" itemprop="url"/>
    <meta content="900" itemprop="width"/>
    <meta content="675" itemprop="height"/>
    <img alt="Neptune" src="42.jpg"/>
   </div>
  </div>
 </section>
 <div class="project-section-break">
 </div>
 <div id="project_page_simple_ad_portal">
 </div>
 <div id="description" itemprop="articleBody">
  <section id="things">
   <div class="project-section-title">
    <h2 class="hckui__typography__h2 title-with-anchor">
     <span>
      Things used in this project
     </span>
    </h2>
   </div>
   <div class="project-parts">
    <div class="view-expanded" style="display:block">
     <table class="project-parts-table">
      <colgroup>
       <col style="width: 100px; height: 50px;"/>
       <col style="width: auto;"/>
      </colgroup>
      <tbody>
       <tr class="head">
        <td colspan="2">
         <h3 class="hckui__typography__h3">
          Hardware components
         </h3>
        </td>
        <tr>
         <td class="part-img">
          <img alt="Blues Notecarrier A" src="43.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1431807/CARR_AL_2.0_front_1800x1800.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1431807/CARR_AL_2.0_front_1800x1800.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Blues Notecarrier A","href":"/blues-wireless/products/blues-notecarrier-a?ref=project-85a46d","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/blues-wireless/products/blues-notecarrier-a?ref=project-85a46d">
           Blues Notecarrier A
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
         </td>
         <td class="hckui__typography__bodyL">
          Cardputer
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Seeed Studio XIAO ESP32S3 Sense" src="44.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1650360/screenshot_2023-11-20_at_17_16_09_QdLoLAbseq.png?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1650360/screenshot_2023-11-20_at_17_16_09_QdLoLAbseq.png?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Seeed Studio XIAO ESP32S3 Sense","href":"/seeed/products/seeed-studio-xiao-esp32s3-sense?ref=project-85a46d","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/seeed/products/seeed-studio-xiao-esp32s3-sense?ref=project-85a46d">
           Seeed Studio XIAO ESP32S3 Sense
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Seeed Studio XIAO SAMD21 (Pre-Soldered) - Seeeduino XIAO" src="45.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1445218/seeeduino-xiao-preview_6EThmqt2N6.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1445218/seeeduino-xiao-preview_6EThmqt2N6.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Seeed Studio XIAO SAMD21 (Pre-Soldered) - Seeeduino XIAO","href":"/seeed/products/seeed-studio-xiao-samd21-pre-soldered-seeeduino-xiao?ref=project-85a46d","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/seeed/products/seeed-studio-xiao-samd21-pre-soldered-seeeduino-xiao?ref=project-85a46d">
           Seeed Studio XIAO SAMD21 (Pre-Soldered) - Seeeduino XIAO
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Grove Shield for Seeeduino XIAO - with embedded battery management chip" src="46.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1443566/xiao_-preview-25_YOYZK9MZYo.png?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1443566/xiao_-preview-25_YOYZK9MZYo.png?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Seeed Studio Grove Shield for Seeeduino XIAO - with embedded battery management chip","href":"/seeed/products/grove-shield-for-seeeduino-xiao-with-embedded-battery-management-chip?ref=project-85a46d","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/seeed/products/grove-shield-for-seeeduino-xiao-with-embedded-battery-management-chip?ref=project-85a46d">
           Seeed Studio Grove Shield for Seeeduino XIAO - with embedded battery management chip
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Grove - Light Sensor" src="47.jpg" srcset="https://hackster.imgix.net/uploads/attachments/303519/101020014_201.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/303519/101020014_201.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Seeed Studio Grove - Light Sensor","href":"/seeed/products/grove-light-sensor?ref=project-85a46d","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/seeed/products/grove-light-sensor?ref=project-85a46d">
           Seeed Studio Grove - Light Sensor
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Grove - Piezo Buzzer" src="48.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1464910/buzzer_lTnKp4dh49.png?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1464910/buzzer_lTnKp4dh49.png?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Seeed Studio Grove - Piezo Buzzer","href":"/seeed/products/grove-piezo-buzzer?ref=project-85a46d","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/seeed/products/grove-piezo-buzzer?ref=project-85a46d">
           Seeed Studio Grove - Piezo Buzzer
          </a>
         </td>
        </tr>
        <tr>
         <td class="part-img">
         </td>
         <td class="hckui__typography__bodyL">
          Grove - Flame Sensor
         </td>
        </tr>
        <tr>
         <td class="part-img">
         </td>
         <td class="hckui__typography__bodyL">
          Grove Red LED
         </td>
        </tr>
        <tr>
         <td class="part-img">
         </td>
         <td class="hckui__typography__bodyL">
          IR receiver (generic)
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="LED, Low Power" src="49.jpg" srcset="https://hackster.imgix.net/uploads/attachments/836342/5033813.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/836342/5033813.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          LED, Low Power
         </td>
        </tr>
        <tr>
         <td class="part-img">
         </td>
         <td class="hckui__typography__bodyL">
          L9110s  Driver
         </td>
        </tr>
        <tr>
         <td class="part-img">
          <img alt="Rechargeable Battery, 3.7 V" src="50.jpg" srcset="https://hackster.imgix.net/uploads/attachments/838399/5300355.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/838399/5300355.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
         </td>
         <td class="hckui__typography__bodyL">
          Rechargeable Battery, 3.7 V
         </td>
        </tr>
       </tr>
       <tr class="head">
        <td colspan="2">
         <h3 class="hckui__typography__h3">
          Software apps and online services
         </h3>
        </td>
       </tr>
       <tr>
        <td class="part-img">
         <img alt="Arduino IDE" src="51.jpg" srcset="https://hackster.imgix.net/uploads/image/file/144203/IDE_web.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/image/file/144203/IDE_web.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
        </td>
        <td class="hckui__typography__bodyL">
         <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Arduino IDE","href":"/arduino/products/arduino-ide?ref=project-85a46d","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/arduino/products/arduino-ide?ref=project-85a46d">
          Arduino IDE
         </a>
        </td>
       </tr>
       <tr>
        <td class="part-img">
         <img alt="Blues Notehub.io" src="52.jpg" srcset="https://hackster.imgix.net/uploads/attachments/1592772/blues-brandmark-black-large_roS7acnDbx.png?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/1592772/blues-brandmark-black-large_roS7acnDbx.png?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
        </td>
        <td class="hckui__typography__bodyL">
         <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Blues Notehub.io","href":"/blues-wireless/products/blues-notehub-io?ref=project-85a46d","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/blues-wireless/products/blues-notehub-io?ref=project-85a46d">
          Blues Notehub.io
         </a>
        </td>
       </tr>
       <tr>
        <td class="part-img">
         <img alt="ThingSpeak API" src="53.jpg" srcset="https://hackster.imgix.net/uploads/image/file/118630/Hackster.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/image/file/118630/Hackster.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
        </td>
        <td class="hckui__typography__bodyL">
         <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"ThingSpeak API","href":"/thingspeak/products/thingspeak-api?ref=project-85a46d","type":"part","location":"things"},"clickOpts":{"delayRedirect":true}}' href="https://www.hackster.io/thingspeak/products/thingspeak-api?ref=project-85a46d">
          ThingSpeak API
         </a>
        </td>
       </tr>
       <tr>
        <td class="part-img">
        </td>
        <td class="hckui__typography__bodyL">
         Webhook.site
        </td>
       </tr>
       <tr class="head">
        <td colspan="2">
         <h3 class="hckui__typography__h3">
          Hand tools and fabrication machines
         </h3>
        </td>
       </tr>
       <tr>
        <td class="part-img">
         <img alt="Box, General Purpose" src="54.jpg" srcset="https://hackster.imgix.net/uploads/attachments/842003/5047703.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/842003/5047703.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
        </td>
        <td class="hckui__typography__bodyL">
         Box, General Purpose
        </td>
       </tr>
       <tr>
        <td class="part-img">
         <img alt="Tape, Velcro® Stick On Tape/Strip" src="55.jpg" srcset="https://hackster.imgix.net/uploads/attachments/842901/4767822.jpg?auto=compress%2Cformat&amp;w=96&amp;h=96&amp;fit=fill&amp;bg=ffffff 2x, https://hackster.imgix.net/uploads/attachments/842901/4767822.jpg?auto=compress%2Cformat&amp;w=48&amp;h=48&amp;fit=fill&amp;bg=ffffff"/>
        </td>
        <td class="hckui__typography__bodyL">
         Tape, Velcro® Stick On Tape/Strip
        </td>
       </tr>
       <tr>
        <td class="part-img">
        </td>
        <td class="hckui__typography__bodyL">
         Wrist cuff
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
  </section>
  <div class="project-section-break">
  </div>
  <section id="story">
   <div class="project-section-title">
    <h2 class="hckui__typography__h2 title-with-anchor">
     <span>
      Story
     </span>
    </h2>
   </div>
   <div class="project-story collapsible-section collapsed hljs-active hljs-monokai" itemprop="text">
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-introduction-0">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      Introduction
     </span>
    </h3>
    <p class="hckui__typography__bodyL">
     In this project I have set myself two challenges to solve and using giveaway kits from contest sponsors:
    </p>
    <ul class="hckui__typography__bodyL">
     <li>
      People with mobility disabilities sometimes need a remote control system to activate or deactivate multiple devices in the home but without the need to carry multiple remote controls. What can we do? I will design a single infrared remote control to activate all possible devices. The first version will control a TV and a portable lamp using the Cardputer device, the Seeeduino XIAO board and IR receiver sensor. Additionally, the disabled user can carry the remote control in their hand using a wrist cuff, to avoid holding it or hanging it while moving around the house.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="0.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      I also want to design a device that monitors the ambient light inside the home and can differentiate between lamplight and fire. If the light is caused by fire, then the system will notify the disabled person through an audible alarm or through an alert through an IoT system. What can we do to solve this challenge? I will use the Blues Notecarrier-A, and the XIAO ESP32S3 boards, and also the Grove Light and Flame sensors.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="1.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
    </p>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-ir-remote-control-1">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      IR Remote Control
     </span>
    </h3>
    <p class="hckui__typography__bodyL">
     In this step I will use the M5STACK Cardputer device as an infrared remote control, since it has an infrared emitter to interact with all kinds of devices. Below I show some of the main features of this excellent product:
    </p>
    <ul class="hckui__typography__bodyL">
     <li>
      M5StampS3 Microcontroller.
     </li>
     <li>
      56 key keyboard.
     </li>
     <li>
      1.14 Inch TFT Screen.
     </li>
     <li>
      Cavity speaker and SPM1423 digital MEMS microphone.
     </li>
     <li>
      Infrared emission tube is used for infrared control interaction.
     </li>
     <li>
      HY2.0-4P port for connecting and expanding I2C sensors.
     </li>
     <li>
      Micro SD card slot for expanding storage space.
     </li>
     <li>
      The built-in 120mAh and 1400mAh lithium battery in the base provide long battery life.
     </li>
     <li>
      Base with magnet, compatible with Lego hole expansion.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="2.jpg"/>
     <img class="carousel-image" src="3.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     Remember that the navigation and selection keys of the Cardputer are those shown in the image below: Up key (semicolon), Down key (dot), Left key (comma), and Right key (forward slash).
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="4.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     <span>
      For more details on how to program, applications, schematic diagram, Pin Map, and examples, please visit the official site here:
     </span>
     <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://docs.m5stack.com/en/core/Cardputer","href":"https://docs.m5stack.com/en/core/Cardputer","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://docs.m5stack.com/en/core/Cardputer" rel="nofollow">
      https://docs.m5stack.com/en/core/Cardputer
     </a>
    </p>
    <p class="hckui__typography__bodyL">
     <strong>
      Installing Board and Library
     </strong>
    </p>
    <p class="hckui__typography__bodyL">
     <span>
      To program the Cardputer, it is necessary to use the latest version of Arduino IDE. In my case I installed
     </span>
     <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Arduino IDE 2.3.2","href":"https://www.arduino.cc/en/software","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://www.arduino.cc/en/software" rel="nofollow">
      Arduino IDE 2.3.2
     </a>
     <span>
      and it worked fine.
     </span>
    </p>
    <p class="hckui__typography__bodyL">
     <span>
      To install the Arduino M5Stack board, please follow the steps in the following link, below I show you the version that I installed:
     </span>
     <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://docs.m5stack.com/en/arduino/arduino_board","href":"https://docs.m5stack.com/en/arduino/arduino_board","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://docs.m5stack.com/en/arduino/arduino_board" rel="nofollow">
      https://docs.m5stack.com/en/arduino/arduino_board
     </a>
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="5.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     <span>
      Finally, to install the M5Core library and all its dependencies, follow the instructions in the following link. Below I show you the version that I used:
     </span>
     <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://docs.m5stack.com/en/arduino/arduino_library","href":"https://docs.m5stack.com/en/arduino/arduino_library","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://docs.m5stack.com/en/arduino/arduino_library" rel="nofollow">
      https://docs.m5stack.com/en/arduino/arduino_library
     </a>
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="6.jpg"/>
    </div>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-programming-the-tv-remote-control-2">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      Programming the TV Remote Control
     </span>
    </h3>
    <ul class="hckui__typography__bodyL">
     <li>
      As I had previously mentioned, I will use the Cardputer device's IR sensor to transmit the IR codes.
     </li>
     <li>
      <span>
       For reference, I have used the example code "Ultimate-Remote" from the MIT license and published by geo-tp in the github account:
      </span>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Ultimate-Remote","href":"https://github.com/geo-tp/Ultimate-Remote","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://github.com/geo-tp/Ultimate-Remote" rel="nofollow">
       Ultimate-Remote
      </a>
     </li>
     <li>
      <span>
       This project is made to run on the PlatformIO IDE platform of Visual Studio. To run it on Arduino IDE you need to remove
      </span>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"platformio.ini","href":"http://platformio.ini","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="http://platformio.ini" rel="nofollow">
       platformio.ini
      </a>
      <span>
       file and install IRRemote library which is compatible with many IR remote controls protocols.
      </span>
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="7.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      <span>
       First, I explored this project, and I found the DAEWOO brand between 625 in the
      </span>
      <strong>
       <code>
        remote_data.cpp
       </code>
      </strong>
      <span>
       file. Afterwards, I found 20 different DAEWOO remote controls with their identifiers here:
      </span>
     </li>
    </ul>
    <pre><code><span>const Remote Daewoo_DVD_PlayerRemotes[] PROGMEM = {</span><br/><span>    {"21,-1.csv", Daewoo_DVD_Player_21_1_csvCommands, sizeof(Daewoo_DVD_Player_21_1_csvCommands) / sizeof(RemoteCommand)},</span><br/><span>};</span><br/><br/><span>const Product DaewooProducts[] PROGMEM = {</span><br/><span>    {"Unknown_VCR", Daewoo_Unknown_VCRRemotes, sizeof(Daewoo_Unknown_VCRRemotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_97P1R2ZDA0", Daewoo_Unknown_97P1R2ZDA0Remotes, sizeof(Daewoo_Unknown_97P1R2ZDA0Remotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_DV-800", Daewoo_Unknown_DV_800Remotes, sizeof(Daewoo_Unknown_DV_800Remotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_97P1RA3AB0", Daewoo_Unknown_97P1RA3AB0Remotes, sizeof(Daewoo_Unknown_97P1RA3AB0Remotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_R-40A06", Daewoo_Unknown_R_40A06Remotes, sizeof(Daewoo_Unknown_R_40A06Remotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_DAEWOO", Daewoo_Unknown_DAEWOORemotes, sizeof(Daewoo_Unknown_DAEWOORemotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_Visa", Daewoo_Unknown_VisaRemotes, sizeof(Daewoo_Unknown_VisaRemotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_r-22", Daewoo_Unknown_r_22Remotes, sizeof(Daewoo_Unknown_r_22Remotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_DS608P", Daewoo_Unknown_DS608PRemotes, sizeof(Daewoo_Unknown_DS608PRemotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_97P04701", Daewoo_Unknown_97P04701Remotes, sizeof(Daewoo_Unknown_97P04701Remotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_14Q3", Daewoo_Unknown_14Q3Remotes, sizeof(Daewoo_Unknown_14Q3Remotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_DV-F24D", Daewoo_Unknown_DV_F24DRemotes, sizeof(Daewoo_Unknown_DV_F24DRemotes) / sizeof(Remote)},</span><br/><span>    {"TV", Daewoo_TVRemotes, sizeof(Daewoo_TVRemotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_DVDS150", Daewoo_Unknown_DVDS150Remotes, sizeof(Daewoo_Unknown_DVDS150Remotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_R-40A15", Daewoo_Unknown_R_40A15Remotes, sizeof(Daewoo_Unknown_R_40A15Remotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_R-43A08", Daewoo_Unknown_R_43A08Remotes, sizeof(Daewoo_Unknown_R_43A08Remotes) / sizeof(Remote)},</span><br/><span>    {"VCR", Daewoo_VCRRemotes, sizeof(Daewoo_VCRRemotes) / sizeof(Remote)},</span><br/><span>    {"Unknown_R-40A10", Daewoo_Unknown_R_40A10Remotes, sizeof(Daewoo_Unknown_R_40A10Remotes) / sizeof(Remote)},</span><br/><span>    {"DVD Player", Daewoo_DVD_PlayerRemotes, sizeof(Daewoo_DVD_PlayerRemotes) / sizeof(Remote)},</span><br/><span>};</span></code></pre>
    <ul class="hckui__typography__bodyL">
     <li>
      <span>
       After installing the Ultimate Remote App, I run and tested these remote controls and found three of them compatible with my DAEWOO TV: R-40A06, R-40A10, and R-40A15. So I type them in the main menu in the favorites category in the following code of the
      </span>
      <code>
       <strong>
        remote_data.cpp
       </strong>
      </code>
      <span>
       file.
      </span>
     </li>
    </ul>
    <pre><code><span>#include &lt;pgmspace.h&gt;</span><br/><span>#include "remote_data.h"</span><br/><span>#include "remote_commands.h"</span><br/><br/><span>// Liste des telecommandes prefs</span><br/><span>const std::vector&lt;FavoriteRemote&gt; defaultFavoriteRemotes = {</span><br/><span>    FavoriteRemote{"Sony", "TV", "1,-1.csv", " LAMP   #1"},</span><br/><span>    FavoriteRemote{"Sony", "Unknown_RM-D7M", "15,-1.csv", " LAMP   #2"},</span><br/><span>    FavoriteRemote{"Sony", "Unknown_RM-D820", "17,-1.csv", " LAMP   #3"},</span><br/><br/><span>    FavoriteRemote{"Daewoo", "Unknown_R-40A06", "20,-1.csv", " DAEWOO  #1"},</span><br/><span>    FavoriteRemote{"Daewoo", "Unknown_R-40A10", "20,-1.csv", " DAEWOO  #2"},</span><br/><span>    FavoriteRemote{"Daewoo", "Unknown_R-40A15", "20,-1.csv", " DAEWOO  #3"},</span><br/><span>};</span></code></pre>
    <ul class="hckui__typography__bodyL">
     <li>
      If you want to reduce the size of the program to upload other applications such as games, watches, etc; you can do it here. For example, I removed 120 brands of remote controls from the 625, and gained 500k free memory.
     </li>
     <li>
      <span>
       But if you want to change the main menu, you can do it in the
      </span>
      <strong>
       <code>
        selection.cpp
       </code>
      </strong>
      <span>
       file, for example:
      </span>
     </li>
    </ul>
    <pre><code><span>const std::string getSelectionModeToString(SelectionMode mode) {</span><br/><span>    switch (mode) {</span><br/><span>        case SelectionMode::SCAN:</span><br/><span>            return "SCANNER";</span><br/><span>        case SelectionMode::FAVORITES:</span><br/><span>            return "FAVORITES";</span><br/><span>        case SelectionMode::POPULARS:</span><br/><span>            return "POPULARS";</span><br/><span>        case SelectionMode::ALL_REMOTES:</span><br/><span>            return "REMOTES";</span><br/><span>        default:</span><br/><span>            return "UNKNOWN";</span><br/><span>    }</span><br/><span>}</span><br/><br/><span>const std::string getSelectionModeDescription(SelectionMode mode) {</span><br/><span>    switch (mode) {</span><br/><span>        case SelectionMode::SCAN:</span><br/><span>            return "                       SEARCH";</span><br/><span>        case SelectionMode::FAVORITES:</span><br/><span>            return "   LAMP AND TV";</span><br/><span>        case SelectionMode::POPULARS:</span><br/><span>            return "                  BRANDS";</span><br/><span>        case SelectionMode::ALL_REMOTES:</span><br/><span>            return "               AVAILABLE";</span><br/><span>        default:</span><br/><span>            return "UNKNOWN";</span><br/><span>    }</span><br/><span>}</span></code></pre>
    <ul class="hckui__typography__bodyL">
     <li>
      You can try this with your smart TV! Remember that in the downloads section, you can find the link to this project in my Gitub account. Below I show you the navigation menu on the Cardputer.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="8.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      It's simple, first I select favorites,
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="9.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      Then I have 3 remote control for the DAEWOO TV. In my case I felt comfortable using Remote DAEWOO #3.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="10.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      The commands that I will use are the following: POWER, AV, CH_UP, CH_DOWN, VOL_UP, and VOL_DOWN.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="11.jpg"/>
     <img class="carousel-image" src="12.jpg"/>
    </div>
    <h3>
    </h3>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-programming-the-lamp-remote-control-3">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      Programming the Lamp Remote Control
     </span>
    </h3>
    <ul class="hckui__typography__bodyL">
     <li>
      I have designed a portable lamp that can be useful for a person with a disability since it is small, does not weigh, the battery is rechargeable and has several modes of operation. Below I show you the steps to follow to achieve this.
     </li>
     <li>
      The schematic diagram is shown below. As you can see, we need a Seeduino XIAO board, a driver, a generic infrared receiver, a high-power LED (1-3 watts), a broken bulb, and a 15 ohm resistor.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="13.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      The IR receiver can be powered from 3.3 to 5 VDC. I used a generic IR receiver like the ones shown in the image below and which have good range and good response to the IR remote control.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="14.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      The infrared sensor is actually an IC that includes a photosensitive diode to the infrared signal of the emitter and a series of circuits to adapt the received signal and provide a digital signal at the output to later be processed. This circuit is capable of separating the signal. infrared generated by remote control of the rest of the radiation in the environment.  The pinout is shown in the image below.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="15.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      The carrier signal frequency is 38 kHz. The transmitter emits 38kHz bursts of 1.2 ms, followed by a 0.6 ms blank to transmit a logic 1. The transmitter emits 38kHz bursts of 0.6 ms, followed by a 0.6 ms blank to transmit a logic 0.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="16.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      Each button on the remote control emits a code, so there is a need to create a communication protocol. There are different protocols depending on the manufacturer. The image below shows the 12-bit SIRC protocol, where: a) The beginning is to warn that we will send a code; b) The command has 7 bits (remote control key); and c) The address has 5 bits to activate different devices.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="17.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      <span>
       First we need to find which remote control is compatible with the IRremote library. In my case I tried some remote controls from the Ultimate-Remote application, and chose the remote control from the SONY manufacture which was easily recognized. In the code below I show you the application
      </span>
      <strong>
       <code>
        seeeduino_xiao_ircodes.ino
       </code>
      </strong>
      <span>
       which help us to recognize the codes that are compatible with this library. As you can see, we only use the IR receiver and show on the serial port the codes.
      </span>
     </li>
    </ul>
    <pre><code><span>#include &lt;IRremote.h&gt;</span><br/><br/><span>int RECV_PIN = 10; // define input pin on Arduino </span><br/><span>IRrecv irrecv(RECV_PIN); </span><br/><span>decode_results results; // decode_results class is defined in IRremote.h</span><br/><br/><span>void setup() { </span><br/><span>	Serial.begin(9600); </span><br/><span>	irrecv.enableIRIn(); // Start the receiver </span><br/><span>} </span><br/><br/><span>void loop() { </span><br/><span>	if (irrecv.decode(&amp;results)) {</span><br/><span>		Serial.println(results.value, HEX); </span><br/><span>		irrecv.resume(); // Receive the next value </span><br/><span>	}</span><br/><span>	delay (200); // small delay to prevent reading errors</span><br/><span>}</span></code></pre>
    <ul class="hckui__typography__bodyL">
     <li>
      The selected codes were organized to turn the lamp on and off as follows:
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="18.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      <span>
       I did the same procedure as in the previous section to configure 3 SONY brand remote controls: TV, RM-D7M, and RM-D820. Below you see those loaded in the
      </span>
      <strong>
       <code>
        remote_data.cpp
       </code>
      </strong>
      <span>
       file:
      </span>
     </li>
    </ul>
    <pre><code><span>#include &lt;pgmspace.h&gt;</span><br/><span>#include "remote_data.h"</span><br/><span>#include "remote_commands.h"</span><br/><br/><span>// Liste des telecommandes prefs</span><br/><span>const std::vector&lt;FavoriteRemote&gt; defaultFavoriteRemotes = {</span><br/><span>    FavoriteRemote{"Sony", "TV", "1,-1.csv", " LAMP   #1"},</span><br/><span>    FavoriteRemote{"Sony", "Unknown_RM-D7M", "15,-1.csv", " LAMP   #2"},</span><br/><span>    FavoriteRemote{"Sony", "Unknown_RM-D820", "17,-1.csv", " LAMP   #3"},</span></code></pre>
    <ul class="hckui__typography__bodyL">
     <li>
      <span>
       Finally, below I show you the code for the
      </span>
      <strong>
       <code>
        seeduino_xiao_recv.ino
       </code>
      </strong>
      <span>
       program, which will help us turn the lamp on and off, and also to fade it three times.
      </span>
     </li>
    </ul>
    <pre><code><span>#include &lt;IRremote.h&gt;			</span><br/><span>#define Button_1 0x10 // key_1 hex value</span><br/><span>#define Button_2 0x810 //key_2 hex value</span><br/><span>#define Button_3 0x410 // key_3 hex value</span><br/><br/><span>int SENSOR = 10; 			// IR receiver sensor to pin 10</span><br/><span>IRrecv irrecv(SENSOR);			</span><br/><span>decode_results codigo;			// decode_results class</span><br/><br/><span>int LEDLAMP_PIN1 = 1;</span><br/><span>int LEDLAMP_PIN2 = 2;</span><br/><span>int SENSOR_GND = 9;</span><br/><br/><span>void setup() {</span><br/><span>  Serial.begin(9600);			</span><br/><span>  irrecv.enableIRIn();			// initialize data reception</span><br/><span>  pinMode(LEDLAMP_PIN1, OUTPUT);		// pin 1 as output</span><br/><span>  pinMode(LEDLAMP_PIN2, OUTPUT);		// pin 2 as output</span><br/><span>  pinMode(SENSOR_GND, OUTPUT);		// pin 3 used as gnd</span><br/><span>} </span><br/><br/><span>void loop() {</span><br/><span>  digitalWrite(SENSOR_GND, LOW);</span><br/><span>  digitalWrite(LEDLAMP_PIN2, LOW);  </span><br/><span>  if (irrecv.decode(&amp;codigo)) {			// if there is already decoded data</span><br/><span>    Serial.println(codigo.value, HEX);		// print the value on monitor - hex</span><br/><span>      if (codigo.value == Button_1){</span><br/><span>      analogWrite(LEDLAMP_PIN1, 255);</span><br/><span>      }			// if code is button 1</span><br/><br/><span>      if (codigo.value == Button_2){</span><br/><span>      analogWrite(LEDLAMP_PIN1, 0);</span><br/><span>      }			// if code is button 2</span><br/><br/><span>    if (codigo.value == Button_3){</span><br/><span>      for(int i=0; i&lt;=2; i++){</span><br/><span>        for(int i=0; i&lt;=255; i++) {</span><br/><span>            analogWrite(LEDLAMP_PIN1, i);</span><br/><span>            delay(10);</span><br/><span>        }</span><br/><span>        for(int i=255; i&gt;=0; i--) {</span><br/><span>            analogWrite(LEDLAMP_PIN1, i);</span><br/><span>            delay(10);</span><br/><span>        }</span><br/><span>      }  </span><br/><span>    }			// if code is button 3</span><br/><span>    irrecv.resume();				// summarizes data acquisition</span><br/><span>  }</span><br/><span>  delay (100);					</span><br/><span>}</span></code></pre>
    <ul class="hckui__typography__bodyL">
     <li>
      Again I have 3 remote control options for the lamp. In my case I used Remote LAMP #1 with their IR codes already tested.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="19.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      Respectively, I used KEY1 to turn on the lamp, KEY2 to turn it off, and KEY3 to fade it.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="20.jpg"/>
    </div>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-assembling-ir-remote-control-devices-4">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      Assembling IR Remote Control Devices
     </span>
    </h3>
    <p class="hckui__typography__bodyL">
     According to my objectives, I want to design accessible and comfortable devices for people with disabilities. Below I show you how to assemble the portable lamp and how to add a wrist cuff to the Cardputer.
    </p>
    <p class="hckui__typography__bodyL">
     <strong>
      Portable Lamp
     </strong>
    </p>
    <p class="hckui__typography__bodyL">
     I have used a 100(L)x70(W)x40(H) mm box to introduce the lamp receiving device. After soldering the high power LED and adding a heatsink, I used silicone to fix it inside a broken light bulb as shown below:
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="21.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     My low energy bulb is shown in the following image:
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="22.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     Then I fixed the pieces inside the box according to the schematic diagram, and as shown below.
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="23.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     The lower space is to insert the two 3.7 volt batteries.
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="24.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     After assembling the device you can see it below.
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="25.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     <strong>
      Adding wrist cuff to the Cardputer
     </strong>
    </p>
    <p class="hckui__typography__bodyL">
     I have recycled an old baumanometer wrist cuff like the one shown below.
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="26.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     I have also used velcro, and cut it to the following approximate dimensions 70(L)x60(W) mm.
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="27.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     I used nylon thread to attach the velcro to the Cardputer and the wrist cuff. Below I show you the wrist cuff on the arm.
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="28.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     And below you can see the Cardputer after attaching it to the Cardputer. The user can easily remove the device whenever they want.
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="29.jpg"/>
    </div>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-ir-remote-control-test-5">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      IR Remote Control Test
     </span>
    </h3>
    <p class="hckui__typography__bodyL">
     Below you can see the demonstration of the functionality of the prototype when testing to control a DAEWOO TV and the portable lamp.
    </p>
    <div class="embed-frame">
     <figure class="youtube">
      <iframe allowfullscreen="" frameborder="0" height="500" src="//www.youtube.com/embed/dN4cWIiq3CU?rel=0" style="margin: 10px auto; display: block;" width="75%">
      </iframe>
     </figure>
    </div>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-light-monitor-with-fire-alarm-6">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      Light Monitor With Fire Alarm
     </span>
    </h3>
    <p class="hckui__typography__bodyL">
     The last part of this project is to build a system to monitor the ambient light from our portable lamp, as well as a fire alarm since it would be a good idea to warn the disabled user if the light is created by the light from our lamp or from an accidental fire. Below I show you the schematic diagram of this portable system.
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="30.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     <strong>
      How does it works?
     </strong>
    </p>
    <ul class="hckui__typography__bodyL">
     <li>
      The portable lamp must be close to the light sensor.
     </li>
     <li>
      If the light of the portable lamp is OFF, then the resistance of the light sensor is greater than 10 and the red LED is ON.
     </li>
     <li>
      If the light of the portable lamp is ON, then the resistance of the light sensor is less than 10 and the red LED is OFF.
     </li>
     <li>
      The possible fire source must be close to the flame sensor.
     </li>
     <li>
      If there is a fire, then the flame sensor turns ON, the buzzer is on and the output is 1.
     </li>
     <li>
      If there is no fire, then the flame sensor is OFF, the buzzer is off and the output is 0.
     </li>
     <li>
      Through the Blues Notecarrier-A and the Global Cellular Notecard we can send this data to the blues notehub, Webhook site and ThingSpeak platforms.
     </li>
    </ul>
    <p class="hckui__typography__bodyL">
     After mounting the electronics in an M5Stack case, this is what it looks like:
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="31.jpg"/>
     <img class="carousel-image" src="32.jpg"/>
    </div>
    <h3>
    </h3>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-collecting-sensor-data-with-notehub-7">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      Collecting Sensor Data With Notehub
     </span>
    </h3>
    <ul class="hckui__typography__bodyL">
     <li>
      <span>
       First we must open an account on the Notehub platform here:
      </span>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://blues.com/notehub/","href":"https://blues.com/notehub/","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://blues.com/notehub/" rel="nofollow">
       https://blues.com/notehub/
      </a>
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="33.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      <span>
       To program my XIAO ESP32S3 board, I followed the steps shown in this tutorial which is for the Arduino NANO 33 BLE Sense board and I didn´t find any problems:
      </span>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Collecting Sensor Data","href":"https://github.com/geo-tp/Ultimate-Remote","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://github.com/geo-tp/Ultimate-Remote" rel="nofollow">
       Collecting Sensor Data
      </a>
     </li>
     <li>
      On the blues notehub platform I have created the notecarrier-xiao-esp32s3 project.
     </li>
    </ul>
    <div class="carousel-images">
     <img class="carousel-image" src="34.jpg"/>
    </div>
    <ul class="hckui__typography__bodyL">
     <li>
      <span>
       The
      </span>
      <strong>
       <code>
        notecarrier_xiao_esp32s3.ino
       </code>
      </strong>
      <span>
       code I uploaded to the XIAO ESP32S3 board is shown below:
      </span>
     </li>
    </ul>
    <pre><code><span>#include &lt;Notecard.h&gt;</span><br/><span>#include &lt;HardwareSerial.h&gt;</span><br/><span>#include &lt;math.h&gt;</span><br/><br/><span>#define RED_LED D5 //Connect the LED Grove module to Pin 5</span><br/><span>#define FLAME_SENSOR D2 //connect FLAME SENSOR to digital pin 2</span><br/><span>#define BUZZER D0 //connect Grove - BUZZER to pin 0</span><br/><br/><span>#define NOTE_PRODUCT_UID "com.your-company.your-name:your_product"</span><br/><br/><span>#define usbSerial Serial</span><br/><br/><span>HardwareSerial txRxPinsSerial(0);</span><br/><br/><span>int flameValue;</span><br/><span>const int thresholdvalue=10;         //The threshold for which the LED should turn on. </span><br/><span>float Rsensor; //Resistance of sensor in K</span><br/><span>int getSensorInterval();</span><br/><br/><span>Notecard notecard;</span><br/><br/><span>void setup() {</span><br/><span>  pinMode(FLAME_SENSOR, INPUT);</span><br/><span>  pinMode(RED_LED,OUTPUT);            </span><br/><span>  pinMode(BUZZER,OUTPUT);</span><br/><span>  digitalWrite(RED_LED,LOW);</span><br/><span>  digitalWrite(BUZZER,LOW);</span><br/><br/><span>  // And configure txRxPinsSerial on pins RX=D6, TX=D7</span><br/><span>  txRxPinsSerial.begin(9600, SERIAL_8N1, 8, 9);</span><br/><span>  txRxPinsSerial.print("MySerial1");</span><br/><br/><span>  usbSerial.begin(115200);</span><br/><span>  while (!usbSerial) {</span><br/><span>      ; // wait for serial port to connect. Needed for native USB</span><br/><span>  }</span><br/><span>  usbSerial.println("Starting...");</span><br/><br/><span>  notecard.begin(txRxPinsSerial, 9600);</span><br/><span>  notecard.setDebugOutputStream(usbSerial);</span><br/><br/><span>  J *req = notecard.newRequest("hub.set");</span><br/><span>  if (req != NULL) {</span><br/><span>      JAddStringToObject(req, "product", NOTE_PRODUCT_UID);</span><br/><span>      JAddStringToObject(req, "mode", "continuous");</span><br/><span>      JAddBoolToObject(req, "sync", true); </span><br/><span>      notecard.sendRequest(req);</span><br/><span>  }</span><br/><span>}</span><br/><br/><span>void loop() {</span><br/><span>  int sensorValue = analogRead(A9); </span><br/><span>  Rsensor=(float)(4095-sensorValue)*10/sensorValue;</span><br/><span>  if(Rsensor&gt;thresholdvalue)</span><br/><span>  {</span><br/><span>    digitalWrite(RED_LED, HIGH);</span><br/><span>  }</span><br/><span>  else</span><br/><span>  {</span><br/><span>    digitalWrite(RED_LED, LOW);</span><br/><span>  }</span><br/><br/><span>  if(isFlameDetected())</span><br/><span>  turnOnBUZZER();</span><br/><span>  else turnOffBUZZER();</span><br/><br/><span>  usbSerial.print("Flame = ");</span><br/><span>  usbSerial.println(flameValue);</span><br/><span>  usbSerial.print("Resistance = ");</span><br/><span>  usbSerial.println(Rsensor);</span><br/><br/><span>  J *req = notecard.newRequest("note.add");</span><br/><span>  if (req != NULL) {</span><br/><span>    JAddStringToObject(req, "file", "sensors.qo");</span><br/><span>    JAddBoolToObject(req, "sync", true);</span><br/><span>    J *body = JAddObjectToObject(req, "body");</span><br/><span>    if (body) {</span><br/><span>        JAddNumberToObject(body, "flame", flameValue);</span><br/><span>        JAddNumberToObject(body, "resistance", Rsensor);</span><br/><span>    }</span><br/><span>    notecard.sendRequest(req);</span><br/><span>  }</span><br/><span>  //delay(15000);</span><br/><span>  int sensorIntervalSeconds = getSensorInterval();</span><br/><span>  usbSerial.print("Delaying ");</span><br/><span>  usbSerial.print(sensorIntervalSeconds);</span><br/><span>  usbSerial.println(" seconds");</span><br/><span>  delay(sensorIntervalSeconds * 1000);</span><br/><span>}</span><br/><br/><span>void turnOnBUZZER()</span><br/><span>{</span><br/><span>    flameValue=1;</span><br/><span>    analogWrite(BUZZER,150);</span><br/><span>}</span><br/><br/><span>void turnOffBUZZER()</span><br/><span>{</span><br/><span>    flameValue=0;</span><br/><span>    analogWrite(BUZZER,0);</span><br/><span>}</span><br/><br/><span>boolean isFlameDetected()</span><br/><span>{</span><br/><span>    if(digitalRead(FLAME_SENSOR))</span><br/><span>    return false;</span><br/><span>    else return true;</span><br/><span>}</span><br/><br/><span>// This function assumes you’ll set the reading_interval environment variable to</span><br/><span>// a positive integer. If the variable is not set, set to 0, or set to an invalid</span><br/><span>// type, this function returns a default value of 60.</span><br/><span>int getSensorInterval() {</span><br/><span>  int sensorIntervalSeconds = 60;</span><br/><span>  J *req = notecard.newRequest("env.get");</span><br/><span>  if (req != NULL) {</span><br/><span>      JAddStringToObject(req, "name", "reading_interval");</span><br/><span>      J* rsp = notecard.requestAndResponse(req);</span><br/><span>      int readingIntervalEnvVar = atoi(JGetString(rsp, "text"));</span><br/><span>      if (readingIntervalEnvVar &gt; 0) {</span><br/><span>        sensorIntervalSeconds = readingIntervalEnvVar;</span><br/><span>      }</span><br/><span>      notecard.deleteResponse(rsp);</span><br/><span>  }</span><br/><span>  return sensorIntervalSeconds;</span><br/><span>}</span></code></pre>
    <p class="hckui__typography__bodyL">
     Don't forget to type the NOTE_PRODUCT_UID of your project.
    </p>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-routing-data-to-cloud--thingspeak-8">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      Routing Data to Cloud: ThingSpeak
     </span>
    </h3>
    <p class="hckui__typography__bodyL">
     <span>
      Here I have followed all the instructions in the following tutorial to transfer data from my system to the ThingSpeak platform:
     </span>
     <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://dev.blues.io/guides-and-tutorials/routing-data-to-cloud/thingspeak/","href":"https://dev.blues.io/guides-and-tutorials/routing-data-to-cloud/thingspeak/","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://dev.blues.io/guides-and-tutorials/routing-data-to-cloud/thingspeak/" rel="nofollow">
      https://dev.blues.io/guides-and-tutorials/routing-data-to-cloud/thingspeak/
     </a>
    </p>
    <p class="hckui__typography__bodyL">
     Below I show you the Neptune channel that I have created with the data from the light and flame sensors.
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="35.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     According to the instructions in the tutorial, do not forget to copy the Write API KEY
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="36.jpg"/>
    </div>
    <p class="hckui__typography__bodyL">
     And then paste it into the ThingSpeak path that we created previously.
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="37.jpg"/>
    </div>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-light-monitor-with-fire-alarm-test-9">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      Light Monitor With Fire Alarm Test
     </span>
    </h3>
    <p class="hckui__typography__bodyL">
     Below I show you the video with the tests done with the light monitor with fire alarm system. In this demonstration I also make use of the portable lamp and the IR remote control created in the first part of this project.
    </p>
    <div class="embed-frame">
     <figure class="youtube">
      <iframe allowfullscreen="" frameborder="0" height="500" src="//www.youtube.com/embed/BDe-VmNd2Ds?rel=0" style="margin: 10px auto; display: block;" width="75%">
      </iframe>
     </figure>
    </div>
    <p class="hckui__typography__bodyL">
     Below I show you the images of the tests:
    </p>
    <div class="carousel-images">
     <img class="carousel-image" src="38.jpg"/>
     <img class="carousel-image" src="39.jpg"/>
     <img class="carousel-image" src="40.jpg"/>
     <img class="carousel-image" src="41.jpg"/>
    </div>
    <h3 class="hckui__typography__h3 title-with-anchor" id="toc-references-10">
     <p>
      <p class="hckui__typography__bodyL">
      </p>
     </p>
     <span>
      References:
     </span>
    </h3>
    <ul class="hckui__typography__bodyL">
     <li>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://docs.m5stack.com/en/arduino/arduino_board","href":"https://docs.m5stack.com/en/arduino/arduino_board","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://docs.m5stack.com/en/arduino/arduino_board" rel="nofollow">
       https://docs.m5stack.com/en/arduino/arduino_board
      </a>
     </li>
     <li>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://docs.m5stack.com/en/arduino/arduino_library","href":"https://docs.m5stack.com/en/arduino/arduino_library","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://docs.m5stack.com/en/arduino/arduino_library" rel="nofollow">
       https://docs.m5stack.com/en/arduino/arduino_library
      </a>
     </li>
     <li>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://github.com/geo-tp/Ultimate-Remote","href":"https://github.com/geo-tp/Ultimate-Remote","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://github.com/geo-tp/Ultimate-Remote" rel="nofollow">
       https://github.com/geo-tp/Ultimate-Remote
      </a>
     </li>
     <li>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"Collecting Sensor Data","href":"https://dev.blues.io/guides-and-tutorials/collecting-sensor-data/notecarrier-a/arduino-nano-33-ble-sense/c-cpp-arduino-wiring/#collecting-sensor-data","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://dev.blues.io/guides-and-tutorials/collecting-sensor-data/notecarrier-a/arduino-nano-33-ble-sense/c-cpp-arduino-wiring/#collecting-sensor-data" rel="nofollow">
       Collecting Sensor Data
      </a>
     </li>
     <li>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://dev.blues.io/guides-and-tutorials/routing-data-to-cloud/thingspeak/","href":"https://dev.blues.io/guides-and-tutorials/routing-data-to-cloud/thingspeak/","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://dev.blues.io/guides-and-tutorials/routing-data-to-cloud/thingspeak/" rel="nofollow">
       https://dev.blues.io/guides-and-tutorials/routing-data-to-cloud/thingspeak/
      </a>
     </li>
     <li>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://wiki.seeedstudio.com/xiao_esp32s3_getting_started/","href":"https://wiki.seeedstudio.com/xiao_esp32s3_getting_started/","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://wiki.seeedstudio.com/xiao_esp32s3_getting_started/" rel="nofollow">
       https://wiki.seeedstudio.com/xiao_esp32s3_getting_started/
      </a>
     </li>
     <li>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://wiki.seeedstudio.com/Seeeduino-XIAO/","href":"https://wiki.seeedstudio.com/Seeeduino-XIAO/","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://wiki.seeedstudio.com/Seeeduino-XIAO/" rel="nofollow">
       https://wiki.seeedstudio.com/Seeeduino-XIAO/
      </a>
     </li>
     <li>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://wiki.seeedstudio.com/Grove-Light_Sensor/","href":"https://wiki.seeedstudio.com/Grove-Light_Sensor/","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://wiki.seeedstudio.com/Grove-Light_Sensor/" rel="nofollow">
       https://wiki.seeedstudio.com/Grove-Light_Sensor/
      </a>
     </li>
     <li>
      <a class="hckui__typography__linkBlue" data-ha='{"eventName":"Clicked link","customProps":{"value":"https://wiki.seeedstudio.com/Grove-Flame_Sensor/","href":"https://wiki.seeedstudio.com/Grove-Flame_Sensor/","type":"story","location":"story"},"clickOpts":{"delayRedirect":true}}' href="https://wiki.seeedstudio.com/Grove-Flame_Sensor/" rel="nofollow">
       https://wiki.seeedstudio.com/Grove-Flame_Sensor/
      </a>
     </li>
    </ul>
   </div>
  </section>
  <div class="project-section-break">
  </div>
  <section id="schematics">
   <div class="project-section-title">
    <h2 class="hckui__typography__h2 title-with-anchor">
     <span>
      Schematics
     </span>
    </h2>
   </div>
   <div class="project-attachment">
    <div class="header">
     <div class="text">
      <h3 class="hckui__typography__h3">
       Lamp Remote Control
      </h3>
      <div class="hckui__typography__bodyS hckui__typography__pebble">
       Schematic Diagram
      </div>
     </div>
    </div>
    <div class="embed original boxed hckui__typography__textCenter">
     <img src="56.jpg"/>
    </div>
   </div>
   <div class="project-attachment">
    <div class="header">
     <div class="text">
      <h3 class="hckui__typography__h3">
       Light Monitor With Fire Alarm
      </h3>
      <div class="hckui__typography__bodyS hckui__typography__pebble">
       Schematic Diagram
      </div>
     </div>
    </div>
    <div class="embed original boxed hckui__typography__textCenter">
     <img src="57.jpg"/>
    </div>
   </div>
  </section>
  <div class="project-section-break">
  </div>
  <section id="code">
   <div class="project-section-title">
    <h2 class="hckui__typography__h2 title-with-anchor">
     <span>
      Code
     </span>
    </h2>
   </div>
   <div class="project-attachment project-code-widget">
    <div class="tabs hckui__typography__bodyS">
     <ul>
      <li class="active">
       <a data-target="#code-widget-655123" href="javascript:void(0)">
        seeeduino_xiao_ircodes.ino
       </a>
      </li>
      <li>
       <a data-target="#code-widget-655124" href="javascript:void(0)">
        seeduino_xiao_recv.ino
       </a>
      </li>
      <li>
       <a data-target="#code-widget-655129" href="javascript:void(0)">
        notecarrier_xiao_esp32s3.ino
       </a>
      </li>
     </ul>
    </div>
    <div class="preview-container">
     <div class="preview-pane active" id="code-widget-655123">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          seeeduino_xiao_ircodes.ino
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          Arduino
         </span>
        </div>
        <div class="comment">
         <div class="hckui__typography__bodyS hckui__typography__pebble">
          Lamp Remote Control, code 1
         </div>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax arduino">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;IRremote.h&gt;</span><span class="cp"></span>
</span><span id="line-2">
</span><span id="line-3"><span class="kr">int</span><span class="w"> </span><span class="n">RECV_PIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="c1">// define input pin on Arduino </span>
</span><span id="line-4"><span class="n">IRrecv</span><span class="w"> </span><span class="nf">irrecv</span><span class="p">(</span><span class="n">RECV_PIN</span><span class="p">);</span><span class="w"> </span>
</span><span id="line-5"><span class="n">decode_results</span><span class="w"> </span><span class="n">results</span><span class="p">;</span><span class="w"> </span><span class="c1">// decode_results class is defined in IRremote.h</span>
</span><span id="line-6">
</span><span id="line-7"><span class="kr">void</span><span class="w"> </span><span class="nb">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="line-8"><span class="w">	</span><span class="nf">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span><span class="w"> </span>
</span><span id="line-9"><span class="w">	</span><span class="n">irrecv</span><span class="p">.</span><span class="n">enableIRIn</span><span class="p">();</span><span class="w"> </span><span class="c1">// Start the receiver </span>
</span><span id="line-10"><span class="p">}</span><span class="w"> </span>
</span><span id="line-11">
</span><span id="line-12"><span class="kr">void</span><span class="w"> </span><span class="nb">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="line-13"><span class="w">	</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">irrecv</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="o">&amp;</span><span class="n">results</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-14"><span class="w">		</span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">results</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span><span class="w"> </span>
</span><span id="line-15"><span class="w">		</span><span class="n">irrecv</span><span class="p">.</span><span class="n">resume</span><span class="p">();</span><span class="w"> </span><span class="c1">// Receive the next value </span>
</span><span id="line-16"><span class="w">	</span><span class="p">}</span><span class="w"></span>
</span><span id="line-17"><span class="w">	</span><span class="nf">delay</span><span class="w"> </span><span class="p">(</span><span class="mi">200</span><span class="p">);</span><span class="w"> </span><span class="c1">// small delay to prevent reading errors</span>
</span><span id="line-18"><span class="p">}</span><span class="w"></span>
</span></pre>
       </div>
      </div>
     </div>
     <div class="preview-pane" id="code-widget-655124">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          seeduino_xiao_recv.ino
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          Arduino
         </span>
        </div>
        <div class="comment">
         <div class="hckui__typography__bodyS hckui__typography__pebble">
          Lamp Remote Control, code 2
         </div>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax arduino">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;IRremote.h&gt;</span><span class="c1">			</span><span class="cp"></span>
</span><span id="line-2"><span class="cp">#define Button_1 0x10 </span><span class="c1">// key_1 hex value</span>
</span><span id="line-3"><span class="cp">#define Button_2 0x810 </span><span class="c1">//key_2 hex value</span>
</span><span id="line-4"><span class="cp">#define Button_3 0x410 </span><span class="c1">// key_3 hex value</span>
</span><span id="line-5">
</span><span id="line-6"><span class="kr">int</span><span class="w"> </span><span class="n">SENSOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> 			</span><span class="c1">// IR receiver sensor to pin 10</span>
</span><span id="line-7"><span class="n">IRrecv</span><span class="w"> </span><span class="nf">irrecv</span><span class="p">(</span><span class="n">SENSOR</span><span class="p">);</span><span class="w">			</span>
</span><span id="line-8"><span class="n">decode_results</span><span class="w"> </span><span class="n">codigo</span><span class="p">;</span><span class="w">			</span><span class="c1">// decode_results class</span>
</span><span id="line-9">
</span><span id="line-10"><span class="kr">int</span><span class="w"> </span><span class="n">LEDLAMP_PIN1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
</span><span id="line-11"><span class="kr">int</span><span class="w"> </span><span class="n">LEDLAMP_PIN2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
</span><span id="line-12"><span class="kr">int</span><span class="w"> </span><span class="n">SENSOR_GND</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span><span class="w"></span>
</span><span id="line-13">
</span><span id="line-14"><span class="kr">void</span><span class="w"> </span><span class="nb">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-15"><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span><span class="w">			</span>
</span><span id="line-16"><span class="w">  </span><span class="n">irrecv</span><span class="p">.</span><span class="n">enableIRIn</span><span class="p">();</span><span class="w">			</span><span class="c1">// initialize data reception</span>
</span><span id="line-17"><span class="w">  </span><span class="nf">pinMode</span><span class="p">(</span><span class="n">LEDLAMP_PIN1</span><span class="p">,</span><span class="w"> </span><span class="kr">OUTPUT</span><span class="p">);</span><span class="w">		</span><span class="c1">// pin 1 as output</span>
</span><span id="line-18"><span class="w">  </span><span class="nf">pinMode</span><span class="p">(</span><span class="n">LEDLAMP_PIN2</span><span class="p">,</span><span class="w"> </span><span class="kr">OUTPUT</span><span class="p">);</span><span class="w">		</span><span class="c1">// pin 2 as output</span>
</span><span id="line-19"><span class="w">  </span><span class="nf">pinMode</span><span class="p">(</span><span class="n">SENSOR_GND</span><span class="p">,</span><span class="w"> </span><span class="kr">OUTPUT</span><span class="p">);</span><span class="w">		</span><span class="c1">// pin 3 used as gnd</span>
</span><span id="line-20"><span class="p">}</span><span class="w"> </span>
</span><span id="line-21">
</span><span id="line-22"><span class="kr">void</span><span class="w"> </span><span class="nb">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-23"><span class="w">  </span><span class="nf">digitalWrite</span><span class="p">(</span><span class="n">SENSOR_GND</span><span class="p">,</span><span class="w"> </span><span class="kr">LOW</span><span class="p">);</span><span class="w"></span>
</span><span id="line-24"><span class="w">  </span><span class="nf">digitalWrite</span><span class="p">(</span><span class="n">LEDLAMP_PIN2</span><span class="p">,</span><span class="w"> </span><span class="kr">LOW</span><span class="p">);</span><span class="w">  </span>
</span><span id="line-25"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">irrecv</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="o">&amp;</span><span class="n">codigo</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">			</span><span class="c1">// if there is already decoded data</span>
</span><span id="line-26"><span class="w">    </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">codigo</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span><span class="w">		</span><span class="c1">// print the value on monitor - hex</span>
</span><span id="line-27"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">codigo</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Button_1</span><span class="p">){</span><span class="w"></span>
</span><span id="line-28"><span class="w">      </span><span class="nf">analogWrite</span><span class="p">(</span><span class="n">LEDLAMP_PIN1</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">);</span><span class="w"></span>
</span><span id="line-29"><span class="w">      </span><span class="p">}</span><span class="w">			</span><span class="c1">// if code is button 1</span>
</span><span id="line-30">
</span><span id="line-31"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">codigo</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Button_2</span><span class="p">){</span><span class="w"></span>
</span><span id="line-32"><span class="w">      </span><span class="nf">analogWrite</span><span class="p">(</span><span class="n">LEDLAMP_PIN1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
</span><span id="line-33"><span class="w">      </span><span class="p">}</span><span class="w">			</span><span class="c1">// if code is button 2</span>
</span><span id="line-34">
</span><span id="line-35"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">codigo</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Button_3</span><span class="p">){</span><span class="w"></span>
</span><span id="line-36"><span class="w">      </span><span class="k">for</span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;=</span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">){</span><span class="w"></span>
</span><span id="line-37"><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;=</span><span class="mi">255</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-38"><span class="w">            </span><span class="nf">analogWrite</span><span class="p">(</span><span class="n">LEDLAMP_PIN1</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"></span>
</span><span id="line-39"><span class="w">            </span><span class="nf">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
</span><span id="line-40"><span class="w">        </span><span class="p">}</span><span class="w"></span>
</span><span id="line-41"><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">255</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-42"><span class="w">            </span><span class="nf">analogWrite</span><span class="p">(</span><span class="n">LEDLAMP_PIN1</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"></span>
</span><span id="line-43"><span class="w">            </span><span class="nf">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
</span><span id="line-44"><span class="w">        </span><span class="p">}</span><span class="w"></span>
</span><span id="line-45"><span class="w">      </span><span class="p">}</span><span class="w">  </span>
</span><span id="line-46"><span class="w">    </span><span class="p">}</span><span class="w">			</span><span class="c1">// if code is button 3</span>
</span><span id="line-47"><span class="w">    </span><span class="n">irrecv</span><span class="p">.</span><span class="n">resume</span><span class="p">();</span><span class="w">				</span><span class="c1">// summarizes data acquisition</span>
</span><span id="line-48"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-49"><span class="w">  </span><span class="nf">delay</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w">					</span>
</span><span id="line-50"><span class="p">}</span><span class="w"></span>
</span></pre>
       </div>
      </div>
     </div>
     <div class="preview-pane" id="code-widget-655129">
      <div class="header">
       <div class="text">
        <div class="title">
         <h3 class="hckui__typography__h3">
          notecarrier_xiao_esp32s3.ino
         </h3>
         <span class="hckui__typography__bodyS hckui__typography__pebble">
          Arduino
         </span>
        </div>
        <div class="comment">
         <div class="hckui__typography__bodyS hckui__typography__pebble">
          Light Monitor With Fire Alarm
         </div>
        </div>
       </div>
      </div>
      <div class="preview-body pygments-syntax arduino">
       <div class="highlight">
        <pre><span></span><span id="line-1"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Notecard.h&gt;</span><span class="cp"></span>
</span><span id="line-2"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;HardwareSerial.h&gt;</span><span class="cp"></span>
</span><span id="line-3"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;math.h&gt;</span><span class="cp"></span>
</span><span id="line-4">
</span><span id="line-5"><span class="cp">#define RED_LED D5 </span><span class="c1">//Connect the LED Grove module to Pin 5</span>
</span><span id="line-6"><span class="cp">#define FLAME_SENSOR D2 </span><span class="c1">//connect FLAME SENSOR to digital pin 2</span>
</span><span id="line-7"><span class="cp">#define BUZZER D0 </span><span class="c1">//connect Grove - BUZZER to pin 0</span>
</span><span id="line-8">
</span><span id="line-9"><span class="cp">#define NOTE_PRODUCT_UID "com.your-company.your-name:your_product"</span>
</span><span id="line-10">
</span><span id="line-11"><span class="cp">#define usbSerial Serial</span>
</span><span id="line-12">
</span><span id="line-13"><span class="n">HardwareSerial</span><span class="w"> </span><span class="nf">txRxPinsSerial</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
</span><span id="line-14">
</span><span id="line-15"><span class="kr">int</span><span class="w"> </span><span class="n">flameValue</span><span class="p">;</span><span class="w"></span>
</span><span id="line-16"><span class="kr">const</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="n">thresholdvalue</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span><span class="w">         </span><span class="c1">//The threshold for which the LED should turn on. </span>
</span><span id="line-17"><span class="kr">float</span><span class="w"> </span><span class="n">Rsensor</span><span class="p">;</span><span class="w"> </span><span class="c1">//Resistance of sensor in K</span>
</span><span id="line-18"><span class="kr">int</span><span class="w"> </span><span class="nf">getSensorInterval</span><span class="p">();</span><span class="w"></span>
</span><span id="line-19">
</span><span id="line-20"><span class="n">Notecard</span><span class="w"> </span><span class="n">notecard</span><span class="p">;</span><span class="w"></span>
</span><span id="line-21">
</span><span id="line-22"><span class="kr">void</span><span class="w"> </span><span class="nb">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-23"><span class="w">  </span><span class="nf">pinMode</span><span class="p">(</span><span class="n">FLAME_SENSOR</span><span class="p">,</span><span class="w"> </span><span class="kr">INPUT</span><span class="p">);</span><span class="w"></span>
</span><span id="line-24"><span class="w">  </span><span class="nf">pinMode</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span><span class="kr">OUTPUT</span><span class="p">);</span><span class="w">            </span>
</span><span id="line-25"><span class="w">  </span><span class="nf">pinMode</span><span class="p">(</span><span class="n">BUZZER</span><span class="p">,</span><span class="kr">OUTPUT</span><span class="p">);</span><span class="w"></span>
</span><span id="line-26"><span class="w">  </span><span class="nf">digitalWrite</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span><span class="kr">LOW</span><span class="p">);</span><span class="w"></span>
</span><span id="line-27"><span class="w">  </span><span class="nf">digitalWrite</span><span class="p">(</span><span class="n">BUZZER</span><span class="p">,</span><span class="kr">LOW</span><span class="p">);</span><span class="w"></span>
</span><span id="line-28">
</span><span id="line-29"><span class="w">  </span><span class="c1">// And configure txRxPinsSerial on pins RX=D6, TX=D7</span>
</span><span id="line-30"><span class="w">  </span><span class="n">txRxPinsSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">,</span><span class="w"> </span><span class="n">SERIAL_8N1</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">);</span><span class="w"></span>
</span><span id="line-31"><span class="w">  </span><span class="n">txRxPinsSerial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"MySerial1"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-32">
</span><span id="line-33"><span class="w">  </span><span class="n">usbSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span><span class="w"></span>
</span><span id="line-34"><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">usbSerial</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-35"><span class="w">      </span><span class="p">;</span><span class="w"> </span><span class="c1">// wait for serial port to connect. Needed for native USB</span>
</span><span id="line-36"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-37"><span class="w">  </span><span class="n">usbSerial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">"Starting..."</span><span class="p">);</span><span class="w"></span>
</span><span id="line-38">
</span><span id="line-39"><span class="w">  </span><span class="n">notecard</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">txRxPinsSerial</span><span class="p">,</span><span class="w"> </span><span class="mi">9600</span><span class="p">);</span><span class="w"></span>
</span><span id="line-40"><span class="w">  </span><span class="n">notecard</span><span class="p">.</span><span class="n">setDebugOutputStream</span><span class="p">(</span><span class="n">usbSerial</span><span class="p">);</span><span class="w"></span>
</span><span id="line-41">
</span><span id="line-42"><span class="w">  </span><span class="n">J</span><span class="w"> </span><span class="o">*</span><span class="n">req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">notecard</span><span class="p">.</span><span class="n">newRequest</span><span class="p">(</span><span class="s">"hub.set"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-43"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">req</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-44"><span class="w">      </span><span class="n">JAddStringToObject</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="s">"product"</span><span class="p">,</span><span class="w"> </span><span class="n">NOTE_PRODUCT_UID</span><span class="p">);</span><span class="w"></span>
</span><span id="line-45"><span class="w">      </span><span class="n">JAddStringToObject</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="s">"mode"</span><span class="p">,</span><span class="w"> </span><span class="s">"continuous"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-46"><span class="w">      </span><span class="n">JAddBoolToObject</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="s">"sync"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">);</span><span class="w"> </span>
</span><span id="line-47"><span class="w">      </span><span class="n">notecard</span><span class="p">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">req</span><span class="p">);</span><span class="w"></span>
</span><span id="line-48"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-49"><span class="p">}</span><span class="w"></span>
</span><span id="line-50">
</span><span id="line-51"><span class="kr">void</span><span class="w"> </span><span class="nb">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-52"><span class="w">  </span><span class="kr">int</span><span class="w"> </span><span class="n">sensorValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">analogRead</span><span class="p">(</span><span class="n">A9</span><span class="p">);</span><span class="w"> </span>
</span><span id="line-53"><span class="w">  </span><span class="n">Rsensor</span><span class="o">=</span><span class="p">(</span><span class="kr">float</span><span class="p">)(</span><span class="mi">4095</span><span class="o">-</span><span class="n">sensorValue</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="o">/</span><span class="n">sensorValue</span><span class="p">;</span><span class="w"></span>
</span><span id="line-54"><span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">Rsensor</span><span class="o">&gt;</span><span class="n">thresholdvalue</span><span class="p">)</span><span class="w"></span>
</span><span id="line-55"><span class="w">  </span><span class="p">{</span><span class="w"></span>
</span><span id="line-56"><span class="w">    </span><span class="nf">digitalWrite</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span><span class="w"> </span><span class="kr">HIGH</span><span class="p">);</span><span class="w"></span>
</span><span id="line-57"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-58"><span class="w">  </span><span class="k">else</span><span class="w"></span>
</span><span id="line-59"><span class="w">  </span><span class="p">{</span><span class="w"></span>
</span><span id="line-60"><span class="w">    </span><span class="nf">digitalWrite</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span><span class="w"> </span><span class="kr">LOW</span><span class="p">);</span><span class="w"></span>
</span><span id="line-61"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-62">
</span><span id="line-63"><span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">isFlameDetected</span><span class="p">())</span><span class="w"></span>
</span><span id="line-64"><span class="w">  </span><span class="n">turnOnBUZZER</span><span class="p">();</span><span class="w"></span>
</span><span id="line-65"><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="n">turnOffBUZZER</span><span class="p">();</span><span class="w"></span>
</span><span id="line-66">
</span><span id="line-67"><span class="w">  </span><span class="n">usbSerial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"Flame = "</span><span class="p">);</span><span class="w"></span>
</span><span id="line-68"><span class="w">  </span><span class="n">usbSerial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">flameValue</span><span class="p">);</span><span class="w"></span>
</span><span id="line-69"><span class="w">  </span><span class="n">usbSerial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"Resistance = "</span><span class="p">);</span><span class="w"></span>
</span><span id="line-70"><span class="w">  </span><span class="n">usbSerial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">Rsensor</span><span class="p">);</span><span class="w"></span>
</span><span id="line-71">
</span><span id="line-72"><span class="w">  </span><span class="n">J</span><span class="w"> </span><span class="o">*</span><span class="n">req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">notecard</span><span class="p">.</span><span class="n">newRequest</span><span class="p">(</span><span class="s">"note.add"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-73"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">req</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-74"><span class="w">    </span><span class="n">JAddStringToObject</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="s">"file"</span><span class="p">,</span><span class="w"> </span><span class="s">"sensors.qo"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-75"><span class="w">    </span><span class="n">JAddBoolToObject</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="s">"sync"</span><span class="p">,</span><span class="w"> </span><span class="kr">true</span><span class="p">);</span><span class="w"></span>
</span><span id="line-76"><span class="w">    </span><span class="n">J</span><span class="w"> </span><span class="o">*</span><span class="n">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JAddObjectToObject</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="s">"body"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-77"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">body</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-78"><span class="w">        </span><span class="n">JAddNumberToObject</span><span class="p">(</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="s">"flame"</span><span class="p">,</span><span class="w"> </span><span class="n">flameValue</span><span class="p">);</span><span class="w"></span>
</span><span id="line-79"><span class="w">        </span><span class="n">JAddNumberToObject</span><span class="p">(</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="s">"resistance"</span><span class="p">,</span><span class="w"> </span><span class="n">Rsensor</span><span class="p">);</span><span class="w"></span>
</span><span id="line-80"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span id="line-81"><span class="w">    </span><span class="n">notecard</span><span class="p">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">req</span><span class="p">);</span><span class="w"></span>
</span><span id="line-82"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-83"><span class="w">  </span><span class="c1">//delay(15000);</span>
</span><span id="line-84"><span class="w">  </span><span class="kr">int</span><span class="w"> </span><span class="n">sensorIntervalSeconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getSensorInterval</span><span class="p">();</span><span class="w"></span>
</span><span id="line-85"><span class="w">  </span><span class="n">usbSerial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"Delaying "</span><span class="p">);</span><span class="w"></span>
</span><span id="line-86"><span class="w">  </span><span class="n">usbSerial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">sensorIntervalSeconds</span><span class="p">);</span><span class="w"></span>
</span><span id="line-87"><span class="w">  </span><span class="n">usbSerial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">" seconds"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-88"><span class="w">  </span><span class="nf">delay</span><span class="p">(</span><span class="n">sensorIntervalSeconds</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span><span class="w"></span>
</span><span id="line-89"><span class="p">}</span><span class="w"></span>
</span><span id="line-90">
</span><span id="line-91"><span class="kr">void</span><span class="w"> </span><span class="nf">turnOnBUZZER</span><span class="p">()</span><span class="w"></span>
</span><span id="line-92"><span class="p">{</span><span class="w"></span>
</span><span id="line-93"><span class="w">    </span><span class="n">flameValue</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
</span><span id="line-94"><span class="w">    </span><span class="nf">analogWrite</span><span class="p">(</span><span class="n">BUZZER</span><span class="p">,</span><span class="mi">150</span><span class="p">);</span><span class="w"></span>
</span><span id="line-95"><span class="p">}</span><span class="w"></span>
</span><span id="line-96">
</span><span id="line-97"><span class="kr">void</span><span class="w"> </span><span class="nf">turnOffBUZZER</span><span class="p">()</span><span class="w"></span>
</span><span id="line-98"><span class="p">{</span><span class="w"></span>
</span><span id="line-99"><span class="w">    </span><span class="n">flameValue</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
</span><span id="line-100"><span class="w">    </span><span class="nf">analogWrite</span><span class="p">(</span><span class="n">BUZZER</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
</span><span id="line-101"><span class="p">}</span><span class="w"></span>
</span><span id="line-102">
</span><span id="line-103"><span class="kr">boolean</span><span class="w"> </span><span class="nf">isFlameDetected</span><span class="p">()</span><span class="w"></span>
</span><span id="line-104"><span class="p">{</span><span class="w"></span>
</span><span id="line-105"><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nf">digitalRead</span><span class="p">(</span><span class="n">FLAME_SENSOR</span><span class="p">))</span><span class="w"></span>
</span><span id="line-106"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kr">false</span><span class="p">;</span><span class="w"></span>
</span><span id="line-107"><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kr">true</span><span class="p">;</span><span class="w"></span>
</span><span id="line-108"><span class="p">}</span><span class="w"></span>
</span><span id="line-109">
</span><span id="line-110"><span class="c1">// This function assumes you’ll set the reading_interval environment variable to</span>
</span><span id="line-111"><span class="c1">// a positive integer. If the variable is not set, set to 0, or set to an invalid</span>
</span><span id="line-112"><span class="c1">// type, this function returns a default value of 60.</span>
</span><span id="line-113"><span class="kr">int</span><span class="w"> </span><span class="nf">getSensorInterval</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-114"><span class="w">  </span><span class="kr">int</span><span class="w"> </span><span class="n">sensorIntervalSeconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="p">;</span><span class="w"></span>
</span><span id="line-115"><span class="w">  </span><span class="n">J</span><span class="w"> </span><span class="o">*</span><span class="n">req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">notecard</span><span class="p">.</span><span class="n">newRequest</span><span class="p">(</span><span class="s">"env.get"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-116"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">req</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-117"><span class="w">      </span><span class="n">JAddStringToObject</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="s">"name"</span><span class="p">,</span><span class="w"> </span><span class="s">"reading_interval"</span><span class="p">);</span><span class="w"></span>
</span><span id="line-118"><span class="w">      </span><span class="n">J</span><span class="o">*</span><span class="w"> </span><span class="n">rsp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">notecard</span><span class="p">.</span><span class="n">requestAndResponse</span><span class="p">(</span><span class="n">req</span><span class="p">);</span><span class="w"></span>
</span><span id="line-119"><span class="w">      </span><span class="kr">int</span><span class="w"> </span><span class="n">readingIntervalEnvVar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atoi</span><span class="p">(</span><span class="n">JGetString</span><span class="p">(</span><span class="n">rsp</span><span class="p">,</span><span class="w"> </span><span class="s">"</span><span class="nf">text</span><span class="s">"</span><span class="p">));</span><span class="w"></span>
</span><span id="line-120"><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">readingIntervalEnvVar</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span id="line-121"><span class="w">        </span><span class="n">sensorIntervalSeconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">readingIntervalEnvVar</span><span class="p">;</span><span class="w"></span>
</span><span id="line-122"><span class="w">      </span><span class="p">}</span><span class="w"></span>
</span><span id="line-123"><span class="w">      </span><span class="n">notecard</span><span class="p">.</span><span class="n">deleteResponse</span><span class="p">(</span><span class="n">rsp</span><span class="p">);</span><span class="w"></span>
</span><span id="line-124"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span id="line-125"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">sensorIntervalSeconds</span><span class="p">;</span><span class="w"></span>
</span><span id="line-126"><span class="p">}</span><span class="w"></span>
</span></pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="project-attachment">
    <div class="header">
     <div class="text">
      <h3 class="hckui__typography__h3">
       neptune-project
      </h3>
      <div class="hckui__typography__bodyS hckui__typography__pebble">
       1. IR Remote Control for Smart TV and Portable Lamp; 
2. Light Monitor With Fire Alarm
      </div>
     </div>
    </div>
    <a href="https://github.com/guillengap/neptune-project">
     Github
    </a>
   </div>
  </section>
  <div class="project-section-break">
  </div>
  <div class="project-section-break">
  </div>
 </div>
</div>
